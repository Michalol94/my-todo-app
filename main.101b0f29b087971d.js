"use strict";(self.webpackChunkmy_todo_app=self.webpackChunkmy_todo_app||[]).push([[179],{2011:(ut,Se,O)=>{O.d(Se,{Dh:()=>fe,GT:()=>me,cc:()=>Ae,hO:()=>We,on:()=>$,pX:()=>X,xv:()=>ce});var h=O(5e3),Y=O(127),k=O(5813);ut=O.hmd(ut);const ue=["ngOnDestroy"],X=(be,nt,Ye,Ie={})=>new Proxy(be,{get:(_e,Ee)=>Ye.runOutsideAngular(()=>{var Ge;if(be[Ee])return(null===(Ge=null==Ie?void 0:Ie.spy)||void 0===Ge?void 0:Ge.get)&&Ie.spy.get(Ee,be[Ee]),be[Ee];if(ue.indexOf(Ee)>-1)return()=>{};const $e=nt.toPromise().then(te=>{const K=te&&te[Ee];return"function"==typeof K?K.bind(te):K&&K.then?K.then(ie=>Ye.run(()=>ie)):Ye.run(()=>K)});return new Proxy(()=>{},{get:(te,K)=>$e[K],apply:(te,K,ie)=>$e.then(ye=>{var se;const Ne=ye&&ye(...ie);return(null===(se=null==Ie?void 0:Ie.spy)||void 0===se?void 0:se.apply)&&Ie.spy.apply(Ee,ie,Ne),Ne})})})}),me=(be,nt)=>{nt.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Ie=>{Object.defineProperty(be.prototype,Ie,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Ie))})})};class re{constructor(nt){return nt}}const fe=new h.OlP("angularfire2.app.options"),ce=new h.OlP("angularfire2.app.name");function $(be,nt,Ye){const _e="object"==typeof Ye&&Ye||{};_e.name=_e.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const Ge=Y.Z.apps.filter($e=>$e&&$e.name===_e.name)[0]||nt.runOutsideAngular(()=>Y.Z.initializeApp(be,_e));try{JSON.stringify(be)!==JSON.stringify(Ge.options)&&H("error",`${Ge.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new re(Ge)}const H=(be,...nt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[be](...nt)},J={provide:re,useFactory:$,deps:[fe,h.R0b,[new h.FiY,ce]]};let We=(()=>{class be{constructor(Ye){Y.Z.registerVersion("angularfire",k.q4.full,"core"),Y.Z.registerVersion("angularfire",k.q4.full,"app-compat"),Y.Z.registerVersion("angular",h.q4F.full,Ye.toString())}static initializeApp(Ye,Ie){return{ngModule:be,providers:[{provide:fe,useValue:Ye},{provide:ce,useValue:Ie}]}}}return be.\u0275fac=function(Ye){return new(Ye||be)(h.LFG(h.Lbi))},be.\u0275mod=h.oAB({type:be}),be.\u0275inj=h.cJS({providers:[J]}),be})();function Ae(be,nt,Ye,Ie,_e){const[,Ee,Ge]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===be)||[];if(Ee)return function Oe(be,nt){try{return be.toString()===nt.toString()}catch(Ye){return be===nt}}(_e,Ge)||(pe("error",`${nt} was already initialized on the ${Ye} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:_e,was:Ge})),Ee;{const $e=Ie();return globalThis.\u0275AngularfireInstanceCache.push([be,$e,_e]),$e}}const Ve=!!ut.hot,pe=(be,...nt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[be](...nt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Se,O)=>{O.d(Se,{q4:()=>tc,iC:()=>oc,HU:()=>qu,vb:()=>Ad,JM:()=>no});var h=O(5e3),Y=O(5867),k=O(5861),ue=O(9681),X=O(2090),me=O(4859),re=O(1877);const fe="@firebase/installations",H="w:0.5.7",J="FIS_v2",be=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(C){return C instanceof X.ZR&&C.code.includes("request-failed")}function Ye({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ie(C){return{token:C.token,requestStatus:2,expiresIn:ie(C.expiresIn),creationTime:Date.now()}}function _e(C,I){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,k.Z)(function*(C,I){const L=(yield I.json()).error;return be.create("request-failed",{requestName:C,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Ge({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function $e(C,{refreshToken:I}){const R=Ge(C);return R.append("Authorization",function ye(C){return`${J} ${C}`}(I)),R}function te(C){return K.apply(this,arguments)}function K(){return(K=(0,k.Z)(function*(C){const I=yield C();return I.status>=500&&I.status<600?C():I})).apply(this,arguments)}function ie(C){return Number(C.replace("s","000"))}function se(C,I){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:I},{fid:R}){const L=Ye(C),Z=Ge(C),ee=I.getImmediate({optional:!0});if(ee){const Tt=yield ee.getHeartbeatsHeader();Tt&&Z.append("x-firebase-client",Tt)}const xe={method:"POST",headers:Z,body:JSON.stringify({fid:R,authVersion:J,appId:C.appId,sdkVersion:H})},Je=yield te(()=>fetch(L,xe));if(Je.ok){const Tt=yield Je.json();return{fid:Tt.fid||R,registrationStatus:2,refreshToken:Tt.refreshToken,authToken:Ie(Tt.authToken)}}throw yield _e("Create Installation",Je)})).apply(this,arguments)}function ae(C){return new Promise(I=>{setTimeout(I,C)})}const en=/^[cdef][\w-]{21}$/;function lt(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function Et(C){return function St(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return en.test(R)?R:""}catch(C){return""}}function cn(C){return`${C.appName}!${C.appId}`}const dn=new Map;function Ti(C,I){const R=cn(C);tn(R,I),function Gt(C,I){const R=function li(){return!gr&&"BroadcastChannel"in self&&(gr=new BroadcastChannel("[Firebase] FID Change"),gr.onmessage=C=>{tn(C.data.key,C.data.fid)}),gr}();R&&R.postMessage({key:C,fid:I}),function ks(){0===dn.size&&gr&&(gr.close(),gr=null)}()}(R,I)}function tn(C,I){const R=dn.get(C);if(R)for(const L of R)L(I)}let gr=null;const qr="firebase-installations-store";let os=null;function as(){return os||(os=(0,X.X3)("firebase-installations-database",1,(C,I)=>{0===I&&C.createObjectStore(qr)})),os}function dt(C,I){return ei.apply(this,arguments)}function ei(){return(ei=(0,k.Z)(function*(C,I){const R=cn(C),Z=(yield as()).transaction(qr,"readwrite"),ee=Z.objectStore(qr),Me=yield ee.get(R);return yield ee.put(I,R),yield Z.complete,(!Me||Me.fid!==I.fid)&&Ti(C,I.fid),I})).apply(this,arguments)}function ir(C){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,k.Z)(function*(C){const I=cn(C),L=(yield as()).transaction(qr,"readwrite");yield L.objectStore(qr).delete(I),yield L.complete})).apply(this,arguments)}function ci(C,I){return fo.apply(this,arguments)}function fo(){return(fo=(0,k.Z)(function*(C,I){const R=cn(C),Z=(yield as()).transaction(qr,"readwrite"),ee=Z.objectStore(qr),Me=yield ee.get(R),xe=I(Me);return void 0===xe?yield ee.delete(R):yield ee.put(xe,R),yield Z.complete,xe&&(!Me||Me.fid!==xe.fid)&&Ti(C,xe.fid),xe})).apply(this,arguments)}function vn(C){return sr.apply(this,arguments)}function sr(){return(sr=(0,k.Z)(function*(C){let I;const R=yield ci(C.appConfig,L=>{const Z=Ps(L),ee=ka(C,Z);return I=ee.registrationPromise,ee.installationEntry});return""===R.fid?{installationEntry:yield I}:{installationEntry:R,registrationPromise:I}})).apply(this,arguments)}function Ps(C){return $t(C||{fid:lt(),registrationStatus:0})}function ka(C,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(be.create("app-offline"))};const R={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},L=function qt(C,I){return ot.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:L}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:It(C)}:{installationEntry:I}}function ot(){return(ot=(0,k.Z)(function*(C,I){try{const R=yield se(C,I);return dt(C.appConfig,R)}catch(R){throw nt(R)&&409===R.customData.serverCode?yield ir(C.appConfig):yield dt(C.appConfig,{fid:I.fid,registrationStatus:0}),R}})).apply(this,arguments)}function It(C){return mr.apply(this,arguments)}function mr(){return(mr=(0,k.Z)(function*(C){let I=yield Gi(C.appConfig);for(;1===I.registrationStatus;)yield ae(100),I=yield Gi(C.appConfig);if(0===I.registrationStatus){const{installationEntry:R,registrationPromise:L}=yield vn(C);return L||R}return I})).apply(this,arguments)}function Gi(C){return ci(C,I=>{if(!I)throw be.create("installation-not-found");return $t(I)})}function $t(C){return function po(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Tr(C,I){return yr.apply(this,arguments)}function yr(){return(yr=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:I},R){const L=ht(C,R),Z=$e(C,R),ee=I.getImmediate({optional:!0});if(ee){const Tt=yield ee.getHeartbeatsHeader();Tt&&Z.append("x-firebase-client",Tt)}const xe={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:H,appId:C.appId}})},Je=yield te(()=>fetch(L,xe));if(Je.ok)return Ie(yield Je.json());throw yield _e("Generate Auth Token",Je)})).apply(this,arguments)}function ht(C,{fid:I}){return`${Ye(C)}/${I}/authTokens:generate`}function Sr(C){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,k.Z)(function*(C,I=!1){let R;const L=yield ci(C.appConfig,ee=>{if(!Vt(ee))throw be.create("not-registered");const Me=ee.authToken;if(!I&&j(Me))return ee;if(1===Me.requestStatus)return R=Qe(C,I),ee;{if(!navigator.onLine)throw be.create("app-offline");const xe=q(ee);return R=ft(C,xe),xe}});return R?yield R:L.authToken})).apply(this,arguments)}function Qe(C,I){return Te.apply(this,arguments)}function Te(){return(Te=(0,k.Z)(function*(C,I){let R=yield et(C.appConfig);for(;1===R.authToken.requestStatus;)yield ae(100),R=yield et(C.appConfig);const L=R.authToken;return 0===L.requestStatus?Sr(C,I):L})).apply(this,arguments)}function et(C){return ci(C,I=>{if(!Vt(I))throw be.create("not-registered");return function de(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function ft(C,I){return jt.apply(this,arguments)}function jt(){return(jt=(0,k.Z)(function*(C,I){try{const R=yield Tr(C,I),L=Object.assign(Object.assign({},I),{authToken:R});return yield dt(C.appConfig,L),R}catch(R){if(!nt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const L=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield dt(C.appConfig,L)}else yield ir(C.appConfig);throw R}})).apply(this,arguments)}function Vt(C){return void 0!==C&&2===C.registrationStatus}function j(C){return 2===C.requestStatus&&!function V(C){const I=Date.now();return I<C.creationTime||C.creationTime+C.expiresIn<I+36e5}(C)}function q(C){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:I})}function Be(){return(Be=(0,k.Z)(function*(C){const I=C,{installationEntry:R,registrationPromise:L}=yield vn(I);return L?L.catch(console.error):Sr(I).catch(console.error),R.fid})).apply(this,arguments)}function Qt(){return(Qt=(0,k.Z)(function*(C,I=!1){const R=C;return yield Ar(R),(yield Sr(R,I)).token})).apply(this,arguments)}function Ar(C){return zt.apply(this,arguments)}function zt(){return(zt=(0,k.Z)(function*(C){const{registrationPromise:I}=yield vn(C);I&&(yield I)})).apply(this,arguments)}function Yn(C){return be.create("missing-app-config-values",{valueName:C})}const Fa="installations",ke=C=>{const I=C.getProvider("app").getImmediate(),R=function us(C){if(!C||!C.options)throw Yn("App Configuration");if(!C.name)throw Yn("App Name");const I=["projectId","apiKey","appId"];for(const R of I)if(!C.options[R])throw Yn(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(I);return{app:I,appConfig:R,heartbeatServiceProvider:(0,ue._getProvider)(I,"heartbeat"),_delete:()=>Promise.resolve()}},Ft=C=>{const I=C.getProvider("app").getImmediate(),R=(0,ue._getProvider)(I,Fa).getImmediate();return{getId:()=>function Q(C){return Be.apply(this,arguments)}(R),getToken:Z=>function wt(C){return Qt.apply(this,arguments)}(R,Z)}};(function gn(){(0,ue._registerComponent)(new me.wA(Fa,ke,"PUBLIC")),(0,ue._registerComponent)(new me.wA("installations-internal",Ft,"PRIVATE"))})(),(0,ue.registerVersion)(fe,"0.5.7"),(0,ue.registerVersion)(fe,"0.5.7","esm2017");const _r="@firebase/remote-config",Pn=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gh{constructor(I,R,L,Z){this.client=I,this.storage=R,this.storageCache=L,this.logger=Z}isCachedDataFresh(I,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-R,Z=L<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${Z}.`),Z}fetch(I){var R=this;return(0,k.Z)(function*(){const[L,Z]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Z&&R.isCachedDataFresh(I.cacheMaxAgeMillis,L))return Z;I.eTag=Z&&Z.eTag;const ee=yield R.client.fetch(I),Me=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Me.push(R.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Me),ee})()}}function ud(C=navigator){return C.languages&&C.languages[0]||C.language}class Iu{constructor(I,R,L,Z,ee,Me){this.firebaseInstallations=I,this.sdkVersion=R,this.namespace=L,this.projectId=Z,this.apiKey=ee,this.appId=Me}fetch(I){var R=this;return(0,k.Z)(function*(){const[L,Z]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},Je={sdk_version:R.sdkVersion,app_instance_id:L,app_instance_id_token:Z,app_id:R.appId,language_code:ud()},Tt={method:"POST",headers:xe,body:JSON.stringify(Je)},Pt=fetch(Me,Tt),Mt=new Promise((Ei,Pi)=>{I.signal.addEventListener(()=>{const xo=new Error("The operation was aborted.");xo.name="AbortError",Pi(xo)})});let Wn;try{yield Promise.race([Pt,Mt]),Wn=yield Pt}catch(Ei){let Pi="fetch-client-network";throw"AbortError"===Ei.name&&(Pi="fetch-timeout"),Pn.create(Pi,{originalErrorMessage:Ei.message})}let xn=Wn.status;const ha=Wn.headers.get("ETag")||void 0;let Mo,Zr;if(200===Wn.status){let Ei;try{Ei=yield Wn.json()}catch(Pi){throw Pn.create("fetch-client-parse",{originalErrorMessage:Pi.message})}Mo=Ei.entries,Zr=Ei.state}if("INSTANCE_STATE_UNSPECIFIED"===Zr?xn=500:"NO_CHANGE"===Zr?xn=304:("NO_TEMPLATE"===Zr||"EMPTY_CONFIG"===Zr)&&(Mo={}),304!==xn&&200!==xn)throw Pn.create("fetch-status",{httpStatus:xn});return{status:xn,eTag:ha,config:Mo}})()}}class ng{constructor(I,R){this.client=I,this.storage=R}fetch(I){var R=this;return(0,k.Z)(function*(){const L=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(I,L)})()}attemptFetch(I,{throttleEndTimeMillis:R,backoffCount:L}){var Z=this;return(0,k.Z)(function*(){yield function Gn(C,I){return new Promise((R,L)=>{const Z=Math.max(I-Date.now(),0),ee=setTimeout(R,Z);C.addEventListener(()=>{clearTimeout(ee),L(Pn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,R);try{const ee=yield Z.client.fetch(I);return yield Z.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function ld(C){if(!(C instanceof X.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}(ee))throw ee;const Me={throttleEndTimeMillis:Date.now()+(0,X.$s)(L),backoffCount:L+1};return yield Z.storage.setThrottleMetadata(Me),Z.attemptFetch(I,Me)}})()}}class hs{constructor(I,R,L,Z,ee){this.app=I,this._client=R,this._storageCache=L,this._storage=Z,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Rl(C,I){const R=C.target.error||void 0;return Pn.create(I,{originalErrorMessage:R&&R.message})}const Us="app_namespace_store";class qh{constructor(I,R,L,Z=function sg(){return new Promise((C,I)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=L=>{I(Rl(L,"storage-open"))},R.onsuccess=L=>{C(L.target.result)},R.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Us,{keyPath:"compositeKey"})}}catch(R){I(Pn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=I,this.appName=R,this.namespace=L,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var R=this;return(0,k.Z)(function*(){const L=yield R.openDbPromise;return new Promise((Z,ee)=>{const xe=L.transaction([Us],"readonly").objectStore(Us),Je=R.createCompositeKey(I);try{const Tt=xe.get(Je);Tt.onerror=Pt=>{ee(Rl(Pt,"storage-get"))},Tt.onsuccess=Pt=>{const Mt=Pt.target.result;Z(Mt?Mt.value:void 0)}}catch(Tt){ee(Pn.create("storage-get",{originalErrorMessage:Tt&&Tt.message}))}})})()}set(I,R){var L=this;return(0,k.Z)(function*(){const Z=yield L.openDbPromise;return new Promise((ee,Me)=>{const Je=Z.transaction([Us],"readwrite").objectStore(Us),Tt=L.createCompositeKey(I);try{const Pt=Je.put({compositeKey:Tt,value:R});Pt.onerror=Mt=>{Me(Rl(Mt,"storage-set"))},Pt.onsuccess=()=>{ee()}}catch(Pt){Me(Pn.create("storage-set",{originalErrorMessage:Pt&&Pt.message}))}})})()}delete(I){var R=this;return(0,k.Z)(function*(){const L=yield R.openDbPromise;return new Promise((Z,ee)=>{const xe=L.transaction([Us],"readwrite").objectStore(Us),Je=R.createCompositeKey(I);try{const Tt=xe.delete(Je);Tt.onerror=Pt=>{ee(Rl(Pt,"storage-delete"))},Tt.onsuccess=()=>{Z()}}catch(Tt){ee(Pn.create("storage-delete",{originalErrorMessage:Tt&&Tt.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class dd{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,k.Z)(function*(){const R=I.storage.getLastFetchStatus(),L=I.storage.getLastSuccessfulFetchTimestampMillis(),Z=I.storage.getActiveConfig(),ee=yield R;ee&&(I.lastFetchStatus=ee);const Me=yield L;Me&&(I.lastSuccessfulFetchTimestampMillis=Me);const xe=yield Z;xe&&(I.activeConfig=xe)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function mo(){return zh.apply(this,arguments)}function zh(){return(zh=(0,k.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Jo(){(0,ue._registerComponent)(new me.wA("remote-config",function C(I,{instanceIdentifier:R}){const L=I.getProvider("app").getImmediate(),Z=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Pn.create("registration-window");if(!(0,X.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:ee,apiKey:Me,appId:xe}=L.options;if(!ee)throw Pn.create("registration-project-id");if(!Me)throw Pn.create("registration-api-key");if(!xe)throw Pn.create("registration-app-id");const Je=new qh(xe,L.name,R=R||"firebase"),Tt=new dd(Je),Pt=new re.Yd(_r);Pt.logLevel=re.in.ERROR;const Mt=new Iu(Z,ue.SDK_VERSION,R,ee,Me,xe),Wn=new ng(Mt,Je),xn=new Gh(Wn,Je,Tt,Pt),ha=new hs(L,xn,Tt,Je,Pt);return function Mr(C){const I=(0,X.m9)(C);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(ha),ha},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(_r,"0.3.6"),(0,ue.registerVersion)(_r,"0.3.6","esm2017")}();const Nl="/firebase-messaging-sw.js",js="/firebase-cloud-messaging-push-scope",ni="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yo="google.c.a.c_id",Va="google.c.a.c_l",hd="google.c.a.ts",og="google.c.a.e";var $s=(()=>{return(C=$s||($s={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",$s;var C})();function fi(C){const I=new Uint8Array(C);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Su(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(R),Z=new Uint8Array(L.length);for(let ee=0;ee<L.length;++ee)Z[ee]=L.charCodeAt(ee);return Z}const Au="fcm_token_details_db",vr="fcm_token_object_Store";function Wh(C){return Mu.apply(this,arguments)}function Mu(){return Mu=(0,k.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(Au))return null;let I=null;return(yield(0,X.X3)(Au,5,function(){var L=(0,k.Z)(function*(Z,ee,Me,xe){var Je;if(ee<2||!Z.objectStoreNames.contains(vr))return;const Tt=xe.objectStore(vr),Pt=yield Tt.index("fcmSenderId").get(C);if(yield Tt.clear(),Pt)if(2===ee){const Mt=Pt;if(!Mt.auth||!Mt.p256dh||!Mt.endpoint)return;I={token:Mt.fcmToken,createTime:null!==(Je=Mt.createTime)&&void 0!==Je?Je:Date.now(),subscriptionOptions:{auth:Mt.auth,p256dh:Mt.p256dh,endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:"string"==typeof Mt.vapidKey?Mt.vapidKey:fi(Mt.vapidKey)}}}else if(3===ee){const Mt=Pt;I={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:fi(Mt.auth),p256dh:fi(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:fi(Mt.vapidKey)}}}else if(4===ee){const Mt=Pt;I={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:fi(Mt.auth),p256dh:fi(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:fi(Mt.vapidKey)}}}});return function(Z,ee,Me,xe){return L.apply(this,arguments)}}())).close(),yield(0,X.Lj)(Au),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),fd(I)?I:null}),Mu.apply(this,arguments)}function fd(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:I}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const fs="firebase-messaging-store";let Ba=null;function Ol(){return Ba||(Ba=(0,X.X3)("firebase-messaging-database",1,(C,I)=>{0===I&&C.createObjectStore(fs)})),Ba}function yn(C){return ea.apply(this,arguments)}function ea(){return(ea=(0,k.Z)(function*(C){const I=vo(C),L=yield(yield Ol()).transaction(fs).objectStore(fs).get(I);if(L)return L;{const Z=yield Wh(C.appConfig.senderId);if(Z)return yield Hs(C,Z),Z}})).apply(this,arguments)}function Hs(C,I){return un.apply(this,arguments)}function un(){return(un=(0,k.Z)(function*(C,I){const R=vo(C),Z=(yield Ol()).transaction(fs,"readwrite");return yield Z.objectStore(fs).put(I,R),yield Z.complete,I})).apply(this,arguments)}function pd(C){return _o.apply(this,arguments)}function _o(){return(_o=(0,k.Z)(function*(C){const I=vo(C),L=(yield Ol()).transaction(fs,"readwrite");yield L.objectStore(fs).delete(I),yield L.complete})).apply(this,arguments)}function vo({appConfig:C}){return C.appId}const Ln=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ua(C,I){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,k.Z)(function*(C,I){const R=yield qs(C),L=pt(I),Z={method:"POST",headers:R,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(ri(C.appConfig),Z)).json()}catch(Me){throw Ln.create("token-subscribe-failed",{errorInfo:Me})}if(ee.error)throw Ln.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Ln.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Nr(C,I){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,k.Z)(function*(C,I){const R=yield qs(C),L=pt(I.subscriptionOptions),Z={method:"PATCH",headers:R,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(`${ri(C.appConfig)}/${I.token}`,Z)).json()}catch(Me){throw Ln.create("token-update-failed",{errorInfo:Me})}if(ee.error)throw Ln.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Ln.create("token-update-no-token");return ee.token})).apply(this,arguments)}function ps(C,I){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,k.Z)(function*(C,I){const L={method:"DELETE",headers:yield qs(C)};try{const ee=yield(yield fetch(`${ri(C.appConfig)}/${I}`,L)).json();if(ee.error)throw Ln.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(Z){throw Ln.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function ri({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function qs(C){return zs.apply(this,arguments)}function zs(){return(zs=(0,k.Z)(function*({appConfig:C,installations:I}){const R=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function pt({p256dh:C,auth:I,endpoint:R,vapidKey:L}){const Z={web:{endpoint:R,auth:I,p256dh:C}};return L!==ni&&(Z.web.applicationPubKey=L),Z}const Ou=6048e5;function ja(C){return ku.apply(this,arguments)}function ku(){return(ku=(0,k.Z)(function*(C){const I=yield Fl(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:I.endpoint,auth:fi(I.getKey("auth")),p256dh:fi(I.getKey("p256dh"))},L=yield yn(C.firebaseDependencies);if(L){if(ta(L.subscriptionOptions,R))return Date.now()>=L.createTime+Ou?kl(C,{token:L.token,createTime:Date.now(),subscriptionOptions:R}):L.token;try{yield ps(C.firebaseDependencies,L.token)}catch(Z){console.warn(Z)}return De(C.firebaseDependencies,R)}return De(C.firebaseDependencies,R)})).apply(this,arguments)}function Pu(C){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,k.Z)(function*(C){const I=yield yn(C.firebaseDependencies);I&&(yield ps(C.firebaseDependencies,I.token),yield pd(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function kl(C,I){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,k.Z)(function*(C,I){try{const R=yield Nr(C.firebaseDependencies,I),L=Object.assign(Object.assign({},I),{token:R,createTime:Date.now()});return yield Hs(C.firebaseDependencies,L),R}catch(R){throw yield Pu(C),R}})).apply(this,arguments)}function De(C,I){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,k.Z)(function*(C,I){const L={token:yield Ua(C,I),createTime:Date.now(),subscriptionOptions:I};return yield Hs(C,L),L.token})).apply(this,arguments)}function Fl(C,I){return En.apply(this,arguments)}function En(){return(En=(0,k.Z)(function*(C,I){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Su(I)})})).apply(this,arguments)}function ta(C,I){return I.vapidKey===C.vapidKey&&I.endpoint===C.endpoint&&I.auth===C.auth&&I.p256dh===C.p256dh}function na(C){const I={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function ii(C,I){if(!I.notification)return;C.notification={};const R=I.notification.title;R&&(C.notification.title=R);const L=I.notification.body;L&&(C.notification.body=L);const Z=I.notification.image;Z&&(C.notification.image=Z)}(I,C),function Ll(C,I){!I.data||(C.data=I.data)}(I,C),function Vl(C,I){if(!I.fcmOptions)return;C.fcmOptions={};const R=I.fcmOptions.link;R&&(C.fcmOptions.link=R);const L=I.fcmOptions.analytics_label;L&&(C.fcmOptions.analyticsLabel=L)}(I,C),I}function gd(C){return"object"==typeof C&&!!C&&yo in C}function Bl(C,I){const R=[];for(let L=0;L<C.length;L++)R.push(C.charAt(L)),L<I.length&&R.push(I.charAt(L));return R.join("")}function Ws(C){return Ln.create("missing-app-config-values",{valueName:C})}Bl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Bl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Er{constructor(I,R,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function Lu(C){if(!C||!C.options)throw Ws("App Configuration Object");if(!C.name)throw Ws("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const L of I)if(!R[L])throw Ws(L);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:Z,installations:R,analyticsProvider:L}}_delete(){return Promise.resolve()}}function pi(C){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,k.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Nl,{scope:js}),C.swRegistration.update().catch(()=>{})}catch(I){throw Ln.create("failed-service-worker-registration",{browserErrorMessage:I.message})}})).apply(this,arguments)}function Ks(C,I){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,k.Z)(function*(C,I){if(!I&&!C.swRegistration&&(yield pi(C)),I||!C.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw Ln.create("invalid-sw-registration");C.swRegistration=I}})).apply(this,arguments)}function Ul(C,I){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,k.Z)(function*(C,I){I?C.vapidKey=I:C.vapidKey||(C.vapidKey=ni)})).apply(this,arguments)}function jl(){return(jl=(0,k.Z)(function*(C,I){if(!navigator)throw Ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ln.create("permission-blocked");return yield Ul(C,null==I?void 0:I.vapidKey),yield Ks(C,null==I?void 0:I.serviceWorkerRegistration),ja(C)})).apply(this,arguments)}function $a(C,I,R){return ra.apply(this,arguments)}function ra(){return(ra=(0,k.Z)(function*(C,I,R){const L=$l(I);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:R[yo],message_name:R[Va],message_time:R[hd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function $l(C){switch(C){case $s.NOTIFICATION_CLICKED:return"notification_open";case $s.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function md(){return(md=(0,k.Z)(function*(C,I){const R=I.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===$s.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(na(R)):C.onMessageHandler.next(na(R)));const L=R.data;gd(L)&&"1"===L[og]&&(yield $a(C,R.messageType,L))})).apply(this,arguments)}const Gl="@firebase/messaging",yd=C=>{const I=new Er(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Hl(C,I){return md.apply(this,arguments)}(I,R)),I},wo=C=>{const I=C.getProvider("messaging").getImmediate();return{getToken:L=>function Uu(C,I){return jl.apply(this,arguments)}(I,L)}};function vd(){return bo.apply(this,arguments)}function bo(){return(bo=(0,k.Z)(function*(){try{yield(0,X.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function _d(){(0,ue._registerComponent)(new me.wA("messaging",yd,"PUBLIC")),(0,ue._registerComponent)(new me.wA("messaging-internal",wo,"PRIVATE")),(0,ue.registerVersion)(Gl,"0.9.11"),(0,ue.registerVersion)(Gl,"0.9.11","esm2017")}();const zl="analytics",xy="firebase_id",Ha="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ju="https://www.googletagmanager.com/gtag/js",qn=new re.Yd("@firebase/analytics");function Ed(C){return Promise.all(C.map(I=>I.catch(R=>R)))}function ag(C,I){const R=document.createElement("script");R.src=`${ju}?l=${C}&id=${I}`,R.async=!0,document.head.appendChild(R)}function ia(C,I,R,L,Z,ee){return wd.apply(this,arguments)}function wd(){return(wd=(0,k.Z)(function*(C,I,R,L,Z,ee){const Me=L[Z];try{if(Me)yield I[Me];else{const Je=(yield Ed(R)).find(Tt=>Tt.measurementId===Z);Je&&(yield I[Je.appId])}}catch(xe){qn.error(xe)}C("config",Z,ee)})).apply(this,arguments)}function Kl(C,I,R,L,Z){return Do.apply(this,arguments)}function Do(){return(Do=(0,k.Z)(function*(C,I,R,L,Z){try{let ee=[];if(Z&&Z.send_to){let Me=Z.send_to;Array.isArray(Me)||(Me=[Me]);const xe=yield Ed(R);for(const Je of Me){const Tt=xe.find(Mt=>Mt.measurementId===Je),Pt=Tt&&I[Tt.appId];if(!Pt){ee=[];break}ee.push(Pt)}}0===ee.length&&(ee=Object.values(I)),yield Promise.all(ee),C("event",L,Z||{})}catch(ee){qn.error(ee)}})).apply(this,arguments)}function ug(){const C=window.document.getElementsByTagName("script");for(const I of Object.values(C))if(I.src&&I.src.includes(ju))return I;return null}const Bn=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),zr=new class si{constructor(I={},R=1e3){this.throttleMetadata=I,this.intervalMillis=R}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,R){this.throttleMetadata[I]=R}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function sa(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Dd(C){return mn.apply(this,arguments)}function mn(){return(mn=(0,k.Z)(function*(C){var I;const{appId:R,apiKey:L}=C,Z={method:"GET",headers:sa(L)},ee=Ha.replace("{app-id}",R),Me=yield fetch(ee,Z);if(200!==Me.status&&304!==Me.status){let xe="";try{const Je=yield Me.json();(null===(I=Je.error)||void 0===I?void 0:I.message)&&(xe=Je.error.message)}catch(Je){}throw Bn.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:xe})}return Me.json()})).apply(this,arguments)}function Yh(C){return xi.apply(this,arguments)}function xi(){return(xi=(0,k.Z)(function*(C,I=zr,R){const{appId:L,apiKey:Z,measurementId:ee}=C.options;if(!L)throw Bn.create("no-app-id");if(!Z){if(ee)return{measurementId:ee,appId:L};throw Bn.create("no-api-key")}const Me=I.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xe=new Zl;return setTimeout((0,k.Z)(function*(){xe.abort()}),void 0!==R?R:6e4),$u({appId:L,apiKey:Z,measurementId:ee},Me,xe,I)})).apply(this,arguments)}function $u(C,I,R){return gi.apply(this,arguments)}function gi(){return(gi=(0,k.Z)(function*(C,{throttleEndTimeMillis:I,backoffCount:R},L,Z=zr){const{appId:ee,measurementId:Me}=C;try{yield kt(L,I)}catch(xe){if(Me)return qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:ee,measurementId:Me};throw xe}try{const xe=yield Dd(C);return Z.deleteThrottleMetadata(ee),xe}catch(xe){if(!Cd(xe)){if(Z.deleteThrottleMetadata(ee),Me)return qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:ee,measurementId:Me};throw xe}const Je=503===Number(xe.customData.httpStatus)?(0,X.$s)(R,Z.intervalMillis,30):(0,X.$s)(R,Z.intervalMillis),Tt={throttleEndTimeMillis:Date.now()+Je,backoffCount:R+1};return Z.setThrottleMetadata(ee,Tt),qn.debug(`Calling attemptFetch again in ${Je} millis`),$u(C,Tt,L,Z)}})).apply(this,arguments)}function kt(C,I){return new Promise((R,L)=>{const Z=Math.max(I-Date.now(),0),ee=setTimeout(R,Z);C.addEventListener(()=>{clearTimeout(ee),L(Bn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function Cd(C){if(!(C instanceof X.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}class Zl{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}function Yl(){return Co.apply(this,arguments)}function Co(){return(Co=(0,k.Z)(function*(){if(!(0,X.hl)())return qn.warn(Bn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(C){return qn.warn(Bn.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function ys(){return(ys=(0,k.Z)(function*(C,I,R,L,Z,ee,Me){var xe;const Je=Yh(C);Je.then(xn=>{R[xn.measurementId]=xn.appId,C.options.measurementId&&xn.measurementId!==C.options.measurementId&&qn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(xn=>qn.error(xn)),I.push(Je);const Tt=Yl().then(xn=>{if(xn)return L.getId()}),[Pt,Mt]=yield Promise.all([Je,Tt]);ug()||ag(ee,Pt.measurementId),Z("js",new Date);const Wn=null!==(xe=null==Me?void 0:Me.config)&&void 0!==xe?xe:{};return Wn.origin="firebase",Wn.update=!0,null!=Mt&&(Wn[xy]=Mt),Z("config",Pt.measurementId,Wn),Pt.measurementId})).apply(this,arguments)}class oa{constructor(I){this.app=I}_delete(){return delete mi[this.app.options.appId],Promise.resolve()}}let mi={},Qs=[];const yi={};let Js,Ki,Wi="dataLayer",Jl=!1;function Ri(C,I,R){!function Io(){const C=[];if((0,X.ru)()&&C.push("This is a browser extension environment."),(0,X.zI)()||C.push("Cookies are not available."),C.length>0){const I=C.map((L,Z)=>`(${Z+1}) ${L}`).join(" "),R=Bn.create("invalid-analytics-context",{errorInfo:I});qn.warn(R.message)}}();const L=C.options.appId;if(!L)throw Bn.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Bn.create("no-api-key");qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mi[L])throw Bn.create("already-exists",{id:L});if(!Jl){!function ms(C){let I=[];Array.isArray(window[C])?I=window[C]:window[C]=I}(Wi);const{wrappedGtag:ee,gtagCore:Me}=function Zh(C,I,R,L,Z){let ee=function(...Me){window[L].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(ee=window[Z]),window[Z]=function bd(C,I,R,L){function ee(){return(ee=(0,k.Z)(function*(Me,xe,Je){try{"event"===Me?yield Kl(C,I,R,xe,Je):"config"===Me?yield ia(C,I,R,L,xe,Je):C("set",xe)}catch(Tt){qn.error(Tt)}})).apply(this,arguments)}return function Z(Me,xe,Je){return ee.apply(this,arguments)}}(ee,C,I,R),{gtagCore:ee,wrappedGtag:window[Z]}}(mi,Qs,yi,Wi,"gtag");Ki=ee,Js=Me,Jl=!0}return mi[L]=function zn(C,I,R,L,Z,ee,Me){return ys.apply(this,arguments)}(C,Qs,yi,I,Js,Wi,R),new oa(C)}function ua(){return(ua=(0,k.Z)(function*(C,I,R,L,Z){if(Z&&Z.global)C("event",R,L);else{const ee=yield I;C("event",R,Object.assign(Object.assign({},L),{send_to:ee}))}})).apply(this,arguments)}function Dn(){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,k.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(C){return!1}})).apply(this,arguments)}const eo="@firebase/analytics";!function hg(){(0,ue._registerComponent)(new me.wA(zl,(I,{options:R})=>Ri(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ue._registerComponent)(new me.wA("analytics-internal",function C(I){try{const R=I.getProvider(zl).getImmediate();return{logEvent:(L,Z,ee)=>function dg(C,I,R,L){C=(0,X.m9)(C),function aa(C,I,R,L,Z){return ua.apply(this,arguments)}(Ki,mi[C.app.options.appId],I,R,L).catch(Z=>qn.error(Z))}(R,L,Z,ee)}}catch(R){throw Bn.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ue.registerVersion)(eo,"0.7.7"),(0,ue.registerVersion)(eo,"0.7.7","esm2017")}();var to=O(4408),Hu=O(7565);const Xl=new class Cn extends Hu.v{}(class _s extends to.o{constructor(I,R){super(I,R),this.scheduler=I,this.work=R}schedule(I,R=0){return R>0?super.schedule(I,R):(this.delay=R,this.state=I,this.scheduler.flush(this),this)}execute(I,R){return R>0||this.closed?super.execute(I,R):this._execute(I,R)}requestAsyncId(I,R,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(I,R,L):I.flush(this)}});var fg=O(4986),ec=O(8505),Pr=O(9468),_i=O(5363);const tc=new h.GfV("7.3.0"),vs="__angularfire_symbol__analyticsIsSupportedValue",ki="__angularfire_symbol__analyticsIsSupported",Qi="__angularfire_symbol__remoteConfigIsSupportedValue",Ga="__angularfire_symbol__remoteConfigIsSupported",nc="__angularfire_symbol__messagingIsSupportedValue",rc="__angularfire_symbol__messagingIsSupported";function no(C,I,R){if(I){if(1===I.length)return I[0];const ee=I.filter(Me=>Me.app===R);if(1===ee.length)return ee[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[ki]||(globalThis[ki]=Dn().then(C=>globalThis[vs]=C).catch(()=>globalThis[vs]=!1)),globalThis[rc]||(globalThis[rc]=vd().then(C=>globalThis[nc]=C).catch(()=>globalThis[nc]=!1)),globalThis[Ga]||(globalThis[Ga]=mo().then(C=>globalThis[Qi]=C).catch(()=>globalThis[Qi]=!1));const Ad=(C,I)=>{const R=I?[I]:(0,Y.C6)(),L=[];return R.forEach(Z=>{Z.container.getProvider(C).instances.forEach(Me=>{L.includes(Me)||L.push(Me)})}),L};function So(){}class Gu{constructor(I,R=Xl){this.zone=I,this.delegate=R}now(){return this.delegate.now()}schedule(I,R,L){const Z=this.zone;return this.delegate.schedule(function(Me){Z.runGuarded(()=>{I.apply(this,[Me])})},R,L)}}class Ji{constructor(I){this.zone=I,this.task=null}call(I,R){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",So,{},So,So)),R.pipe((0,ec.b)({next:L,complete:L,error:L})).subscribe(I).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let qu=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Gu(Zone.current)),this.insideAngular=R.run(()=>new Gu(Zone.current,fg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(h.LFG(h.R0b))},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Xi(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function oc(C){return Xi(),function Ao(C){return function(R){return(R=R.lift(new Ji(C.ngZone))).pipe((0,Pr.R)(C.outsideAngular),(0,_i.Q)(C.insideAngular))}}(Xi())(C)}},2090:(ut,Se,O)=>{O.d(Se,{$s:()=>po,BH:()=>Ae,G6:()=>te,L:()=>ce,LL:()=>St,Lj:()=>jt,Mn:()=>Ge,Sg:()=>Oe,UG:()=>be,US:()=>re,X3:()=>ft,ZB:()=>J,ZR:()=>ae,b$:()=>Ie,d:()=>_e,eu:()=>ie,hl:()=>K,jU:()=>nt,m9:()=>ht,ne:()=>dt,pd:()=>os,r3:()=>tn,ru:()=>Ye,tV:()=>$,uI:()=>pe,vZ:()=>ks,w1:()=>Ee,xO:()=>Hi,xb:()=>gr,z$:()=>Ve,zI:()=>ye,zd:()=>qr});var h=O(5861);const X=function(j){const V=[];let q=0;for(let de=0;de<j.length;de++){let Q=j.charCodeAt(de);Q<128?V[q++]=Q:Q<2048?(V[q++]=Q>>6|192,V[q++]=63&Q|128):55296==(64512&Q)&&de+1<j.length&&56320==(64512&j.charCodeAt(de+1))?(Q=65536+((1023&Q)<<10)+(1023&j.charCodeAt(++de)),V[q++]=Q>>18|240,V[q++]=Q>>12&63|128,V[q++]=Q>>6&63|128,V[q++]=63&Q|128):(V[q++]=Q>>12|224,V[q++]=Q>>6&63|128,V[q++]=63&Q|128)}return V},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let Q=0;Q<j.length;Q+=3){const Be=j[Q],wt=Q+1<j.length,Qt=wt?j[Q+1]:0,Ar=Q+2<j.length,zt=Ar?j[Q+2]:0;let pn=(15&Qt)<<2|zt>>6,or=63&zt;Ar||(or=64,wt||(pn=64)),de.push(q[Be>>2],q[(3&Be)<<4|Qt>>4],q[pn],q[or])}return de.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(X(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let q=0,de=0;for(;q<j.length;){const Q=j[q++];if(Q<128)V[de++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Be=j[q++];V[de++]=String.fromCharCode((31&Q)<<6|63&Be)}else if(Q>239&&Q<365){const Ar=((7&Q)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;V[de++]=String.fromCharCode(55296+(Ar>>10)),V[de++]=String.fromCharCode(56320+(1023&Ar))}else{const Be=j[q++],wt=j[q++];V[de++]=String.fromCharCode((15&Q)<<12|(63&Be)<<6|63&wt)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const q=V?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let Q=0;Q<j.length;){const Be=q[j.charAt(Q++)],Qt=Q<j.length?q[j.charAt(Q)]:0;++Q;const zt=Q<j.length?q[j.charAt(Q)]:64;++Q;const Ot=Q<j.length?q[j.charAt(Q)]:64;if(++Q,null==Be||null==Qt||null==zt||null==Ot)throw Error();de.push(Be<<2|Qt>>4),64!==zt&&(de.push(Qt<<4&240|zt>>2),64!==Ot&&de.push(zt<<6&192|Ot))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},ce=function(j){return function(j){const V=X(j);return re.encodeByteArray(V,!0)}(j).replace(/\./g,"")},$=function(j){try{return re.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function J(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const q in V)!V.hasOwnProperty(q)||!We(q)||(j[q]=J(j[q],V[q]));return j}function We(j){return"__proto__"!==j}class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,q)=>{this.resolve=V,this.reject=q})}wrapCallback(V){return(q,de)=>{q?this.reject(q):this.resolve(de),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(q):V(q,de))}}}function Oe(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=V||"demo-project",Q=j.iat||0,Be=j.sub||j.user_id;if(!Be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const wt=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:Q,exp:Q+3600,auth_time:Q,sub:Be,user_id:Be,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(wt)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function nt(){return"object"==typeof self&&self.self===self}function Ye(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return Ve().indexOf("Electron/")>=0}function Ee(){const j=Ve();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ge(){return Ve().indexOf("MSAppHost/")>=0}function te(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K(){return"object"==typeof indexedDB}function ie(){return new Promise((j,V)=>{try{let q=!0;const de="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(de);Q.onsuccess=()=>{Q.result.close(),q||self.indexedDB.deleteDatabase(de),j(!0)},Q.onupgradeneeded=()=>{q=!1},Q.onerror=()=>{var Be;V((null===(Be=Q.error)||void 0===Be?void 0:Be.message)||"")}}catch(q){V(q)}})}function ye(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ae extends Error{constructor(V,q,de){super(q),this.code=V,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,St.prototype.create)}}class St{constructor(V,q,de){this.service=V,this.serviceName=q,this.errors=de}create(V,...q){const de=q[0]||{},Q=`${this.service}/${V}`,Be=this.errors[V],wt=Be?function en(j,V){return j.replace(kn,(q,de)=>{const Q=V[de];return null!=Q?String(Q):`<${de}?>`})}(Be,de):"Error";return new ae(Q,`${this.serviceName}: ${wt} (${Q}).`,de)}}const kn=/\{\$([^}]+)}/g;function tn(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function gr(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function ks(j,V){if(j===V)return!0;const q=Object.keys(j),de=Object.keys(V);for(const Q of q){if(!de.includes(Q))return!1;const Be=j[Q],wt=V[Q];if(Gr(Be)&&Gr(wt)){if(!ks(Be,wt))return!1}else if(Be!==wt)return!1}for(const Q of de)if(!q.includes(Q))return!1;return!0}function Gr(j){return null!==j&&"object"==typeof j}function Hi(j){const V=[];for(const[q,de]of Object.entries(j))Array.isArray(de)?de.forEach(Q=>{V.push(encodeURIComponent(q)+"="+encodeURIComponent(Q))}):V.push(encodeURIComponent(q)+"="+encodeURIComponent(de));return V.length?"&"+V.join("&"):""}function qr(j){const V={};return j.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[Q,Be]=de.split("=");V[decodeURIComponent(Q)]=decodeURIComponent(Be)}}),V}function os(j){const V=j.indexOf("?");if(!V)return"";const q=j.indexOf("#",V);return j.substring(V,q>0?q:void 0)}function dt(j,V){const q=new ei(j,V);return q.subscribe.bind(q)}class ei{constructor(V,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{V(this)}).catch(de=>{this.error(de)})}next(V){this.forEachObserver(q=>{q.next(V)})}error(V){this.forEachObserver(q=>{q.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,q,de){let Q;if(void 0===V&&void 0===q&&void 0===de)throw new Error("Missing Observer.");Q=function Zn(j,V){if("object"!=typeof j||null===j)return!1;for(const q of V)if(q in j&&"function"==typeof j[q])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:q,complete:de},void 0===Q.next&&(Q.next=ci),void 0===Q.error&&(Q.error=ci),void 0===Q.complete&&(Q.complete=ci);const Be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(wt){}}),this.observers.push(Q),Be}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,V)}sendOne(V,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{q(this.observers[V])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ci(){}function po(j,V=1e3,q=2){const de=V*Math.pow(q,j),Q=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+Q)}function ht(j){return j&&j._delegate?j._delegate:j}function Sr(j,V){return new Promise((q,de)=>{j.onsuccess=Q=>{q(Q.target.result)},j.onerror=Q=>{var Be;de(`${V}: ${null===(Be=Q.target.error)||void 0===Be?void 0:Be.message}`)}})}class Ut{constructor(V){this._db=V,this.objectStoreNames=this._db.objectStoreNames}transaction(V,q){return new Qe(this._db.transaction.call(this._db,V,q))}createObjectStore(V,q){return new Te(this._db.createObjectStore(V,q))}close(){this._db.close()}}class Qe{constructor(V){this._transaction=V,this.complete=new Promise((q,de)=>{this._transaction.oncomplete=function(){q()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(V){return new Te(this._transaction.objectStore(V))}}class Te{constructor(V){this._store=V}index(V){return new et(this._store.index(V))}createIndex(V,q,de){return new et(this._store.createIndex(V,q,de))}get(V){return Sr(this._store.get(V),"Error reading from IndexedDB")}put(V,q){return Sr(this._store.put(V,q),"Error writing to IndexedDB")}delete(V){return Sr(this._store.delete(V),"Error deleting from IndexedDB")}clear(){return Sr(this._store.clear(),"Error clearing IndexedDB object store")}}class et{constructor(V){this._index=V}get(V){return Sr(this._index.get(V),"Error reading from IndexedDB")}}function ft(j,V,q){return new Promise((de,Q)=>{try{const Be=indexedDB.open(j,V);Be.onsuccess=wt=>{de(new Ut(wt.target.result))},Be.onerror=wt=>{var Qt;Q(`Error opening indexedDB: ${null===(Qt=wt.target.error)||void 0===Qt?void 0:Qt.message}`)},Be.onupgradeneeded=wt=>{q(new Ut(Be.result),wt.oldVersion,wt.newVersion,new Qe(Be.transaction))}}catch(Be){Q(`Error opening indexedDB: ${Be.message}`)}})}function jt(j){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,h.Z)(function*(j){return new Promise((V,q)=>{try{const de=indexedDB.deleteDatabase(j);de.onsuccess=()=>{V()},de.onerror=Q=>{var Be;q(`Error deleting indexedDB database "${j}": ${null===(Be=Q.target.error)||void 0===Be?void 0:Be.message}`)}}catch(de){q(`Error deleting indexedDB database "${j}": ${de.message}`)}})})).apply(this,arguments)}},9072:(ut,Se,O)=>{var h=O(5e3);let Y=null;function k(){return Y}const re=new h.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ce(){return(0,h.LFG)(H)}()},providedIn:"platform"}),n})();const $=new h.OlP("Location Initialized");let H=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function We(){return new H((0,h.LFG)(re))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function be(n){const e=(0,h.LFG)(re).location;return new Ye((0,h.LFG)(fe),e&&e.origin||"")}()},providedIn:"root"}),n})();const nt=new h.OlP("appBaseHref");let Ye=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Ve(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Ve(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(nt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Ve(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Ve(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(nt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe($e(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function Ge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Ae,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(h.LFG(pe),h.LFG(fe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ee(){return new _e((0,h.LFG)(pe),(0,h.LFG)(fe))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}var ye=(()=>((ye=ye||{})[ye.Format=0]="Format",ye[ye.Standalone=1]="Standalone",ye))(),se=(()=>((se=se||{})[se.Narrow=0]="Narrow",se[se.Abbreviated=1]="Abbreviated",se[se.Wide=2]="Wide",se[se.Short=3]="Short",se))(),Ne=(()=>((Ne=Ne||{})[Ne.Short=0]="Short",Ne[Ne.Medium=1]="Medium",Ne[Ne.Long=2]="Long",Ne[Ne.Full=3]="Full",Ne))(),ae=(()=>((ae=ae||{})[ae.Decimal=0]="Decimal",ae[ae.Group=1]="Group",ae[ae.List=2]="List",ae[ae.PercentSign=3]="PercentSign",ae[ae.PlusSign=4]="PlusSign",ae[ae.MinusSign=5]="MinusSign",ae[ae.Exponential=6]="Exponential",ae[ae.SuperscriptingExponent=7]="SuperscriptingExponent",ae[ae.PerMille=8]="PerMille",ae[ae.Infinity=9]="Infinity",ae[ae.NaN=10]="NaN",ae[ae.TimeSeparator=11]="TimeSeparator",ae[ae.CurrencyDecimal=12]="CurrencyDecimal",ae[ae.CurrencyGroup=13]="CurrencyGroup",ae))();function sn(n,e){return ir((0,h.cg1)(n)[h.wAp.DateFormat],e)}function ss(n,e){return ir((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function tn(n,e){return ir((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function Gt(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(void 0===r){if(e===ae.CurrencyDecimal)return t[h.wAp.NumberSymbols][ae.Decimal];if(e===ae.CurrencyGroup)return t[h.wAp.NumberSymbols][ae.Group]}return r}function os(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ir(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Zn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const sr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ps={},ka=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var qt=(()=>((qt=qt||{})[qt.Short=0]="Short",qt[qt.ShortGMT=1]="ShortGMT",qt[qt.Long=2]="Long",qt[qt.Extended=3]="Extended",qt))(),ot=(()=>((ot=ot||{})[ot.FullYear=0]="FullYear",ot[ot.Month=1]="Month",ot[ot.Date=2]="Date",ot[ot.Hours=3]="Hours",ot[ot.Minutes=4]="Minutes",ot[ot.Seconds=5]="Seconds",ot[ot.FractionalSeconds=6]="FractionalSeconds",ot[ot.Day=7]="Day",ot))(),It=(()=>((It=It||{})[It.DayPeriods=0]="DayPeriods",It[It.Days=1]="Days",It[It.Months=2]="Months",It[It.Eras=3]="Eras",It))();function mr(n,e,t,r){let i=function Qt(n){if(zt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,u=1,c=1]=n.split("-").map(p=>+p);return Gi(i,u-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(sr))return function Ar(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,p=Number(n[5]||0)-r,y=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,c,p,y,b),e}(r)}const e=new Date(n);if(!zt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=$t(t,e)||e;let p,c=[];for(;e;){if(p=ka.exec(e),!p){c.push(e);break}{c=c.concat(p.slice(1));const A=c.pop();if(!A)break;e=A}}let y=i.getTimezoneOffset();r&&(y=Q(r,y),i=function wt(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function Be(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Q(e,i)-i))}(i,r,!0));let b="";return c.forEach(A=>{const M=function de(n){if(q[n])return q[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ut(It.Eras,se.Abbreviated);break;case"GGGG":e=Ut(It.Eras,se.Wide);break;case"GGGGG":e=Ut(It.Eras,se.Narrow);break;case"y":e=ht(ot.FullYear,1,0,!1,!0);break;case"yy":e=ht(ot.FullYear,2,0,!0,!0);break;case"yyy":e=ht(ot.FullYear,3,0,!1,!0);break;case"yyyy":e=ht(ot.FullYear,4,0,!1,!0);break;case"Y":e=V(1);break;case"YY":e=V(2,!0);break;case"YYY":e=V(3);break;case"YYYY":e=V(4);break;case"M":case"L":e=ht(ot.Month,1,1);break;case"MM":case"LL":e=ht(ot.Month,2,1);break;case"MMM":e=Ut(It.Months,se.Abbreviated);break;case"MMMM":e=Ut(It.Months,se.Wide);break;case"MMMMM":e=Ut(It.Months,se.Narrow);break;case"LLL":e=Ut(It.Months,se.Abbreviated,ye.Standalone);break;case"LLLL":e=Ut(It.Months,se.Wide,ye.Standalone);break;case"LLLLL":e=Ut(It.Months,se.Narrow,ye.Standalone);break;case"w":e=j(1);break;case"ww":e=j(2);break;case"W":e=j(1,!0);break;case"d":e=ht(ot.Date,1);break;case"dd":e=ht(ot.Date,2);break;case"c":case"cc":e=ht(ot.Day,1);break;case"ccc":e=Ut(It.Days,se.Abbreviated,ye.Standalone);break;case"cccc":e=Ut(It.Days,se.Wide,ye.Standalone);break;case"ccccc":e=Ut(It.Days,se.Narrow,ye.Standalone);break;case"cccccc":e=Ut(It.Days,se.Short,ye.Standalone);break;case"E":case"EE":case"EEE":e=Ut(It.Days,se.Abbreviated);break;case"EEEE":e=Ut(It.Days,se.Wide);break;case"EEEEE":e=Ut(It.Days,se.Narrow);break;case"EEEEEE":e=Ut(It.Days,se.Short);break;case"a":case"aa":case"aaa":e=Ut(It.DayPeriods,se.Abbreviated);break;case"aaaa":e=Ut(It.DayPeriods,se.Wide);break;case"aaaaa":e=Ut(It.DayPeriods,se.Narrow);break;case"b":case"bb":case"bbb":e=Ut(It.DayPeriods,se.Abbreviated,ye.Standalone,!0);break;case"bbbb":e=Ut(It.DayPeriods,se.Wide,ye.Standalone,!0);break;case"bbbbb":e=Ut(It.DayPeriods,se.Narrow,ye.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ut(It.DayPeriods,se.Abbreviated,ye.Format,!0);break;case"BBBB":e=Ut(It.DayPeriods,se.Wide,ye.Format,!0);break;case"BBBBB":e=Ut(It.DayPeriods,se.Narrow,ye.Format,!0);break;case"h":e=ht(ot.Hours,1,-12);break;case"hh":e=ht(ot.Hours,2,-12);break;case"H":e=ht(ot.Hours,1);break;case"HH":e=ht(ot.Hours,2);break;case"m":e=ht(ot.Minutes,1);break;case"mm":e=ht(ot.Minutes,2);break;case"s":e=ht(ot.Seconds,1);break;case"ss":e=ht(ot.Seconds,2);break;case"S":e=ht(ot.FractionalSeconds,1);break;case"SS":e=ht(ot.FractionalSeconds,2);break;case"SSS":e=ht(ot.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Te(qt.Short);break;case"ZZZZZ":e=Te(qt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Te(qt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Te(qt.Long);break;default:return null}return q[n]=e,e}(A);b+=M?M(i,t,y):"''"===A?"'":A.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function Gi(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function $t(n,e){const t=function en(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if(Ps[t]=Ps[t]||{},Ps[t][e])return Ps[t][e];let r="";switch(e){case"shortDate":r=sn(n,Ne.Short);break;case"mediumDate":r=sn(n,Ne.Medium);break;case"longDate":r=sn(n,Ne.Long);break;case"fullDate":r=sn(n,Ne.Full);break;case"shortTime":r=ss(n,Ne.Short);break;case"mediumTime":r=ss(n,Ne.Medium);break;case"longTime":r=ss(n,Ne.Long);break;case"fullTime":r=ss(n,Ne.Full);break;case"short":const i=$t(n,"shortTime"),u=$t(n,"shortDate");r=po(tn(n,Ne.Short),[i,u]);break;case"medium":const c=$t(n,"mediumTime"),p=$t(n,"mediumDate");r=po(tn(n,Ne.Medium),[c,p]);break;case"long":const y=$t(n,"longTime"),b=$t(n,"longDate");r=po(tn(n,Ne.Long),[y,b]);break;case"full":const A=$t(n,"fullTime"),M=$t(n,"fullDate");r=po(tn(n,Ne.Full),[A,M])}return r&&(Ps[t][e]=r),r}function po(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Tr(n,e,t="-",r,i){let u="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,u=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),u+c}function ht(n,e,t=0,r=!1,i=!1){return function(u,c){let p=function Sr(n,e){switch(n){case ot.FullYear:return e.getFullYear();case ot.Month:return e.getMonth();case ot.Date:return e.getDate();case ot.Hours:return e.getHours();case ot.Minutes:return e.getMinutes();case ot.Seconds:return e.getSeconds();case ot.FractionalSeconds:return e.getMilliseconds();case ot.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||p>-t)&&(p+=t),n===ot.Hours)0===p&&-12===t&&(p=12);else if(n===ot.FractionalSeconds)return function yr(n,e){return Tr(n,3).substr(0,e)}(p,e);const y=Gt(c,ae.MinusSign);return Tr(p,e,y,r,i)}}function Ut(n,e,t=ye.Format,r=!1){return function(i,u){return function Qe(n,e,t,r,i,u){switch(t){case It.Months:return function Et(n,e,t){const r=(0,h.cg1)(n),u=ir([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return ir(u,t)}(e,i,r)[n.getMonth()];case It.Days:return function lt(n,e,t){const r=(0,h.cg1)(n),u=ir([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return ir(u,t)}(e,i,r)[n.getDay()];case It.DayPeriods:const c=n.getHours(),p=n.getMinutes();if(u){const b=function as(n){const e=(0,h.cg1)(n);return os(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Zn(r):[Zn(r[0]),Zn(r[1])])}(e),A=function dt(n,e,t){const r=(0,h.cg1)(n);os(r);const u=ir([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return ir(u,t)||[]}(e,i,r),M=b.findIndex(F=>{if(Array.isArray(F)){const[U,G]=F,ne=c>=U.hours&&p>=U.minutes,we=c<G.hours||c===G.hours&&p<G.minutes;if(U.hours<G.hours){if(ne&&we)return!0}else if(ne||we)return!0}else if(F.hours===c&&F.minutes===p)return!0;return!1});if(-1!==M)return A[M]}return function kn(n,e,t){const r=(0,h.cg1)(n),u=ir([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return ir(u,t)}(e,i,r)[c<12?0:1];case It.Eras:return function cn(n,e){return ir((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,u,n,e,t,r)}}function Te(n){return function(e,t,r){const i=-1*r,u=Gt(t,ae.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case qt.Short:return(i>=0?"+":"")+Tr(c,2,u)+Tr(Math.abs(i%60),2,u);case qt.ShortGMT:return"GMT"+(i>=0?"+":"")+Tr(c,1,u);case qt.Long:return"GMT"+(i>=0?"+":"")+Tr(c,2,u)+":"+Tr(Math.abs(i%60),2,u);case qt.Extended:return 0===r?"Z":(i>=0?"+":"")+Tr(c,2,u)+":"+Tr(Math.abs(i%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Vt(n){return Gi(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function j(n,e=!1){return function(t,r){let i;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+u)/7)}else{const u=Vt(t),c=function jt(n){const e=Gi(n,0,1).getDay();return Gi(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),p=u.getTime()-c.getTime();i=1+Math.round(p/6048e5)}return Tr(i,n,Gt(r,ae.MinusSign))}}function V(n,e=!1){return function(t,r){return Tr(Vt(t).getFullYear(),n,Gt(r,ae.MinusSign),e)}}const q={};function Q(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function zt(n){return n instanceof Date&&!isNaN(n.valueOf())}let zi=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Vs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Vs(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),ls(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ls(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ls(n,e){n.context.$implicit=e.item}let Mr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new an,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class an{constructor(){this.$implicit=null,this.ngIf=null}}function bu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}function Gn(n,e){return new h.vHH(2100,"")}class ld{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class ng{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const ds=new ng,rg=new ld;let hs=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return ds;if((0,h.F4k)(t))return rg;throw Gn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1}),n})();const sg=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let qh=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,u){var c;if(null==t||""===t||t!=t)return null;try{return mr(t,r,u||this.locale,null!==(c=null!=i?i:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(p){throw Gn()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(sg,24))},n.\u0275pipe=h.Yjl({name:"date",type:n,pure:!0}),n})(),Fn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const $s="browser";function xr(n){return n===$s}function vr(n){return"server"===n}let xu=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Ru((0,h.LFG)(re),window)}),n})();class Ru{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ba(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=fs(this.window.history)||fs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function fs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Hs extends class ea extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Y||(Y=n)}(new Hs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function pd(){return un=un||document.querySelector("base"),un?un.getAttribute("href"):null}();return null==t?null:function vo(n){_o=_o||document.createElement("a"),_o.setAttribute("href",n);const e=_o.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){un=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Qo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let _o,un=null;const Rr=new h.OlP("TRANSITION_ID"),Ua=[{provide:h.ip1,useFactory:function Ln(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Rr,re,h.zs3],multi:!0}];class Ai{static init(){(0,h.VLi)(new Ai)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Nr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Gs=new h.OlP("EventManagerPlugins");let ps=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gs),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Nu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ri=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),qs=(()=>{class n extends ri{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(zs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(zs))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function zs(n){k().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ou=/%COMP%/g;function De(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?De(n,i,t):(i=i.replace(Ou,n),t.push(i))}return t}function Bt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let En=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ta(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ll(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Vl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=De(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ps),h.LFG(qs),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ta{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=pt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=pt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Bt(r)):this.eventManager.addEventListener(e,t,Bt(r))}}class Ll extends ta{constructor(e,t,r,i){super(e),this.component=r;const u=De(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function kl(n){return"_ngcontent-%COMP%".replace(Ou,n)}(i+"-"+r.id),this.hostAttr=function Pl(n){return"_nghost-%COMP%".replace(Ou,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Vl extends ta{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=De(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let gd=(()=>{class n extends Nu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Bl=["alt","control","meta","shift"],Ws={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Er={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Vu=(()=>{class n extends Nu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(Bl.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function Ks(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Er.hasOwnProperty(e)&&(e=Er[e]))}return Ws[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Bl.forEach(u=>{u!=i&&pi[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const jl=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:$s},{provide:h.g9A,useValue:function Mi(){Hs.makeCurrent(),Ai.init()},multi:!0},{provide:re,useFactory:function Bu(){return(0,h.RDi)(document),document},deps:[]}]),$a=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Ul(){return new h.qLn},deps:[]},{provide:Gs,useClass:gd,multi:!0,deps:[re,h.R0b,h.Lbi]},{provide:Gs,useClass:Vu,multi:!0,deps:[re]},{provide:En,useClass:En,deps:[ps,qs,h.AFp]},{provide:h.FYo,useExisting:En},{provide:ri,useExisting:qs},{provide:qs,useClass:qs,deps:[re]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:ps,useClass:ps,deps:[Gs,h.R0b]},{provide:class yn{},useClass:Nr,deps:[]}];let ra=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Rr,useExisting:h.AFp},Ua]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:$a,imports:[Fn,h.hGG]}),n})();"undefined"!=typeof window&&window;var Vn=O(8996),Bn=O(7669);function gt(...n){const e=(0,Bn.yG)(n);return(0,Vn.D)(n,e)}var ar=O(7579);class si extends ar.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var zr=O(8306);const{isArray:sa}=Array,{getPrototypeOf:Dd,prototype:mn,keys:Yh}=Object;function xi(n){if(1===n.length){const e=n[0];if(sa(e))return{args:e,keys:null};if(function $u(n){return n&&"object"==typeof n&&Dd(n)===mn}(e)){const t=Yh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var gi=O(4671),kt=O(4004);const{isArray:Cd}=Array;function Yl(n){return(0,kt.U)(e=>function Zl(n,e){return Cd(e)?n(...e):n(e)}(n,e))}function Co(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var zn=O(5403),ys=O(9672);function Qs(n,e,t){n?(0,ys.f)(t,n,e):e()}var yi=O(576);function Wi(n,e){const t=(0,yi.m)(n)?n:()=>n,r=i=>i.error(t());return new zr.y(e?i=>e.schedule(r,0,i):r)}const Js=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ki=O(8189);function Id(...n){return function Jl(){return(0,Ki.J)(1)}()((0,Vn.D)(n,(0,Bn.yG)(n)))}var Io=O(8421);function Ri(n){return new zr.y(e=>{(0,Io.Xf)(n()).subscribe(e)})}var aa=O(515),ua=O(727),Wr=O(4482);function Ni(){return(0,Wr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,zn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Td extends zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Wr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ua.w0;const t=this.getSubject();e.add(this.source.subscribe((0,zn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ua.w0.EMPTY)}return e}refCount(){return Ni()(this)}}function Un(n,e){return(0,Wr.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,zn.x)(r,y=>{null==i||i.unsubscribe();let b=0;const A=u++;(0,Io.Xf)(n(y,A)).subscribe(i=(0,zn.x)(r,M=>r.next(e?e(y,M,A,b++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var To=O(5698);function Oi(...n){const e=(0,Bn.yG)(n);return(0,Wr.e)((t,r)=>{(e?Id(n,t,e):Id(n,t)).subscribe(r)})}function la(n,e,t,r,i){return(u,c)=>{let p=t,y=e,b=0;u.subscribe((0,zn.x)(c,A=>{const M=b++;y=p?n(y,A,M):(p=!0,A),r&&c.next(y)},i&&(()=>{p&&c.next(y),c.complete()})))}}function kr(n,e){return(0,Wr.e)(la(n,e,arguments.length>=2,!0))}function Zi(n,e){return(0,Wr.e)((t,r)=>{let i=0;t.subscribe((0,zn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function Yi(n){return(0,Wr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,zn.x)(t,void 0,void 0,c=>{u=(0,Io.Xf)(n(c,Yi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Dn=O(5577);function Xs(n,e){return(0,yi.m)(e)?(0,Dn.z)(n,e,1):(0,Dn.z)(n,1)}function Sd(n){return n<=0?()=>aa.E:(0,Wr.e)((e,t)=>{let r=[];e.subscribe((0,zn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Mn(n=lg){return(0,Wr.e)((e,t)=>{let r=!1;e.subscribe((0,zn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function lg(){return new Js}function cg(n){return(0,Wr.e)((e,t)=>{let r=!1;e.subscribe((0,zn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function eo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zi((i,u)=>n(i,u,r)):gi.y,(0,To.q)(1),t?cg(e):Mn(()=>new Js))}var Kr=O(8505);class to{constructor(e,t){this.id=e,this.url=t}}class _s extends to{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hu extends to{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cn extends to{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xl extends to{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ca extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fg extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ec extends to{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pr extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _i extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tc{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vs{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ki{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ga{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Lt="primary";class ic{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Qn(n){return new ic(n)}const sc="ngNavigationCancelingError";function no(n){const e=Error("NavigationCancelingError: "+n);return e[sc]=!0,e}function So(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ji(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!qu(n[i],e[i]))return!1;return!0}function qu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Xi(n){return Array.prototype.concat.apply([],n)}function Md(n){return n.length>0?n[n.length-1]:null}function Jn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function vi(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Vn.D)(Promise.resolve(n)):gt(n)}const Ao={exact:function I(n,e,t){if(!Pt(n.segments,e.segments)||!ee(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:L},da={exact:function C(n,e){return Ji(n,e)},subset:function R(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qu(n[t],e[t]))},ignored:()=>!0};function zu(n,e,t){return Ao[t.paths](n.root,e.root,t.matrixParams)&&da[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function L(n,e,t){return Z(n,e,e.segments,t)}function Z(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Pt(i,t)||e.hasChildren()||!ee(i,t,r))}if(n.segments.length===t.length){if(!Pt(n.segments,t)||!ee(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!L(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Pt(n.segments,i)&&ee(n.segments,i,r)&&n.children[Lt])&&Z(n.children[Lt],e,u,r)}}function ee(n,e,t){return e.every((r,i)=>da[t](n[i].parameters,r.parameters))}class Me{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return ha.serialize(this)}}class xe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Jn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mo(this)}}class Je{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Qn(this.parameters)),this._parameterMap}toString(){return qa(this)}}function Pt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Wn{}class xn{parse(e){const t=new Rd(e);return new Me(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Zr(e.root,!0)}`,r=function Ry(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Pi(t)}=${Pi(i)}`).join("&"):`${Pi(t)}=${Pi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function xo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ha=new xn;function Mo(n){return n.segments.map(e=>qa(e)).join("/")}function Zr(n,e){if(!n.hasChildren())return Mo(n);if(e){const t=n.children[Lt]?Zr(n.children[Lt],!1):"",r=[];return Jn(n.children,(i,u)=>{u!==Lt&&r.push(`${u}:${Zr(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Mt(n,e){let t=[];return Jn(n.children,(r,i)=>{i===Lt&&(t=t.concat(e(r,i)))}),Jn(n.children,(r,i)=>{i!==Lt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Lt?[Zr(n.children[Lt],!1)]:[`${i}:${Zr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${Mo(n)}/${t[0]}`:`${Mo(n)}/(${t.join("//")})`}}function Ei(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pi(n){return Ei(n).replace(/%3B/gi,";")}function xd(n){return Ei(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ac(n){return decodeURIComponent(n)}function uc(n){return ac(n.replace(/\+/g,"%20"))}function qa(n){return`${xd(n.path)}${function pg(n){return Object.keys(n).map(e=>`;${xd(e)}=${xd(n[e])}`).join("")}(n.parameters)}`}const Ny=/^[^\/()?;=#]+/;function Es(n){const e=n.match(Ny);return e?e[0]:""}const lc=/^[^=?&#]+/,ky=/^[^&#]+/;class Rd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new xe(e,t)),r}parseSegment(){const e=Es(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Je(ac(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Es(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Es(this.remaining);i&&(r=i,this.capture(r))}e[ac(t)]=ac(r)}parseQueryParam(e){const t=function Oy(n){const e=n.match(lc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function gg(n){const e=n.match(ky);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=uc(t),u=uc(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Es(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Lt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Lt]:new xe([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Py{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Qh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Qh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Jh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Jh(e,this._root).map(t=>t.value)}}function Qh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Qh(n,t);if(r)return r}return null}function Jh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Jh(n,t);if(r.length)return r.unshift(e),r}return[]}class Ro{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function No(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Nd extends Py{constructor(e,t){super(e),this.snapshot=t,kd(this,e)}toString(){return this.snapshot.toString()}}function za(n,e){const t=function Fy(n,e){const c=new Wu([],{},{},"",{},Lt,e,null,n.root,-1,{});return new Xh("",new Ro(c,[]))}(n,e),r=new si([new Je("",{})]),i=new si({}),u=new si({}),c=new si({}),p=new si(""),y=new fa(r,i,c,p,u,Lt,e,t.root);return y.snapshot=t.root,new Nd(new Ro(y,[]),t)}class fa{constructor(e,t,r,i,u,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,kt.U)(e=>Qn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,kt.U)(e=>Qn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ly(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Od(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Wu{constructor(e,t,r,i,u,c,p,y,b,A,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Xh extends Py{constructor(e,t){super(t),this.url=e,kd(this,t)}toString(){return Pd(this._root)}}function kd(n,e){e.value._routerState=n,e.children.forEach(t=>kd(n,t))}function Pd(n){const e=n.children.length>0?` { ${n.children.map(Pd).join(", ")} } `:"";return`${n.value}${e}`}function Fd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ji(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ji(e.params,t.params)||n.params.next(t.params),function Gu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ji(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ji(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ef(n,e){const t=Ji(n.params,e.params)&&function Tt(n,e){return Pt(n,e)&&n.every((t,r)=>Ji(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ef(n.parent,e.parent))}function cc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function tf(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cc(n,r,i);return cc(n,r)})}(n,e,t);return new Ro(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>cc(n,p)),c}}const r=function By(n){return new fa(new si(n.url),new si(n.params),new si(n.queryParams),new si(n.fragment),new si(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>cc(n,u));return new Ro(r,i)}}function pa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ku(n){return"object"==typeof n&&null!=n&&n.outlets}function mg(n,e,t,r,i){let u={};if(r&&Jn(r,(p,y)=>{u[y]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),n===e)return new Me(t,u,i);const c=nf(n,e,t);return new Me(c,u,i)}function nf(n,e,t){const r={};return Jn(n.children,(i,u)=>{r[u]=i===e?t:nf(i,e,t)}),new xe(n.segments,r)}class Uy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&pa(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Ku);if(i&&i!==Md(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Gy(n,e,t){if(n||(n=new xe([],{})),0===n.segments.length&&n.hasChildren())return io(n,e,t);const r=function vE(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(Ku(p))break;const y=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!Fi(y,b,c))return u;r+=2}else{if(!Fi(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new xe(n.segments.slice(0,r.pathIndex),{});return u.children[Lt]=new xe(n.segments.slice(r.pathIndex),n.children),io(u,0,i)}return r.match&&0===i.length?new xe(n.segments,{}):r.match&&!n.hasChildren()?sf(n,e,t):r.match?io(n,0,i):sf(n,e,t)}function io(n,e,t){if(0===t.length)return new xe(n.segments,{});{const r=function Hy(n){return Ku(n[0])?n[0].outlets:{[Lt]:n}}(t),i={};return Jn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Gy(n.children[c],e,u))}),Jn(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new xe(n.segments,i)}}function sf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Ku(u)){const y=Zu(u.outlets);return new xe(r,y)}if(0===i&&pa(t[0])){r.push(new Je(n.segments[e].path,of(t[0]))),i++;continue}const c=Ku(u)?u.outlets[Lt]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&pa(p)?(r.push(new Je(c,of(p))),i+=2):(r.push(new Je(c,{})),i++)}return new xe(r,{})}function Zu(n){const e={};return Jn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=sf(new xe([],{}),0,t))}),e}function of(n){const e={};return Jn(n,(t,r)=>e[r]=`${t}`),e}function Fi(n,e,t){return n==t.path&&Ji(e,t.parameters)}class _g{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=No(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Jn(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=No(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=No(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=No(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new nc(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Qi(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(Fd(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Fd(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function Ld(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Vd{constructor(e,t){this.routes=e,this.module=t}}function Wa(n){return"function"==typeof n}function Yu(n){return n instanceof Me}const hc=Symbol("INITIAL_VALUE");function ga(){return Un(n=>function oa(...n){const e=(0,Bn.yG)(n),t=(0,Bn.jO)(n),{args:r,keys:i}=xi(n);if(0===r.length)return(0,Vn.D)([],e);const u=new zr.y(function mi(n,e,t=gi.y){return r=>{Qs(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let y=0;y<i;y++)Qs(e,()=>{const b=(0,Vn.D)(n[y],e);let A=!1;b.subscribe((0,zn.x)(r,M=>{u[y]=M,A||(A=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Co(i,c):gi.y));return t?u.pipe(Yl(t)):u}(n.map(e=>e.pipe((0,To.q)(1),Oi(hc)))).pipe(kr((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==hc?i:(u===hc&&(r=!0),r||!1!==u&&c!==t.length-1&&!Yu(u)?i:u),e)},hc),Zi(e=>e!==hc),(0,kt.U)(e=>Yu(e)?e:!0===e),(0,To.q)(1)))}class qy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fc,this.attachRef=null}}class fc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new qy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let pc=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=u||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new cf(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(fc),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class cf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===fa?this.route:e===fc?this.childContexts:this.parent.get(e,t)}}let df=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[pc],encapsulation:2}),n})();function gc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Bd(r,hf(e,r))}}function Bd(n,e){n.children&&gc(n.children,e)}function hf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ff(n){const e=n.children&&n.children.map(ff),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=df),t}function rn(n){return n.outlet||Lt}function pf(n,e){const t=n.filter(r=>rn(r)===e);return t.push(...n.filter(r=>rn(r)!==e)),t}const Eg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Qu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Eg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||So)(t,n,e);if(!u)return Object.assign({},Eg);const c={};Jn(u.posParams,(y,b)=>{c[b]=y.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function mc(n,e,t,r,i="corrected"){if(t.length>0&&function Wy(n,e,t){return t.some(r=>jd(n,e,r)&&rn(r)!==Lt)}(n,t,r)){const c=new xe(e,function Ud(n,e,t,r){const i={};i[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&rn(u)!==Lt){const c=new xe([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[rn(u)]=c}return i}(n,e,r,new xe(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function wg(n,e,t){return t.some(r=>jd(n,e,r))}(n,t,r)){const c=new xe(n.segments,function zy(n,e,t,r,i,u){const c={};for(const p of r)if(jd(n,t,p)&&!i[rn(p)]){const y=new xe([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[rn(p)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new xe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function jd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ky(n,e,t,r){return!!(rn(n)===r||r!==Lt&&jd(e,t,n))&&("**"===n.path||Qu(e,n,t).matched)}function Zy(n,e,t){return 0===e.length&&!n.children[t]}class ma{constructor(e){this.segmentGroup=e||null}}class Fr{constructor(e){this.urlTree=e}}function Oo(n){return Wi(new ma(n))}function yc(n){return Wi(new Fr(n))}class mf{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=mc(this.urlTree.root,[],[],this.config).segmentGroup,t=new xe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Lt).pipe((0,kt.U)(u=>this.createUrlTree(Za(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Yi(u=>{if(u instanceof Fr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ma?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Lt).pipe((0,kt.U)(i=>this.createUrlTree(Za(i),e.queryParams,e.fragment))).pipe(Yi(i=>{throw i instanceof ma?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new xe([],{[Lt]:e}):e;return new Me(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,kt.U)(u=>new xe([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Vn.D)(i).pipe(Xs(u=>{const c=r.children[u],p=pf(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,kt.U)(y=>({segment:y,outlet:u})))}),kr((u,c)=>(u[c.outlet]=c.segment,u),{}),function dg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zi((i,u)=>n(i,u,r)):gi.y,Sd(1),t?cg(e):Mn(()=>new Js))}())}expandSegment(e,t,r,i,u,c){return(0,Vn.D)(r).pipe(Xs(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(Yi(b=>{if(b instanceof ma)return gt(null);throw b}))),eo(p=>!!p),Yi((p,y)=>{if(p instanceof Js||"EmptyError"===p.name)return Zy(t,i,u)?gt(new xe([],{})):Oo(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return Ky(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Oo(t):Oo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?yc(u):this.lineralizeSegments(r,u).pipe((0,Dn.z)(c=>{const p=new xe(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:y,remainingSegments:b,positionalParamSegments:A}=Qu(t,i,u);if(!p)return Oo(t);const M=this.applyRedirectCommands(y,i.redirectTo,A);return i.redirectTo.startsWith("/")?yc(M):this.lineralizeSegments(i,M).pipe((0,Dn.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?gt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,kt.U)(M=>(r._loadedConfig=M,new xe(i,{})))):gt(new xe(i,{}));const{matched:c,consumedSegments:p,remainingSegments:y}=Qu(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,Dn.z)(A=>{const M=A.module,F=A.routes,{segmentGroup:U,slicedSegments:G}=mc(t,p,y,F),ne=new xe(U.segments,U.children);if(0===G.length&&ne.hasChildren())return this.expandChildren(M,F,ne).pipe((0,kt.U)(Ke=>new xe(p,Ke)));if(0===F.length&&0===G.length)return gt(new xe(p,{}));const we=rn(r)===u;return this.expandSegment(M,ne,F,G,we?Lt:u,!0).pipe((0,kt.U)(Le=>new xe(p.concat(Le.segments),Le.children)))})):Oo(t)}getChildConfig(e,t,r){return t.children?gt(new Vd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?gt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Dn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,kt.U)(u=>(t._loadedConfig=u,u))):function Yr(n){return Wi(no(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):gt(new Vd([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?gt(i.map(c=>{const p=e.get(c);let y;if(function af(n){return n&&Wa(n.canLoad)}(p))y=p.canLoad(t,r);else{if(!Wa(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}return vi(y)})).pipe(ga(),(0,Kr.b)(c=>{if(!Yu(c))return;const p=no(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,kt.U)(c=>!0===c)):gt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return gt(r);if(i.numberOfChildren>1||!i.children[Lt])return Wi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Me(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Jn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Jn(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,i)}),new xe(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Za(n){const e={};for(const r of Object.keys(n.children)){const u=Za(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Li(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new xe(n.segments.concat(e.segments),e.children)}return n}(new xe(n.segments,e))}class bg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ya{constructor(e,t){this.component=e,this.route=t}}function _f(n,e,t){const r=n._root;return wi(r,e?e._root:null,t,[r.value])}function _c(n,e,t){const r=function Yy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function wi(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=No(e);return n.children.forEach(c=>{(function Cg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function Qy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Pt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Pt(n.url,e.url)||!Ji(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ef(n,e)||!Ji(n.queryParams,e.queryParams);default:return!ef(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new bg(r)):(u.data=c.data,u._resolvedData=c._resolvedData),wi(n,e,u.component?p?p.children:null:t,r,i),y&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new Ya(p.outlet.component,c))}else c&&Qa(e,p,i),i.canActivateChecks.push(new bg(r)),wi(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Jn(u,(c,p)=>Qa(c,t.getContext(p),i)),i}function Qa(n,e,t){const r=No(n),i=n.value;Jn(r,(u,c)=>{Qa(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Ya(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class wf{}function bf(n){return new zr.y(e=>e.error(n))}class Df{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=mc(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Lt);if(null===t)return null;const r=new Wu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ro(r,t),u=new Xh(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Ly(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=pf(e,u),y=this.processSegmentGroup(p,c,u);if(null===y)return null;r.push(...y)}const i=Sg(r);return function t_(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return Zy(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Ky(e,t,r,i))return null;let u,c=[],p=[];if("**"===e.path){const U=r.length>0?Md(r).parameters:{};u=new Wu(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),rn(e),e.component,e,f(t),m(t)+r.length,T(e))}else{const U=Qu(t,e,r);if(!U.matched)return null;c=U.consumedSegments,p=U.remainingSegments,u=new Wu(c,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),rn(e),e.component,e,f(t),m(t)+c.length,T(e))}const y=function n_(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:A}=mc(t,c,p,y.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===A.length&&b.hasChildren()){const U=this.processChildren(y,b);return null===U?null:[new Ro(u,U)]}if(0===y.length&&0===A.length)return[new Ro(u,[])];const M=rn(e)===i,F=this.processSegment(y,b,A,M?Lt:i);return null===F?null:[new Ro(u,F)]}}function Tg(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Sg(n){const e=[],t=new Set;for(const r of n){if(!Tg(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Sg(r.children);e.push(new Ro(r.value,i))}return e.filter(r=>!t.has(r))}function f(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function m(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function E(n){return n.data||{}}function T(n){return n.resolve||{}}function tt(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function at(n){return Un(e=>{const t=n(e);return t?(0,Vn.D)(t).pipe((0,kt.U)(()=>e)):gt(e)})}class Ec extends class ts{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ju=new h.OlP("ROUTES");class Xu{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,kt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Vd(Xi(c.injector.get(Ju,void 0,h.XFs.Self|h.XFs.Optional)).map(ff),c)}),Yi(u=>{throw t._loader$=void 0,u}));return t._loader$=new Td(i,()=>new ar.x).pipe(Ni()),t._loader$}loadModuleFactory(e){return vi(e()).pipe((0,Dn.z)(t=>t instanceof h.YKP?gt(t):(0,Vn.D)(this.compiler.compileModuleAsync(t))))}}class r_{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ya(n){throw n}function $d(n,e,t){return e.parse("/")}function Hd(n,e){return gt(null)}const If={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qr=(()=>{class n{constructor(t,r,i,u,c,p,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ar.x,this.errorHandler=ya,this.malformedUriErrorHandler=$d,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hd,afterPreactivation:Hd},this.urlHandlingStrategy=new r_,this.routeReuseStrategy=new Ec,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(h.h0i),this.console=c.get(h.c2e);const M=c.get(h.R0b);this.isNgZoneEnabled=M instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function oc(){return new Me(new xe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Xu(c,p,F=>this.triggerEvent(new tc(F)),F=>this.triggerEvent(new vs(F))),this.routerState=za(this.currentUrlTree,this.rootComponentType),this.transitions=new si({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Zi(i=>0!==i.id),(0,kt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Un(i=>{let u=!1,c=!1;return gt(i).pipe((0,Kr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Un(p=>{const y=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Ag(p.source)&&(this.browserUrlTree=p.extractedUrl),gt(p).pipe(Un(M=>{const F=this.transitions.getValue();return r.next(new _s(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?aa.E:Promise.resolve(M)}),function yf(n,e,t,r){return Un(i=>function Ka(n,e,t,r,i){return new mf(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,kt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Kr.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function N(n,e,t,r,i){return(0,Dn.z)(u=>function e_(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new Df(n,e,t,r,i,u).recognize();return null===c?bf(new wf):gt(c)}catch(c){return bf(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,kt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Kr.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(U,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new ca(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:U,source:G,restoredState:ne,extras:we}=p,Ze=new _s(F,this.serializeUrl(U),G,ne);r.next(Ze);const Le=za(U,this.rootComponentType).snapshot;return gt(Object.assign(Object.assign({},p),{targetSnapshot:Le,urlAfterRedirects:U,extras:Object.assign(Object.assign({},we),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),aa.E}),at(p=>{const{targetSnapshot:y,id:b,extractedUrl:A,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:U}}=p;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:A,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!U})}),(0,Kr.b)(p=>{const y=new fg(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,kt.U)(p=>Object.assign(Object.assign({},p),{guards:_f(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function Jy(n,e){return(0,Dn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?gt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Ig(n,e,t,r){return(0,Vn.D)(n).pipe((0,Dn.z)(i=>function vc(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?gt(u.map(p=>{const y=_c(p,e,i);let b;if(function EE(n){return n&&Wa(n.canDeactivate)}(y))b=vi(y.canDeactivate(n,e,t,r));else{if(!Wa(y))throw new Error("Invalid CanDeactivate guard");b=vi(y(n,e,t,r))}return b.pipe(eo())})).pipe(ga()):gt(!0)}(i.component,i.route,t,e,r)),eo(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Dn.z)(p=>p&&function vg(n){return"boolean"==typeof n}(p)?function Lr(n,e,t,r){return(0,Vn.D)(e).pipe(Xs(i=>Id(function Ef(n,e){return null!==n&&e&&e(new ki(n)),gt(!0)}(i.route.parent,r),function vf(n,e){return null!==n&&e&&e(new Ga(n)),gt(!0)}(i.route,r),function ko(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function Dg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Ri(()=>gt(c.guards.map(y=>{const b=_c(y,c.node,t);let A;if(function lf(n){return n&&Wa(n.canActivateChild)}(b))A=vi(b.canActivateChild(r,n));else{if(!Wa(b))throw new Error("Invalid CanActivateChild guard");A=vi(b(r,n))}return A.pipe(eo())})).pipe(ga())));return gt(u).pipe(ga())}(n,i.path,t),function Xy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const i=r.map(u=>Ri(()=>{const c=_c(u,e,t);let p;if(function uf(n){return n&&Wa(n.canActivate)}(c))p=vi(c.canActivate(e,n));else{if(!Wa(c))throw new Error("Invalid CanActivate guard");p=vi(c(e,n))}return p.pipe(eo())}));return gt(i).pipe(ga())}(n,i.route,t))),eo(i=>!0!==i,!0))}(r,u,n,e):gt(p)),(0,kt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Kr.b)(p=>{if(Yu(p.guardsResult)){const b=no(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const y=new ec(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),Zi(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),at(p=>{if(p.guards.canActivateChecks.length)return gt(p).pipe((0,Kr.b)(y=>{const b=new Pr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),Un(y=>{let b=!1;return gt(y).pipe(function z(n,e){return(0,Dn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return gt(t);let u=0;return(0,Vn.D)(i).pipe(Xs(c=>function oe(n,e,t,r){return function Ue(n,e,t,r){const i=tt(n);if(0===i.length)return gt({});const u={};return(0,Vn.D)(i).pipe((0,Dn.z)(c=>function bt(n,e,t,r){const i=_c(n,e,r);return vi(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Kr.b)(p=>{u[c]=p}))),Sd(1),(0,Dn.z)(()=>tt(u).length===i.length?gt(u):aa.E))}(n._resolve,n,e,r).pipe((0,kt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Ly(n,t).resolve),null)))}(c.route,r,n,e)),(0,Kr.b)(()=>u++),Sd(1),(0,Dn.z)(c=>u===i.length?gt(t):aa.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Kr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,Kr.b)(y=>{const b=new _i(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),at(p=>{const{targetSnapshot:y,id:b,extractedUrl:A,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:U}}=p;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:A,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!U})}),(0,kt.U)(p=>{const y=function Vy(n,e,t){const r=cc(n,e._root,t?t._root:void 0);return new Nd(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,Kr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,kt.U)(r=>(new _g(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Kr.b)({next(){u=!0},complete(){u=!0}}),function hg(n){return(0,Wr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),Yi(p=>{if(c=!0,function Ad(n){return n&&n[sc]}(p)){const y=Yu(p.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const b=new Cn(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(b),y?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ag(i.source)};this.scheduleNavigation(A,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new Xl(i.id,this.serializeUrl(i.extractedUrl),p);r.next(y);try{i.resolve(this.errorHandler(p))}catch(b){i.reject(b)}}return aa.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){gc(t),this.config=t.map(ff),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,b=i||this.routerState.root,A=y?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function ro(n,e,t,r,i){if(0===t.length)return mg(e.root,e.root,e.root,r,i);const u=function jy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Uy(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Jn(u.outlets,(y,b)=>{p[b]="string"==typeof y?y.split("/"):y}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new Uy(t,e,r)}(t);if(u.toRoot())return mg(e.root,e.root,new xe([],{}),r,i);const c=function yg(n,e,t){if(n.isAbsolute)return new rf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new rf(u,u===e.root,0)}const r=pa(n.commands[0])?0:1;return function $y(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new rf(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?io(c.segmentGroup,c.index,u.commands):Gy(c.segmentGroup,c.index,u.commands);return mg(e.root,c.segmentGroup,p,r,i)}(b,this.currentUrlTree,t,M,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Yu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Tf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},If):!1===r?Object.assign({},Gd):r,Yu(t))return zu(this.currentUrlTree,t,i);const u=this.parseUrl(t);return zu(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Hu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var p,y;if(this.disposed)return Promise.resolve(!1);let b,A,M;c?(b=c.resolve,A=c.reject,M=c.promise):M=new Promise((G,ne)=>{b=G,A=ne});const F=++this.navigationId;let U;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),U=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):U=0,this.setTransition({id:F,targetPageId:U,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:A,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(G=>Promise.reject(G))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Cn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ag(n){return"imperative"!==n}class a_{}class bE{preload(e,t){return gt(null)}}let DE=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new Xu(i,r,y=>t.triggerEvent(new tc(y)),y=>t.triggerEvent(new vs(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(Zi(t=>t instanceof Hu),Xs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Vn.D)(i).pipe((0,Ki.J)(),(0,kt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?gt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Dn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Qr),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(a_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Mg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _s?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof rc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new rc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ws=new h.OlP("ROUTER_CONFIGURATION"),l_=new h.OlP("ROUTER_FORROOT_GUARD"),CE=[_e,{provide:Wn,useClass:xn},{provide:Qr,useFactory:function d_(n,e,t,r,i,u,c={},p,y){const b=new Qr(null,n,e,t,r,i,Xi(u));return p&&(b.urlHandlingStrategy=p),y&&(b.routeReuseStrategy=y),function SE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(A=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(F=console.groupEnd)||void 0===F||F.call(console)}),b},deps:[Wn,fc,_e,h.zs3,h.Sil,Ju,ws,[class Cf{},new h.FiY],[class Rn{},new h.FiY]]},fc,{provide:fa,useFactory:function xg(n){return n.routerState.root},deps:[Qr]},DE,bE,class u_{preload(e,t){return t().pipe(Yi(()=>gt(null)))}},{provide:ws,useValue:{enableTracing:!1}}];function MC(){return new h.PXZ("Router",Qr)}let _a=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[CE,c_(t),{provide:l_,useFactory:TE,deps:[[Qr,new h.FiY,new h.tp0]]},{provide:ws,useValue:r||{}},{provide:pe,useFactory:IE,deps:[fe,[new h.tBr(nt),new h.FiY],ws]},{provide:Mg,useFactory:xC,deps:[Qr,xu,ws]},{provide:a_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:bE},{provide:h.PXZ,multi:!0,useFactory:MC},[zd,{provide:h.ip1,multi:!0,useFactory:AE,deps:[zd]},{provide:f_,useFactory:h_,deps:[zd]},{provide:h.tb,multi:!0,useExisting:f_}]]}}static forChild(t){return{ngModule:n,providers:[c_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(l_,8),h.LFG(Qr,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function xC(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Mg(n,e,t)}function IE(n,e,t={}){return t.useHash?new Ie(n,e):new Ye(n,e)}function TE(n){return"guarded"}function c_(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:Ju,multi:!0,useValue:n}]}let zd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ar.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),u=this.injector.get(Qr),c=this.injector.get(ws);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?gt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ws),i=this.injector.get(DE),u=this.injector.get(Mg),c=this.injector.get(Qr),p=this.injector.get(h.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function AE(n){return n.appInitializer.bind(n)}function h_(n){return n.bootstrapListener.bind(n)}const f_=new h.OlP("Router Initializer"),g_=new h.OlP("GETS_ALL_TASK_DTO");function ME(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",7)(1,"div")(2,"button",8),h.NdJ("click",function(){const u=h.CHM(t).ngIf;return h.oxw().goHome(u)}),h._uU(3," Add task "),h.qZA()()()}}let RC=(()=>{class n{constructor(t,r){this._getsAllTaskDto=t,this.router=r,this.task$=this._getsAllTaskDto.getAll()}goHome(t){this.router.navigate(t.length<1?["/firstTask"]:["/addTask"])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(g_),h.Y36(Qr))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-home"]],decls:10,vars:3,consts:[[1,"container-fluid"],[1,"row","justify-content-md-center"],[1,"col-md-auto"],[1,"mt-5","fs-2","fw-bold"],[1,"fs-5","text-center"],["class","mt-4 d-grid gap-2 col-2 mx-auto",4,"ngIf"],[1,"col","col-lg-2"],[1,"mt-4","d-grid","gap-2","col-2","mx-auto"],["type","button",1,"btn","btn-danger",2,"background-color","#d40909bc",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),h._uU(4,"Organise your time with this simple app"),h.qZA(),h.TgZ(5,"p",4),h._uU(6," All your tasks that are due today will show up here "),h.qZA(),h.YNc(7,ME,4,0,"div",5),h.ALo(8,"async"),h.qZA()(),h._UZ(9,"div",6),h.qZA()),2&t&&(h.xp6(7),h.Q6J("ngIf",h.lcZ(8,1,r.task$)))},directives:[Mr],pipes:[hs],encapsulation:2,changeDetection:0}),n})();const xE=new h.OlP("GETS_ALL_IMAGE_DTO"),RE=function(n){return[n]};function m_(n,e){if(1&n&&(h.TgZ(0,"div",4),h._UZ(1,"img",5),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("src",h.VKq(1,RE,t.imageUrl),h.LSH)}}let Ng=(()=>{class n{constructor(t){this._getsAllImageDto=t,this.image$=this._getsAllImageDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(xE))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-show-images"]],decls:5,vars:3,consts:[[1,"container","py-5"],[1,"row"],[1,"card-group"],["class","card ms-5",4,"ngFor","ngForOf"],[1,"card","ms-5"],["alt","...",1,"card-img-top",3,"src"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h.YNc(3,m_,2,3,"div",3),h.ALo(4,"async"),h.qZA()()()),2&t&&(h.xp6(3),h.Q6J("ngForOf",h.lcZ(4,1,r.image$)))},directives:[Hn],pipes:[hs],encapsulation:2,changeDetection:0}),n})(),FA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home-page"]],decls:2,vars:0,template:function(t,r){1&t&&h._UZ(0,"lib-home")(1,"lib-show-images")},directives:[RC,Ng],encapsulation:2,changeDetection:0}),n})();var NE=O(4986),oi=O(5813);function Og(){return(0,Wr.e)((n,e)=>{let t,r=!1;n.subscribe((0,zn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function OC(n,e){return n===e}var rt,ur=O(2011),OE=(O(4087),O(3942)),ve=O(5861),wc=O(9681),kg=O(4859),el=O(1877),Ht=O(2090),kC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ja={},xt=xt||{},Rt=kC||self;function Sf(){}function Pg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function tl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Fg="closure_uid_"+(1e9*Math.random()>>>0),PC=0;function y_(n,e,t){return n.call.apply(n.bind,arguments)}function Xa(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Vr(n,e,t){return(Vr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y_:Xa).apply(null,arguments)}function Af(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Br(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function bc(){this.s=this.s,this.o=this.o}var VA={};bc.prototype.s=!1,bc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Po(n){return Object.prototype.hasOwnProperty.call(n,Fg)&&n[Fg]||(n[Fg]=++PC)}(this);delete VA[n]}},bc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Mf=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},xf=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function Lg(n){return Array.prototype.concat.apply([],arguments)}function Rf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function v_(n){return/^[\s\xa0]*$/.test(n)}var Bi,PE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Vi(n,e){return-1!=n.indexOf(e)}function E_(n,e){return n<e?-1:n>e?1:0}e:{var w_=Rt.navigator;if(w_){var FC=w_.userAgent;if(FC){Bi=FC;break e}}Bi=""}function b_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function LC(n){const e={};for(const t in n)e[t]=n[t];return e}var D_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C_(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<D_.length;u++)t=D_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function I_(n){return I_[" "](n),n}I_[" "]=Sf;var S_,n,BA=Vi(Bi,"Opera"),Nf=Vi(Bi,"Trident")||Vi(Bi,"MSIE"),VC=Vi(Bi,"Edge"),FE=VC||Nf,BC=Vi(Bi,"Gecko")&&!(Vi(Bi.toLowerCase(),"webkit")&&!Vi(Bi,"Edge"))&&!(Vi(Bi,"Trident")||Vi(Bi,"MSIE"))&&!Vi(Bi,"Edge"),UA=Vi(Bi.toLowerCase(),"webkit")&&!Vi(Bi,"Edge");function UC(){var n=Rt.document;return n?n.documentMode:void 0}e:{var LE="",VE=(n=Bi,BC?/rv:([^\);]+)(\)|;)/.exec(n):VC?/Edge\/([\d\.]+)/.exec(n):Nf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):UA?/WebKit\/(\S+)/.exec(n):BA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(VE&&(LE=VE?VE[1]:""),Nf){var va=UC();if(null!=va&&va>parseFloat(LE)){S_=String(va);break e}}S_=LE}var A_={};var BE=Rt.document&&Nf&&(UC()||parseInt(S_,10))||void 0,M_=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",Sf,e),Rt.removeEventListener("test",Sf,e)}catch(t){}return n}();function bi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function so(n,e){if(bi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(BC){e:{try{I_(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:UE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&so.Z.h.call(this)}}bi.prototype.h=function(){this.defaultPrevented=!0},Br(so,bi);var UE={2:"touch",3:"pen",4:"mouse"};so.prototype.h=function(){so.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Of="closure_listenable_"+(1e6*Math.random()|0),x_=0;function $C(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++x_,this.ca=this.fa=!1}function kf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Ug(n){this.src=n,this.g={},this.h=0}function R_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Mf(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(kf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Dc(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}Ug.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Dc(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new $C(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var nl="closure_lm_"+(1e6*Math.random()|0),Pf={};function Cc(n,e,t,r,i){if(r&&r.once)return jE(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Cc(n,e[u],t,r,i);return null}return t=k_(t),n&&n[Of]?n.N(e,t,tl(r)?!!r.capture:!!r,i):Wd(n,e,t,!1,r,i)}function Wd(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=tl(i)?!!i.capture:!!i,p=Hg(n);if(p||(n[nl]=p=new Ug(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function Kd(){var e=O_;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)M_||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent($g(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function jE(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)jE(n,e[u],t,r,i);return null}return t=k_(t),n&&n[Of]?n.O(e,t,tl(r)?!!r.capture:!!r,i):Wd(n,e,t,!0,r,i)}function N_(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)N_(n,e[u],t,r,i);else r=tl(r)?!!r.capture:!!r,t=k_(t),n&&n[Of]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Dc(u=n.g[e],t,r,i))&&(kf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Hg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Dc(e,t,r,i)),(t=-1<n?e[n]:null)&&jg(t))}function jg(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Of])R_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent($g(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Hg(e))?(R_(t,n),0==t.h&&(t.src=null,e[nl]=null)):kf(n)}}}function $g(n){return n in Pf?Pf[n]:Pf[n]="on"+n}function O_(n,e){if(n.ca)n=!0;else{e=new so(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&jg(n),n=t.call(r,e)}return n}function Hg(n){return(n=n[nl])instanceof Ug?n:null}var Zd="__closure_events_fn_"+(1e9*Math.random()>>>0);function k_(n){return"function"==typeof n?n:(n[Zd]||(n[Zd]=function(e){return n.handleEvent(e)}),n[Zd])}function Ur(){bc.call(this),this.i=new Ug(this),this.P=this,this.I=null}function Di(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new bi(e,n);else if(e instanceof bi)e.target=e.target||n;else{var i=e;C_(e=new bi(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Ff(c,r,!0,e)&&i}if(i=Ff(c=e.g=n,r,!0,e)&&i,i=Ff(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Ff(c=e.g=t[u],r,!1,e)&&i}function Ff(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&R_(n.i,c),i=!1!==p.call(y,r)&&i}}return i&&!r.defaultPrevented}Br(Ur,bc),Ur.prototype[Of]=!0,Ur.prototype.removeEventListener=function(n,e,t,r){N_(this,n,e,t,r)},Ur.prototype.M=function(){if(Ur.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)kf(t[r]);delete n.g[e],n.h--}}this.I=null},Ur.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ur.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Gg=Rt.JSON.stringify;function HC(){var n=L_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var F_,HE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new GC,n=>n.reset());class GC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function bs(n){Rt.setTimeout(()=>{throw n},0)}function P_(n,e){F_||function jA(){var n=Rt.Promise.resolve(void 0);F_=function(){n.then($A)}}(),GE||(F_(),GE=!0),L_.add(n,e)}var GE=!1,L_=new class $E{constructor(){this.h=this.g=null}add(e,t){const r=HE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function $A(){for(var n;n=HC();){try{n.h.call(n.g)}catch(t){bs(t)}var e=HE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}GE=!1}function qg(n,e){Ur.call(this),this.h=n||1,this.g=e||Rt,this.j=Vr(this.kb,this),this.l=Date.now()}function Lf(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function zg(n,e,t){if("function"==typeof n)t&&(n=Vr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Vr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function qE(n){n.g=zg(()=>{n.g=null,n.i&&(n.i=!1,qE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Br(qg,Ur),(rt=qg.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Di(this,"tick"),this.da&&(Lf(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){qg.Z.M.call(this),Lf(this),delete this.g};class qC extends bc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qE(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vf(n){bc.call(this),this.h=n,this.g={}}Br(Vf,bc);var V_=[];function zE(n,e,t,r){Array.isArray(t)||(t&&(V_[0]=t.toString()),t=V_);for(var i=0;i<t.length;i++){var u=Cc(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function B_(n){b_(n.g,function(e,t){this.g.hasOwnProperty(t)&&jg(e)},n),n.g={}}function Wg(){this.g=!0}function Ic(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ea(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Gg(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}Vf.prototype.M=function(){Vf.Z.M.call(this),B_(this)},Vf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wg.prototype.Aa=function(){this.g=!1},Wg.prototype.info=function(){};var eu={},KE=null;function Kg(){return KE=KE||new Ur}function KC(n){bi.call(this,eu.Ma,n)}function Yd(n){const e=Kg();Di(e,new KC(e,n))}function ZE(n,e){bi.call(this,eu.STAT_EVENT,n),this.stat=e}function Ui(n){const e=Kg();Di(e,new ZE(e,n))}function YE(n,e){bi.call(this,eu.Na,n),this.size=e}function Tc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}eu.Ma="serverreachability",Br(KC,bi),eu.STAT_EVENT="statevent",Br(ZE,bi),eu.Na="timingevent",Br(YE,bi);var Zg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},QE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qd(){}function JE(){}Qd.prototype.h=null;var U_,Sc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Bf(){bi.call(this,"d")}function Qg(){bi.call(this,"c")}function Jg(){}function Ac(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Vf(this),this.P=YC,this.W=new qg(n=FE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ZC}function ZC(){this.i=null,this.g="",this.h=!1}Br(Bf,bi),Br(Qg,bi),Br(Jg,Qd),Jg.prototype.g=function(){return new XMLHttpRequest},Jg.prototype.i=function(){return{}},U_=new Jg;var YC=45e3,Xg={},Uf={};function em(n,e,t){n.K=1,n.v=im(nu(e)),n.s=t,n.U=!0,j_(n,null)}function j_(n,e){n.F=Date.now(),jf(n),n.A=nu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),sw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new ZC,n.g=rv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new qC(Vr(n.Ia,n,n.g),n.O)),zE(n.V,n.g,"readystatechange",n.gb),e=n.H?LC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Yd(1),function zC(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),y=0;y<p.length;y++){var b=p[y].split("=");if(1<b.length){var A=b[0];b=b[1];var M=A.split("_");c=2<=M.length&&"type"==M[1]?c+(A+"=")+b+"&":c+(A+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function $_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function wa(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=tm(n,t),i==Uf){4==e&&(n.o=4,Ui(14),r=!1),Ic(n.j,n.m,null,"[Incomplete Response]");break}if(i==Xg){n.o=4,Ui(15),Ic(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ic(n.j,n.m,i,null),$f(n,i)}$_(n)&&i!=Uf&&i!=Xg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ui(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ul(e),e.L=!0,Ui(11))):(Ic(n.j,n.m,t,"[Invalid Chunked Response]"),rl(n),Mc(n))}function tm(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Uf:(t=Number(e.substring(t,r)),isNaN(t)?Xg:(r+=1)+t>e.length?Uf:(e=e.substr(r,t),n.C=r+t,e))}function jf(n){n.Y=Date.now()+n.P,XE(n,n.P)}function XE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Tc(Vr(n.eb,n),e)}function H_(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Mc(n){0==n.l.G||n.I||X_(n.l,n)}function rl(n){H_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Lf(n.W),B_(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function $f(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Wf(t.i,n)))if(t.I=n.N,!n.J&&Wf(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Tc(Vr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Jf(t),Oc(t)}al(t),Ui(18)}if(1>=nI(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else ll(t,11)}else if((n.J||t.g==n)&&Jf(t),!v_(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const G=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var u=r.i;!u.g&&(Vi(G,"spdy")||Vi(G,"quic")||Vi(G,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(K_(u,u.h),u.h=null))}if(r.D){const ne=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.sa=ne,jn(r.F,r.D,ne))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=nv(r,r.H?r.la:null,r.W),c.J){Z_(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&(H_(p),jf(p)),r.g=c}else Fc(r);0<t.l.length&&au(t)}else"stop"!=b[0]&&"close"!=b[0]||ll(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?ll(t,7):ou(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Yd(4)}catch(b){}}function G_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Pg(n)||"string"==typeof n)xf(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Pg(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Hf(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Pg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function il(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof il)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function nm(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];sl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)sl(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function sl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=Ac.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==iu(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const A=iu(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>A)&&(3!=A||FE||this.g&&(this.h.h||this.g.ga()||dw(this.g)))){this.I||4!=A||7==e||Yd(8==e||0>=M?3:2),H_(this);var t=this.g.ba();this.N=t;t:if($_(this)){var r=dw(this.g);n="";var i=r.length,u=4==iu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){rl(this),Mc(this);var c="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function WE(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v_(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ui(12),rl(this),Mc(this);break e}Ic(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$f(this,t)}this.U?(wa(this,A,c),FE&&this.i&&3==A&&(zE(this.V,this.W,"tick",this.fb),this.W.start())):(Ic(this.j,this.m,c,null),$f(this,c)),4==A&&rl(this),this.i&&!this.I&&(4==A?X_(this.l,this):(this.i=!1,jf(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ui(12)):(this.o=0,Ui(13)),rl(this),Mc(this)}}}catch(A){}},rt.fb=function(){if(this.g){var n=iu(this.g),e=this.g.ga();this.C<e.length&&(H_(this),wa(this,n,e),this.i&&4!=n&&jf(this))}},rt.cancel=function(){this.I=!0,rl(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function WC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Yd(3),Ui(17)),rl(this),this.o=2,Mc(this)):XE(this,this.Y-n)},(rt=il.prototype).R=function(){nm(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return nm(this),this.g.concat()},rt.get=function(n,e){return sl(this.h,n)?this.h[n]:e},rt.set=function(n,e){sl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var q_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof tu){this.g=void 0!==e?e:n.g,rm(this,n.j),this.s=n.s,Gf(this,n.i),ru(this,n.m),this.l=n.l,e=n.h;var t=new Xd;t.i=e.i,e.g&&(t.g=new il(e.g),t.h=e.h),z_(this,t),this.o=n.o}else n&&(t=String(n).match(q_))?(this.g=!!e,rm(this,t[1]||"",!0),this.s=qf(t[2]||""),Gf(this,t[3]||"",!0),ru(this,t[4]),this.l=qf(t[5]||"",!0),z_(this,t[6]||"",!0),this.o=qf(t[7]||"")):(this.g=!!e,this.h=new Xd(null,this.g))}function nu(n){return new tu(n)}function rm(n,e,t){n.j=t?qf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Gf(n,e,t){n.i=t?qf(e,!0):e}function ru(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function z_(n,e,t){e instanceof Xd?(n.h=e,function HA(n,e){e&&!n.j&&(ol(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(rw(this,r),sw(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=zf(e,tw)),n.h=new Xd(e,n.g))}function jn(n,e,t){n.h.set(e,t)}function im(n){return jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function zf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,XC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function XC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}tu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(zf(e,oo,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(zf(e,oo,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(zf(t,"/"==t.charAt(0)?ew:W_,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",zf(t,nw)),n.join("")};var oo=/[#\/\?@]/g,W_=/[#\?:]/g,ew=/[#\?]/g,tw=/[#\?@]/g,nw=/#/g;function Xd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ol(n){n.g||(n.g=new il,n.h=0,n.i&&function QC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function rw(n,e){ol(n),e=xc(n,e),sl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,sl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&nm(n)))}function iw(n,e){return ol(n),e=xc(n,e),sl(n.g.h,e)}function sw(n,e,t){rw(n,e),0<t.length&&(n.i=null,n.g.set(xc(n,e),Rf(t)),n.h+=t.length)}function xc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function aw(n){this.l=n||eI,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=Xd.prototype).add=function(n,e){ol(this),this.i=null,n=xc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){ol(this),this.g.forEach(function(t,r){xf(t,function(i){n.call(e,i,r,this)},this)},this)},rt.T=function(){ol(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},rt.R=function(n){ol(this);var e=[];if("string"==typeof n)iw(this,n)&&(e=Lg(e,this.g.get(xc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Lg(e,n[t])}return e},rt.set=function(n,e){return ol(this),this.i=null,iw(this,n=xc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var eI=10;function tI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function nI(n){return n.h?1:n.g?n.g.size:0}function Wf(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function K_(n,e){n.g?n.g.add(e):n.h=e}function Z_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Y_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Rf(n.i)}function uw(){}function Fo(){this.g=new uw}function GA(n,e,t){const r=t||"";try{G_(n,function(i,u){let c=i;tl(i)&&(c=Gg(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Kf(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function eh(n){this.l=n.$b||null,this.j=n.ib||!1}function Zf(n,e){Ur.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Q_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}aw.prototype.cancel=function(){if(this.i=Y_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},uw.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},uw.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},Br(eh,Qd),eh.prototype.g=function(){return new Zf(this.l,this.j)},eh.prototype.i=function(n){return function(){return n}}({}),Br(Zf,Ur);var Q_=0;function rI(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function th(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Rc(n)}function Rc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=Zf.prototype).open=function(n,e){if(this.readyState!=Q_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Rc(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,th(this)),this.readyState=Q_},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Rc(this)),this.g&&(this.readyState=3,Rc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rI(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?th(this):Rc(this),3==this.readyState&&rI(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,th(this))},rt.Ta=function(n){this.g&&(this.response=n,th(this))},rt.ha=function(){this.g&&th(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Zf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var iI=Rt.JSON.parse;function Xn(n){Ur.call(this),this.headers=new il,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=lw,this.K=this.L=!1}Br(Xn,Ur);var lw="",sI=/^https?$/i,oI=["POST","PUT"];function uI(n){return"content-type"==n.toLowerCase()}function cw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Yf(n),sm(n)}function Yf(n){n.D||(n.D=!0,Di(n,"complete"),Di(n,"error"))}function Nc(n){if(n.h&&void 0!==xt&&(!n.C[1]||4!=iu(n)||2!=n.ba()))if(n.v&&4==iu(n))zg(n.Fa,0,n);else if(Di(n,"readystatechange"),4==iu(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(q_)[1]||null;if(!i&&Rt.self&&Rt.self.location){var u=Rt.self.location.protocol;i=u.substr(0,u.length-1)}r=!sI.test(i?i.toLowerCase():"")}t=r}if(t)Di(n,"complete"),Di(n,"success");else{n.m=6;try{var c=2<iu(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",Yf(n)}}finally{sm(n)}}}function sm(n,e){if(n.g){nh(n);const t=n.g,r=n.C[0]?Sf:null;n.g=null,n.C=null,e||Di(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function nh(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function iu(n){return n.g?n.g.readyState:0}function dw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case lw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ao(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function J_(n){let e="";return b_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):jn(n,e,t))}function su(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ai(n){this.za=0,this.l=[],this.h=new Wg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=su("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=su("baseRetryDelayMs",5e3,n),this.$a=su("retryDelaySeedMs",1e4,n),this.Ya=su("forwardChannelMaxRetries",2,n),this.ra=su("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new aw(n&&n.concurrentRequestLimit),this.Ca=new Fo,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ou(n){if(Ds(n),3==n.G){var e=n.V++,t=nu(n.F);jn(t,"SID",n.J),jn(t,"RID",e),jn(t,"TYPE","terminate"),ba(n,t),(e=new Ac(n,n.h,e,void 0)).K=2,e.v=im(nu(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=rv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),jf(e)}tv(n)}function Oc(n){n.g&&(ul(n),n.g.cancel(),n.g=null)}function Ds(n){Oc(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),Jf(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function Qf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&au(n)}function au(n){tI(n.i)||n.m||(n.m=!0,P_(n.Ha,n),n.C=0)}function kc(n,e){var t;t=e?e.m:n.V++;const r=nu(n.F);jn(r,"SID",n.J),jn(r,"RID",t),jn(r,"AID",n.U),ba(n,r),n.o&&n.s&&ao(r,n.o,n.s),t=new Ac(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Pc(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),K_(n.i,t),em(t,r,e)}function ba(n,e){n.j&&G_({},function(t,r){jn(e,r,t)})}function Pc(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Vr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let b=i[y].h;const A=i[y].g;if(b-=u,0>b)u=Math.max(0,i[y].h-100),p=!1;else try{GA(A,c,"req"+b+"_")}catch(M){r&&r(A)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Fc(n){n.g||n.u||(n.Y=1,P_(n.Ga,n),n.A=0)}function al(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Tc(Vr(n.Ga,n),ev(n,n.A)),n.A++,0))}function ul(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Lc(n){n.g=new Ac(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=nu(n.oa);jn(e,"RID","rpc"),jn(e,"SID",n.J),jn(e,"CI",n.N?"0":"1"),jn(e,"AID",n.U),ba(n,e),jn(e,"TYPE","xmlhttp"),n.o&&n.s&&ao(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=im(nu(e)),t.s=null,t.U=!0,j_(t,n)}function Jf(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function X_(n,e){var t=null;if(n.g==e){Jf(n),ul(n),n.g=null;var r=2}else{if(!Wf(n.i,e))return;t=e.D,Z_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Di(r=Kg(),new YE(r,t,e,i)),au(n)}else Fc(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function rh(n,e){return!(nI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Tc(Vr(n.Ha,n,e),ev(n,n.C)),n.C++,0)))}(n,e)||2==r&&al(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ll(n,5);break;case 4:ll(n,10);break;case 3:ll(n,6);break;default:ll(n,2)}}function ev(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ll(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Vr(n.jb,n);t||(t=new tu("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||rm(t,"https"),im(t)),function qA(n,e){const t=new Wg;if(Rt.Image){const r=new Image;r.onload=Af(Kf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Af(Kf,t,r,"TestLoadImage: error",!1,e),r.onabort=Af(Kf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Af(Kf,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ui(2);n.G=0,n.j&&n.j.va(e),tv(n),Ds(n)}function tv(n){n.G=0,n.I=-1,n.j&&((0!=Y_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Rf(n.l),n.l.length=0),n.j.ua())}function nv(n,e,t){let r=function Jd(n){return n instanceof tu?nu(n):new tu(n,void 0)}(t);if(""!=r.i)e&&Gf(r,e+"."+r.i),ru(r,r.m);else{const i=Rt.location;r=function JC(n,e,t,r){var i=new tu(null,void 0);return n&&rm(i,n),e&&Gf(i,e),t&&ru(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&b_(n.aa,function(i,u){jn(r,u,i)}),t=n.sa,(e=n.D)&&t&&jn(r,e,t),jn(r,"VER",n.ma),ba(n,r),r}function rv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xn(t&&n.Ba&&!n.qa?new eh({ib:!0}):n.qa)).L=n.H,e}function iv(){}function Xf(){if(Nf&&!(10<=Number(BE)))throw Error("Environmental error: no available transport.")}function Cs(n,e){Ur.call(this),this.g=new ai(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!v_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!v_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ih(this)}function sv(n){Bf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function hw(){Qg.call(this),this.status=1}function ih(n){this.g=n}(rt=Xn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():U_.g(),this.C=function Yg(n){return n.h||(n.h=n.i())}(this.u?this.u:U_),this.g.onreadystatechange=Vr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void cw(this,u)}n=t||"";const i=new il(this.headers);r&&G_(r,function(u,c){i.set(c,u)}),r=function __(n){e:{var e=uI;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=Mf(oI,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nh(this),0<this.B&&((this.K=function aI(n){return Nf&&function jC(){return function T_(n){var e=A_;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=PE(String(S_)).split("."),t=PE("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=E_(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||E_(0==i[2].length,0==u[2].length)||E_(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vr(this.pa,this)):this.A=zg(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){cw(this,u)}},rt.pa=function(){void 0!==xt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Di(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Di(this,"complete"),Di(this,"abort"),sm(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sm(this,!0)),Xn.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?Nc(this):this.cb())},rt.cb=function(){Nc(this)},rt.ba=function(){try{return 2<iu(this)?this.g.status:-1}catch(n){return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),iI(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=ai.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Ac(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=LC(u),C_(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Pc(this,i,e),jn(t=nu(this.F),"RID",n),jn(t,"CVER",22),this.D&&jn(t,"X-HTTP-Session-Id",this.D),ba(this,t),this.o&&u&&ao(t,this.o,u),K_(this.i,i),this.Ra&&jn(t,"TYPE","init"),this.ja?(jn(t,"$req",e),jn(t,"SID","null"),i.$=!0,em(i,t,null)):em(i,t,e),this.G=2}}else 3==this.G&&(n?kc(this,n):0==this.l.length||tI(this.i)||kc(this))},rt.Ga=function(){if(this.u=null,Lc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Tc(Vr(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ui(10),Oc(this),Lc(this))},rt.ab=function(){null!=this.v&&(this.v=null,Oc(this),al(this),Ui(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ui(2)):(this.h.info("Failed to ping google.com"),Ui(1))},(rt=iv.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},Xf.prototype.g=function(n,e){return new Cs(n,e)},Br(Cs,Ur),Cs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),P_(Vr(n.hb,n,e))),Ui(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=nv(n,null,n.W),au(n)},Cs.prototype.close=function(){ou(this.g)},Cs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Qf(this.g,e)}else this.v?((e={}).__data__=Gg(n),Qf(this.g,e)):Qf(this.g,n)},Cs.prototype.M=function(){this.g.j=null,delete this.j,ou(this.g),delete this.g,Cs.Z.M.call(this)},Br(sv,Bf),Br(hw,Qg),Br(ih,iv),ih.prototype.xa=function(){Di(this.g,"a")},ih.prototype.wa=function(n){Di(this.g,new sv(n))},ih.prototype.va=function(n){Di(this.g,new hw(n))},ih.prototype.ua=function(){Di(this.g,"b")},Xf.prototype.createWebChannel=Xf.prototype.g,Cs.prototype.send=Cs.prototype.u,Cs.prototype.open=Cs.prototype.m,Cs.prototype.close=Cs.prototype.close,Zg.NO_ERROR=0,Zg.TIMEOUT=8,Zg.HTTP_ERROR=6,QE.COMPLETE="complete",JE.EventType=Sc,Sc.OPEN="a",Sc.CLOSE="b",Sc.ERROR="c",Sc.MESSAGE="d",Ur.prototype.listen=Ur.prototype.N,Xn.prototype.listenOnce=Xn.prototype.O,Xn.prototype.getLastError=Xn.prototype.La,Xn.prototype.getLastErrorCode=Xn.prototype.Da,Xn.prototype.getStatus=Xn.prototype.ba,Xn.prototype.getResponseJson=Xn.prototype.Qa,Xn.prototype.getResponseText=Xn.prototype.ga,Xn.prototype.send=Xn.prototype.ea;var fw=Ja.createWebChannelTransport=function(){return new Xf},lI=Ja.getStatEventTarget=function(){return Kg()},ov=Ja.ErrorCode=Zg,pw=Ja.EventType=QE,cI=Ja.Event=eu,av=Ja.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},dI=Ja.FetchXmlHttpFactory=eh,om=Ja.WebChannel=JE,zA=Ja.XhrIo=Xn;const gw="@firebase/firestore";class jr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jr.UNAUTHENTICATED=new jr(null),jr.GOOGLE_CREDENTIALS=new jr("google-credentials-uid"),jr.FIRST_PARTY=new jr("first-party-uid"),jr.MOCK_USER=new jr("mock-user");let cl="9.6.10";const dl=new el.Yd("@firebase/firestore");function mw(){return dl.logLevel}function Fe(n,...e){if(dl.logLevel<=el.in.DEBUG){const t=e.map(yw);dl.debug(`Firestore (${cl}): ${n}`,...t)}}function wr(n,...e){if(dl.logLevel<=el.in.ERROR){const t=e.map(yw);dl.error(`Firestore (${cl}): ${n}`,...t)}}function sh(n,...e){if(dl.logLevel<=el.in.WARN){const t=e.map(yw);dl.warn(`Firestore (${cl}): ${n}`,...t)}}function yw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: `+n;throw wr(e),new Error(e)}function Ct(n,e){n||it()}function qe(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _w{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jr.UNAUTHENTICATED))}shutdown(){}}class fI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pI{constructor(e){this.t=e,this.currentUser=jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new lr,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,ve.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new lr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new _w(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new jr(e)}}class gI{constructor(e,t,r){this.type="FirstParty",this.user=jr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class mI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new gI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ew{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ww{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.p=t.token,new Ew(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ns{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function bw(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ns.A=-1;class am{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bw(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function hl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Dw(n){return n+"\0"}class br{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return br.fromMillis(Date.now())}static fromDate(e){return br.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new br(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new br(0,0))}static max(){return new vt(new br(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function uv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function uu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function um(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ep{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ep.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ep?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Kt extends ep{construct(e,t,r){return new Kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Kt(t)}static emptyPath(){return new Kt([])}}const lm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends ep{construct(e,t,r){return new Dr(e,t,r)}static isValidIdentifier(e){return lm.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Re(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Re(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Re(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new Re(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class tp{constructor(e){this.fields=e,e.sort(Dr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new cr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cr.EMPTY_BYTE_STRING=new cr("");const lv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lu(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=lv.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kn(n.seconds),nanos:Kn(n.nanos)}}function Kn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function cu(n){return"string"==typeof n?cr.fromBase64String(n):cr.fromUint8Array(n)}function cm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function cv(n){const e=n.mapValue.fields.__previous_value__;return cm(e)?cv(e):e}function Vc(n){const e=lu(n.mapValue.fields.__local_write_time__.timestampValue);return new br(e.seconds,e.nanos)}class Cw{constructor(e,t,r,i,u,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class du{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new du("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof du&&e.projectId===this.projectId&&e.database===this.database}}function fl(n){return null==n}function oh(n){return 0===n&&1/n==-1/0}function dm(n){return"number"==typeof n&&Number.isInteger(n)&&!oh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je(Kt.fromString(e))}static fromName(e){return new je(Kt.fromString(e).popFirst(5))}static empty(){return new je(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Kt(e.slice()))}}const Iw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dv={nullValue:"NULL_VALUE"};function pl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cm(n)?4:pv(n)?9:10:it()}function Lo(n,e){if(n===e)return!0;const t=pl(n);if(t!==pl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vc(n).isEqual(Vc(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=lu(r.timestampValue),c=lu(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,cu(n.bytesValue).isEqual(cu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Kn(r.geoPointValue.latitude)===Kn(i.geoPointValue.latitude)&&Kn(r.geoPointValue.longitude)===Kn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Kn(r.integerValue)===Kn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Kn(r.doubleValue),c=Kn(i.doubleValue);return u===c?oh(u)===oh(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return hl(n.arrayValue.values||[],e.arrayValue.values||[],Lo);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(uv(u)!==uv(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!Lo(u[p],c[p])))return!1;return!0}(n,e);default:return it()}var i}function Bc(n,e){return void 0!==(n.values||[]).find(t=>Lo(t,e))}function hu(n,e){if(n===e)return 0;const t=pl(n),r=pl(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Kn(i.integerValue||i.doubleValue),p=Kn(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return hv(n.timestampValue,e.timestampValue);case 4:return hv(Vc(n),Vc(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=cu(i),p=cu(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let y=0;y<c.length&&y<p.length;y++){const b=Wt(c[y],p[y]);if(0!==b)return b}return Wt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Wt(Kn(i.latitude),Kn(u.latitude));return 0!==c?c:Wt(Kn(i.longitude),Kn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let y=0;y<c.length&&y<p.length;++y){const b=hu(c[y],p[y]);if(b)return b}return Wt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){const c=i.fields||{},p=Object.keys(c),y=u.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let A=0;A<p.length&&A<b.length;++A){const M=Wt(p[A],b[A]);if(0!==M)return M;const F=hu(c[p[A]],y[b[A]]);if(0!==F)return F}return Wt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw it()}}function hv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=lu(n),r=lu(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function Uc(n){return hm(n)}function hm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=lu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?cu(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=hm(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${hm(r.fields[p])}`;return u+"}"}(n.mapValue):it();var e}function jc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fm(n){return!!n&&"integerValue"in n}function ah(n){return!!n&&"arrayValue"in n}function fv(n){return!!n&&"nullValue"in n}function _I(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pm(n){return!!n&&"mapValue"in n}function np(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return uu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=np(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=np(n.arrayValue.values[t]);return e}return Object.assign({},n)}function pv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Tw(n,e){return void 0===n?e:void 0===e||hu(n,e)>0?n:e}function Cr(n,e){return void 0===n?e:void 0===e||hu(n,e)<0?n:e}class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=np(t)}setAll(e){let t=Dr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=np(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());pm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];pm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){uu(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new ui(np(this.value))}}function Sw(n){const e=[];return uu(n.fields,(t,r)=>{const i=new Dr([t]);if(pm(r)){const u=Sw(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new tp(e)}class Nn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Nn(e,0,vt.min(),vt.min(),ui.empty(),0)}static newFoundDocument(e,t,r){return new Nn(e,1,t,vt.min(),r,0)}static newNoDocument(e,t){return new Nn(e,2,t,vt.min(),ui.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,vt.min(),ui.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function gv(n){return n.fields.find(e=>2===e.kind)}function $c(n){return n.fields.filter(e=>2!==e.kind)}rp.UNKNOWN_ID=-1;class ip{constructor(e,t){this.fieldPath=e,this.kind=t}}class Da{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Da(0,Ca.min())}}function Aw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(1e9===r?new br(t+1,0):new br(t,r));return new Ca(i,je.empty(),e)}function vI(n){return new Ca(n.readTime,n.key,-1)}class Ca{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ca(vt.min(),je.empty(),-1)}static max(){return new Ca(vt.max(),je.empty(),-1)}}function EI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}class Mw{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function wI(n,e=null,t=[],r=[],i=null,u=null,c=null){return new Mw(n,e,t,r,i,u,c)}function gl(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Uc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),fl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Uc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Uc(r)).join(",")),e.P=t}return e.P}function rs(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!TI(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Lo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rw(n.startAt,e.startAt)&&Rw(n.endAt,e.endAt)}function gm(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function sp(n,e){return n.filters.filter(t=>t instanceof In&&t.field.isEqual(e))}class In extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Vo(e,t,r):"array-contains"===t?new bI(e,r):"in"===t?new DI(e,r):"not-in"===t?new CI(e,r):"array-contains-any"===t?new II(e,r):new In(e,t,r)}static V(e,t,r){return"in"===t?new Bo(e,r):new xw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(hu(t,this.value)):null!==t&&pl(this.value)===pl(t)&&this.v(hu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Vo extends In{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class Bo extends In{constructor(e,t){super(e,"in",t),this.keys=yv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xw extends In{constructor(e,t){super(e,"not-in",t),this.keys=yv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class bI extends In{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ah(t)&&Bc(t.arrayValue,this.value)}}class DI extends In{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bc(this.value.arrayValue,t)}}class CI extends In{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bc(this.value.arrayValue,t)}}class II extends In{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ah(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bc(this.value.arrayValue,r))}}class Ia{constructor(e,t){this.position=e,this.inclusive=t}}class Ta{constructor(e,t="asc"){this.field=e,this.dir=t}}function TI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function _v(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?je.comparator(je.fromName(c.referenceValue),t.key):hu(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Rw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lo(n.position[t],e.position[t]))return!1;return!0}class Sa{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=y,this.D=null,this.C=null}}function vv(n,e,t,r,i,u,c,p){return new Sa(n,e,t,r,i,u,c,p)}function fu(n){return new Sa(n)}function mm(n){return!fl(n.limit)&&"F"===n.limitType}function op(n){return!fl(n.limit)&&"L"===n.limitType}function ym(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function _m(n){for(const e of n.filters)if(e.S())return e.field;return null}function uh(n){return null!==n.collectionGroup}function Hc(n){const e=qe(n);if(null===e.D){e.D=[];const t=_m(e),r=ym(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Ta(t)),e.D.push(new Ta(Dr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Ta(Dr.keyField(),u))}}}return e.D}function Is(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=wI(e.path,e.collectionGroup,Hc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Hc(e))t.push(new Ta(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ia(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Ia(e.startAt.position,!e.startAt.inclusive):null;e.C=wI(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function Ev(n,e,t){return new Sa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lh(n,e){return rs(Is(n),Is(e))&&n.limitType===e.limitType}function wv(n){return`${gl(Is(n))}|lt:${n.limitType}`}function vm(n){return`Query(target=${function mv(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Uc(r.value)}`;var r}).join(", ")}]`),fl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Uc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Uc(t)).join(",")),`Target(${e})`}(Is(n))}; limitType=${n.limitType})`}function Em(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=_v(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,Hc(t),r)||t.endAt&&!function(i,u,c){const p=_v(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,Hc(t),r)));var t,r}function bv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Nw(n){return(e,t)=>{let r=!1;for(const i of Hc(n)){const u=SI(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function SI(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),y=c.data.field(i);return null!==p&&null!==y?hu(p,y):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function Ow(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(e)?"-0":e}}function kw(n){return{integerValue:""+n}}function Pw(n,e){return dm(e)?kw(e):Ow(n,e)}class wm{constructor(){this._=void 0}}function AI(n,e,t){return n instanceof ch?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Gc?Lw(n,e):n instanceof qc?Vw(n,e):function(r,i){const u=Fw(r,i),c=Bw(u)+Bw(r.k);return fm(u)&&fm(r.k)?kw(c):Ow(r.M,c)}(n,e)}function MI(n,e,t){return n instanceof Gc?Lw(n,e):n instanceof qc?Vw(n,e):t}function Fw(n,e){return n instanceof dh?fm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ch extends wm{}class Gc extends wm{constructor(e){super(),this.elements=e}}function Lw(n,e){const t=Uw(e);for(const r of n.elements)t.some(i=>Lo(i,r))||t.push(r);return{arrayValue:{values:t}}}class qc extends wm{constructor(e){super(),this.elements=e}}function Vw(n,e){let t=Uw(e);for(const r of n.elements)t=t.filter(i=>!Lo(i,r));return{arrayValue:{values:t}}}class dh extends wm{constructor(e,t){super(),this.M=e,this.k=t}}function Bw(n){return Kn(n.integerValue||n.doubleValue)}function Uw(n){return ah(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ap{constructor(e,t){this.field=e,this.transform=t}}class $w{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function up(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class lp{}function Hw(n,e,t){n instanceof hh?function(r,i,u){const c=r.value.clone(),p=zw(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Ts?function(r,i,u){if(!up(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=zw(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(qw(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function bm(n,e,t){var i;n instanceof hh?function(r,i,u){if(!up(r.precondition,i))return;const c=r.value.clone(),p=zc(r.fieldTransforms,u,i);c.setAll(p),i.convertToFoundDocument(Cv(i),c).setHasLocalMutations()}(n,e,t):n instanceof Ts?function(r,i,u){if(!up(r.precondition,i))return;const c=zc(r.fieldTransforms,u,i),p=i.data;p.setAll(qw(r)),p.setAll(c),i.convertToFoundDocument(Cv(i),p).setHasLocalMutations()}(n,e,t):up(n.precondition,i=e)&&i.convertToNoDocument(vt.min())}function Gw(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=Fw(r.transform,i||null);null!=u&&(null==t&&(t=ui.empty()),t.set(r.field,u))}return t||null}function Dv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&hl(t,r,(i,u)=>function jw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Gc&&r instanceof Gc||t instanceof qc&&r instanceof qc?hl(t.elements,r.elements,Lo):t instanceof dh&&r instanceof dh?Lo(t.k,r.k):t instanceof ch&&r instanceof ch);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Cv(n){return n.isFoundDocument()?n.version:vt.min()}class hh extends lp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Ts extends lp{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function qw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function zw(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,MI(c,p,t[i]))}return r}function zc(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,AI(u,c,e))}return r}class Dm extends lp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class cp extends lp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class ZA{constructor(e){this.count=e}}var hr,Jt;function xI(n){switch(n){default:return it();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function Dt(n){if(void 0===n)return wr("GRPC error has no .code"),le.UNKNOWN;switch(n){case hr.OK:return le.OK;case hr.CANCELLED:return le.CANCELLED;case hr.UNKNOWN:return le.UNKNOWN;case hr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case hr.INTERNAL:return le.INTERNAL;case hr.UNAVAILABLE:return le.UNAVAILABLE;case hr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case hr.NOT_FOUND:return le.NOT_FOUND;case hr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case hr.ABORTED:return le.ABORTED;case hr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case hr.DATA_LOSS:return le.DATA_LOSS;default:return it()}}(Jt=hr||(hr={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class ml{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){uu(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return um(this.inner)}size(){return this.innerSize}}class fr{constructor(e,t){this.comparator=e,this.root=t||Ir.EMPTY}insert(e,t){return new fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ir.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ir.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cm(this.root,e,this.comparator,!0)}}class Cm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ir{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:Ir.RED,this.left=null!=i?i:Ir.EMPTY,this.right=null!=u?u:Ir.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Ir(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ir.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ir.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Ir.EMPTY=null,Ir.RED=!0,Ir.BLACK=!1,Ir.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ir(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class On{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dp(this.data.getIterator())}getIteratorFrom(e){return new dp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new On(this.comparator);return t.data=e,t}}class dp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pu(n){return n.hasNext()?n.getNext():void 0}const er=new fr(je.comparator);function Uo(){return er}const Ww=new fr(je.comparator);function Iv(){return Ww}function hp(){return new ml(n=>n.toString(),(n,e)=>n.isEqual(e))}const Kw=new fr(je.comparator),Zw=new On(je.comparator);function hn(...n){let e=Zw;for(const t of n)e=e.add(t);return e}const Yw=new On(Wt);function Im(){return Yw}class fp{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,pp.createSynthesizedTargetChangeForCurrentChange(e,t)),new fp(vt.min(),r,Im(),Uo(),hn())}}class pp{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new pp(cr.EMPTY_BYTE_STRING,t,hn(),hn(),hn())}}class yl{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class Qw{constructor(e,t){this.targetId=e,this.$=t}}class Jw{constructor(e,t,r=cr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Xw{constructor(){this.B=0,this.L=Sv(),this.U=cr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=hn(),t=hn(),r=hn();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new pp(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=Sv()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Tm{constructor(e){this.nt=e,this.st=new Map,this.it=Uo(),this.rt=Tv(),this.ot=new On(Wt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(gm(u))if(0===r){const c=new je(u.path);this.ct(t,c,Nn.newNoDocument(c,vt.min()))}else Ct(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&gm(p.target)){const y=new je(p.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,Nn.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=hn();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new fp(e,t,this.ot,this.it,r);return this.it=Uo(),this.rt=Tv(),this.ot=new On(Wt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Xw,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new On(Wt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Xw),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Tv(){return new fr(je.comparator)}function Sv(){return new fr(je.comparator)}const eb={asc:"ASCENDING",desc:"DESCENDING"},RI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class gp{constructor(e,t){this.databaseId=e,this.N=t}}function gu(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tb(n,e){return n.N?e.toBase64():e.toUint8Array()}function NI(n,e){return gu(n,e.toTimestamp())}function Jr(n){return Ct(!!n),vt.fromTimestamp(function(e){const t=lu(e);return new br(t.seconds,t.nanos)}(n))}function Sm(n,e){return(t=n,new Kt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Av(n){const e=Kt.fromString(n);return Ct(Rv(e)),e}function fh(n,e){return Sm(n.databaseId,e.path)}function Aa(n,e){const t=Av(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(OI(t))}function Am(n,e){return Sm(n.databaseId,e)}function nb(n){const e=Av(n);return 4===e.length?Kt.emptyPath():OI(e)}function mp(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OI(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function kI(n,e,t){return{name:fh(n,e),fields:t.value.mapValue.fields}}function PI(n,e,t){const r=Aa(n,e.name),i=Jr(e.updateTime),u=new ui({mapValue:{fields:e.fields}}),c=Nn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function _l(n,e){let t;if(e instanceof hh)t={update:kI(n,e.key,e.value)};else if(e instanceof Dm)t={delete:fh(n,e.key)};else if(e instanceof Ts)t={update:kI(n,e.key,e.data),updateMask:jI(e.fieldMask)};else{if(!(e instanceof cp))return it();t={verify:fh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof ch)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Gc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof qc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof dh)return{fieldPath:u.field.canonicalString(),increment:c.k};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:NI(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function Mv(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?dr.updateTime(Jr(i.updateTime)):void 0!==i.exists?dr.exists(i.exists):dr.none():dr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(Ct("REQUEST_TIME"===c.setToServerValue),p=new ch):"appendMissingElements"in c?p=new Gc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new qc(c.removeAllFromArray.values||[]):"increment"in c?p=new dh(u,c.increment):it();const y=Dr.fromServerFormat(c.fieldPath);return new ap(y,p)}(n,i)):[];var i;if(e.update){const i=Aa(n,e.update.name),u=new ui({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new tp((e.updateMask.fieldPaths||[]).map(b=>Dr.fromServerFormat(b)));return new Ts(i,u,c,t,r)}return new hh(i,u,t,r)}if(e.delete){const i=Aa(n,e.delete);return new Dm(i,t)}if(e.verify){const i=Aa(n,e.verify);return new cp(i,t)}return it()}function xv(n,e){return{documents:[Am(n,e.path)]}}function ph(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Am(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Am(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const b=y.map(A=>function(M){if("=="===M.op){if(_I(M.value))return{unaryFilter:{field:Wc(M.field),op:"IS_NAN"}};if(fv(M.value))return{unaryFilter:{field:Wc(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(_I(M.value))return{unaryFilter:{field:Wc(M.field),op:"IS_NOT_NAN"}};if(fv(M.value))return{unaryFilter:{field:Wc(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wc(M.field),op:BI(M.op),value:M.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:Wc((A=b).field),direction:VI(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||fl(b)?b:{value:b});var b,p,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function ib(n){let e=nb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=sb(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new Ta(gh((M=A).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(A){let M;return M="object"==typeof A?A.value:A,fl(M)?null:M}(t.limit));let y=null;var A;t.startAt&&(y=new Ia((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new Ia(A.values||[],!A.before)}(t.endAt)),vv(e,i,c,u,p,"F",y,b)}function sb(n){return n?void 0!==n.unaryFilter?[mh(n)]:void 0!==n.fieldFilter?[UI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>sb(e)).reduce((e,t)=>e.concat(t)):it():[]}function VI(n){return eb[n]}function BI(n){return RI[n]}function Wc(n){return{fieldPath:n.canonicalString()}}function gh(n){return Dr.fromServerFormat(n.fieldPath)}function UI(n){return In.create(gh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function mh(n){switch(n.unaryFilter.op){case"IS_NAN":const e=gh(n.unaryFilter.field);return In.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=gh(n.unaryFilter.field);return In.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=gh(n.unaryFilter.field);return In.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=gh(n.unaryFilter.field);return In.create(i,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function jI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Rv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Xr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ab(e)),e=ob(n.get(t),e);return ab(e)}function ob(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function ab(n){return n+"\x01\x01"}function uo(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Kt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&it(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let y;0===i.length?y=p:(i+=p,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:it()}u=c+2}return new Kt(r)}const ub=["userId","batchId"];function yh(n,e){return[n,Xr(e)]}function lb(n,e,t){return[n,Xr(e),t]}const cb={},db=["prefixPath","collectionGroup","readTime","documentId"],$I=["prefixPath","collectionGroup","documentId"],HI=["collectionGroup","readTime","prefixPath","documentId"],GI=["canonicalId","targetId"],Nv=["targetId","path"],qI=["path","targetId"],hb=["collectionId","parent"],zI=["indexId","uid"],WI=["uid","sequenceNumber"],KI=["indexId","uid","arrayValue","directionalValue","documentKey"],ZI=["indexId","uid","documentKey"],YI=["userId","collectionPath","documentId"],QI=["userId","collectionPath","largestBatchId"],JI=["userId","collectionGroup","largestBatchId"],fb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pb=[...fb,"documentOverlays"],Ov=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],XI=[...Ov,"indexConfiguration","indexState","indexEntries"],gb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(i=>i?ge.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class Mm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new lr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Kc(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=yp(r.target.error);this.At.reject(new Kc(e,i))}}static open(e,t,r,i){try{return new Mm(t,e.transaction(i,r))}catch(u){throw new Kc(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Fv(t)}}class jo{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===jo.Vt((0,Ht.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Zc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Ht.hl)())return!1;if(jo.St())return!0;const e=(0,Ht.z$)(),t=jo.Vt(e),r=0<t&&t<10,i=jo.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Kc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Re(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Re(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Kc(e,p))},u.onupgradeneeded=c=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,ve.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const y=Mm.open(u.db,e,c?"readonly":"readwrite",r),b=i(y).next(A=>(y.bt(),A)).catch(A=>(y.abort(A),ge.reject(A))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&p<3;if(Fe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),u.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Pv{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Zc(this.Ft.delete())}}class Kc extends Re{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function vl(n){return"IndexedDbTransactionError"===n.name}class Fv{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zc(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Zc(this.store.add(e))}get(e){return Zc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Zc(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Zc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Gt(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ge((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ge((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new ge((r,i)=>{t.onerror=u=>{const c=yp(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Gt(e,t){const r=[];return new ge((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const y=new Pv(p),b=t(p.primaryKey,p.value,y);if(b instanceof ge){const A=b.catch(M=>(y.done(),ge.reject(M)));r.push(A)}y.isDone?i():null===y.Lt?p.continue():p.continue(y.Lt)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zc(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=yp(r.target.error);t(i)}})}let mb=!1;function yp(n){const e=jo.Vt((0,Ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mb||(mb=!0,setTimeout(()=>{throw r},0)),r}}return n}class yb extends kv{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function $r(n,e){const t=qe(n);return jo.xt(t.Ht,e)}class Lv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&Hw(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&bm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&bm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(vt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),hn())}isEqual(e){return this.batchId===e.batchId&&hl(this.mutations,e.mutations,(t,r)=>Dv(t,r))&&hl(this.baseMutations,e.baseMutations,(t,r)=>Dv(t,r))}}class xm{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=Kw;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new xm(e,t,r,i)}}class Vv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mu{constructor(e,t,r,i,u=vt.min(),c=vt.min(),p=cr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new mu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new mu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new mu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class eT{constructor(e){this.Jt=e}}function _p(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Rm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:fh(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:gu(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:lo(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:lo(e.version)}}var i,u;return r}function Rm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $o(n){const e=new br(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function _h(n,e){const t=(e.baseMutations||[]).map(u=>Mv(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Mv(n.Jt,u)),i=br.fromMillis(e.localWriteTimeMs);return new Lv(e.batchId,i,t,r)}function Nm(n){const e=$o(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$o(n.lastLimboFreeSnapshotVersion):vt.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=Is(fu(nb(i.documents[0])))):r=Is(ib(n.query)),new mu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,cr.fromBase64String(n.resumeToken))}function Bv(n,e){const t=lo(e.snapshotVersion),r=lo(e.lastLimboFreeSnapshotVersion);let i;i=gm(e.target)?xv(n.Jt,e.target):ph(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:gl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Uv(n){const e=ib({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ev(e,e.limit,"L"):e}function jv(n,e){return new Vv(e.largestBatchId,Mv(n.Jt,e.overlayMutation))}function _b(n,e){const t=e.path.lastSegment();return[n,Xr(e.path.popLast()),t]}class nT{getBundleMetadata(e,t){return $v(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:$o(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return $v(e).put({bundleId:(r=t).id,createTime:lo(Jr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Hv(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Uv(i.bundledQuery),readTime:$o(i.readTime)};var i})}saveNamedQuery(e,t){return Hv(e).put({name:(r=t).name,readTime:lo(Jr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function $v(n){return $r(n,"bundles")}function Hv(n){return $r(n,"namedQueries")}class vp{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new vp(e,t.uid||"")}getOverlay(e,t){return El(e).get(_b(this.userId,t)).next(r=>r?jv(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new Vv(t,c);i.push(this.Xt(e,p))}),ge.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Xr(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(El(e).Qt("collectionPathOverlayIndex",p))}),ge.waitFor(u)}getOverlaysForCollection(e,t,r){const i=hp(),u=Xr(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return El(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const y of p){const b=jv(this.M,y);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=hp();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return El(e).Wt({index:"collectionGroupOverlayIndex",range:p},(y,b,A)=>{const M=jv(this.M,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):A.done()}).next(()=>u)}Xt(e,t){return El(e).put(function(r,i,u){const[c,p,y]=_b(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:_l(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function El(n){return $r(n,"documentOverlays")}class Ma{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Kn(e.integerValue));else if("doubleValue"in e){const r=Kn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),oh(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(cu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?pv(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):it()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function rT(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Gv(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=rT(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Ma.fe=new Ma;class vb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=Gv(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=Gv(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class iT{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class sT{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class vh{constructor(){this.De=new vb,this.Ce=new iT(this.De),this.xe=new sT(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class wl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new wl(this.indexId,this.documentKey,this.arrayValue,r)}}function Eh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Eb(n.arrayValue,e.arrayValue),0!==t?t:(t=Eb(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function Eb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class oT{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=gv(e);if(void 0!==t&&!this.Be(t))return!1;const r=$c(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class wh{constructor(){this.qe=new Om}addToCollectionParentIndex(e,t){return this.qe.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getFieldIndex(e,t){return ge.resolve(null)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class Om{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new On(Kt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new On(Kt.comparator)).toArray()}}const yu=new Uint8Array(0);class QA{constructor(e){this.user=e,this.Ge=new Om,this.Ke=new ml(t=>gl(t),(t,r)=>rs(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const u={collectionId:r,parent:Xr(i)};return qv(e).put(u)}return ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Dw(t),""],!1,!0);return qv(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(uo(c.parent))}return r})}addFieldIndex(e,t){const r=zv(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=zv(e),i=wp(e),u=Ep(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ep(e);let i=!0;const u=new Map;return ge.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=hn();return ge.forEach(u,(p,y)=>{var b;Fe("IndexedDbIndexManager",`Using index ${b=p,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Le=>`${Le.fieldPath}:${Le.kind}`).join(",")}`} to execute ${gl(t)}`);const A=function(Le,Ke){const ze=gv(Ke);if(void 0===ze)return null;for(const _t of sp(Le,ze.fieldPath))switch(_t.op){case"array-contains-any":return _t.value.arrayValue.values||[];case"array-contains":return[_t.value]}return null}(y,p),M=function(Le,Ke){const ze=new Map;for(const _t of $c(Ke))for(const ct of sp(Le,_t.fieldPath))switch(ct.op){case"==":case"in":ze.set(_t.fieldPath.canonicalString(),ct.value);break;case"not-in":case"!=":return ze.set(_t.fieldPath.canonicalString(),ct.value),Array.from(ze.values())}return null}(y,p),F=function(Le,Ke){const ze=[];let _t=!0;for(const Xt of $c(Ke)){let wn,_n=!0;for(const Yt of sp(Le,Xt.fieldPath)){let bn,Ns=!0;switch(Yt.op){case"<":case"<=":bn="nullValue"in(ct=Yt.value)?dv:"booleanValue"in ct?{booleanValue:!1}:"integerValue"in ct||"doubleValue"in ct?{doubleValue:NaN}:"timestampValue"in ct?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in ct?{stringValue:""}:"bytesValue"in ct?{bytesValue:""}:"referenceValue"in ct?jc(du.empty(),je.empty()):"geoPointValue"in ct?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in ct?{arrayValue:{}}:"mapValue"in ct?{mapValue:{}}:it();break;case"==":case"in":case">=":bn=Yt.value;break;case">":bn=Yt.value,Ns=!1;break;case"!=":case"not-in":bn=dv}Tw(wn,bn)===bn&&(wn=bn,_n=Ns)}if(null!==Le.startAt)for(let Yt=0;Yt<Le.orderBy.length;++Yt)if(Le.orderBy[Yt].field.isEqual(Xt.fieldPath)){const bn=Le.startAt.position[Yt];Tw(wn,bn)===bn&&(wn=bn,_n=Le.startAt.inclusive);break}if(void 0===wn)return null;ze.push(wn),_t&&(_t=_n)}var ct;return new Ia(ze,_t)}(y,p),U=function(Le,Ke){const ze=[];let _t=!0;for(const Xt of $c(Ke)){let wn,_n=!0;for(const Yt of sp(Le,Xt.fieldPath)){let bn,Ns=!0;switch(Yt.op){case">=":case">":bn="nullValue"in(ct=Yt.value)?{booleanValue:!1}:"booleanValue"in ct?{doubleValue:NaN}:"integerValue"in ct||"doubleValue"in ct?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in ct?{stringValue:""}:"stringValue"in ct?{bytesValue:""}:"bytesValue"in ct?jc(du.empty(),je.empty()):"referenceValue"in ct?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in ct?{arrayValue:{}}:"arrayValue"in ct?{mapValue:{}}:"mapValue"in ct?Iw:it(),Ns=!1;break;case"==":case"in":case"<=":bn=Yt.value;break;case"<":bn=Yt.value,Ns=!1;break;case"!=":case"not-in":bn=Iw}Cr(wn,bn)===bn&&(wn=bn,_n=Ns)}if(null!==Le.endAt)for(let Yt=0;Yt<Le.orderBy.length;++Yt)if(Le.orderBy[Yt].field.isEqual(Xt.fieldPath)){const bn=Le.endAt.position[Yt];Cr(wn,bn)===bn&&(wn=bn,_n=Le.endAt.inclusive);break}if(void 0===wn)return null;ze.push(wn),_t&&(_t=_n)}var ct;return new Ia(ze,_t)}(y,p),G=this.je(p,y,F),ne=this.je(p,y,U),we=this.We(p,y,M),Ze=this.ze(p.indexId,A,G,!!F&&F.inclusive,ne,!!U&&U.inclusive,we);return ge.forEach(Ze,Le=>r.Kt(Le,t.limit).next(Ke=>{Ke.forEach(ze=>{c=c.add(new je(uo(ze.documentKey)))})}))}).next(()=>c)}return ge.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,u,c,p){const y=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),b=y/(null!=t?t.length:1),A=[];for(let M=0;M<y;++M){const F=t?this.He(t[M/b]):yu,U=r?this.Je(e,F,r[M%b],i):this.Ye(e),G=u?this.Xe(e,F,u[M%b],c):this.Ye(e+1);A.push(...this.createRange(U,G,p.map(ne=>this.Je(e,F,ne,!0))))}return A}Je(e,t,r,i){const u=new wl(e,je.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new wl(e,je.empty(),t,r);return i?u.ke():u}Ye(e){return new wl(e,je.empty(),yu,yu)}getFieldIndex(e,t){const r=new oT(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{const c=u.filter(p=>r.$e(p));return c.sort((p,y)=>y.fields.length-p.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new vh;for(const i of $c(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);Ma.fe.Zt(u,c)}return r.Se()}He(e){const t=new vh;return Ma.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new vh);let u=0;for(const c of $c(e)){const p=r[u++];for(const y of i)if(this.tn(t,c.fieldPath)&&ah(p))i=this.en(i,c,p);else{const b=y.Ne(c.kind);Ma.fe.Zt(p,b)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const y=new vh;y.seed(p.Se()),Ma.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}tn(e,t){return!!e.filters.find(r=>r instanceof In&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=zv(e),i=wp(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return ge.forEach(u,p=>i.get([p.indexId,this.uid]).next(y=>{c.push(function(b,A){const M=A?new Da(A.sequenceNumber,new Ca($o(A.readTime),new je(uo(A.documentKey)),A.largestBatchId)):Da.empty(),F=b.fields.map(([U,G])=>new ip(Dr.fromServerFormat(U),G));return new rp(b.indexId,b.collectionGroup,F,M)}(p,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Wt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=zv(e),u=wp(e);return this.sn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ge.forEach(p,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:lo((F=r).readTime),documentKey:Xr(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?ge.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),ge.forEach(p,y=>this.rn(e,i,y).next(b=>{const A=this.on(u,y);return b.isEqual(A)?ge.resolve():this.un(e,u,b,A)}))))})}an(e,t,r){return Ep(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Xr(t.key.path)})}cn(e,t,r){return Ep(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Xr(t.key.path)])}rn(e,t,r){const i=Ep(e);let u=new On(Eh);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Xr(t.path)])},(c,p)=>{u=u.add(new wl(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}on(e,t){let r=new On(Eh);const i=this.Ze(t,e);if(null==i)return r;const u=gv(t);if(null!=u){const c=e.data.field(u.fieldPath);if(ah(c))for(const p of c.arrayValue.values||[])r=r.add(new wl(t.indexId,e.key,this.He(p),i))}else r=r.add(new wl(t.indexId,e.key,yu,i));return r}un(e,t,r,i){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(c,p,y,b,A){const M=c.getIterator(),F=p.getIterator();let U=pu(M),G=pu(F);for(;U||G;){let ne=!1,we=!1;if(U&&G){const Ze=y(U,G);Ze<0?we=!0:Ze>0&&(ne=!0)}else null!=U?we=!0:ne=!0;ne?(b(G),G=pu(F)):we?(A(U),U=pu(M)):(U=pu(M),G=pu(F))}}(r,i,Eh,c=>{u.push(this.an(e,t,c))},c=>{u.push(this.cn(e,t,c))}),ge.waitFor(u)}sn(e){let t=1;return wp(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>Eh(c,p)).filter((c,p,y)=>!p||0!==Eh(c,y[p-1]));const i=[];i.push(e);for(const c of r){const p=Eh(c,e),y=Eh(c,t);if(0===p)i[0]=e.ke();else if(p>0&&y<0)i.push(c),i.push(c.ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,""],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,""]));return u}}function qv(n){return $r(n,"collectionParents")}function Ep(n){return $r(n,"indexEntries")}function zv(n){return $r(n,"indexConfiguration")}function wp(n){return $r(n,"indexState")}const aT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ji{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ji(e,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function km(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.Wt({range:c},(A,M,F)=>(p++,F.delete()));u.push(y.next(()=>{Ct(1===p)}));const b=[];for(const A of t.mutations){const M=lb(e,A.key.path,t.batchId);u.push(i.delete(M)),b.push(A.key)}return ge.waitFor(u).next(()=>b)}function Pm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}ji.DEFAULT_COLLECTION_PERCENTILE=10,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ji.DEFAULT=new ji(41943040,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ji.DISABLED=new ji(-1,0,0);class Fm{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Fm(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bl(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=bh(e),c=bl(e);return c.add({}).next(p=>{Ct("number"==typeof p);const y=new Lv(p,t,r,i),b=function(F,U,G){const ne=G.baseMutations.map(Ze=>_l(F.Jt,Ze)),we=G.mutations.map(Ze=>_l(F.Jt,Ze));return{userId:U,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:ne,mutations:we}}(this.M,this.userId,y),A=[];let M=new On((F,U)=>Wt(F.canonicalString(),U.canonicalString()));for(const F of i){const U=lb(this.userId,F.key.path,p);M=M.add(F.key.path.popLast()),A.push(c.put(b)),A.push(u.put(U,cb))}return M.forEach(F=>{A.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.hn[p]=y.keys()}),ge.waitFor(A).next(()=>y)})}lookupMutationBatch(e,t){return bl(e).get(t).next(r=>r?(Ct(r.userId===this.userId),_h(this.M,r)):null)}ln(e,t){return this.hn[t]?ge.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return bl(e).Wt({index:"userMutationsIndex",range:i},(c,p,y)=>{p.userId===this.userId&&(Ct(p.batchId>=r),u=_h(this.M,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return bl(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bl(e).qt("userMutationsIndex",t).next(r=>r.map(i=>_h(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=yh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return bh(e).Wt({range:i},(c,p,y)=>{const[b,A,M]=c,F=uo(A);if(b===this.userId&&t.path.isEqual(F))return bl(e).get(M).next(U=>{if(!U)throw it();Ct(U.userId===this.userId),u.push(_h(this.M,U))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Wt);const i=[];return t.forEach(u=>{const c=yh(this.userId,u.path),p=IDBKeyRange.lowerBound(c),y=bh(e).Wt({range:p},(b,A,M)=>{const[F,U,G]=b,ne=uo(U);F===this.userId&&u.path.isEqual(ne)?r=r.add(G):M.done()});i.push(y)}),ge.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=yh(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new On(Wt);return bh(e).Wt({range:c},(y,b,A)=>{const[M,F,U]=y,G=uo(F);M===this.userId&&r.isPrefixOf(G)?G.length===i&&(p=p.add(U)):A.done()}).next(()=>this.fn(e,p))}fn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(bl(e).get(u).next(c=>{if(null===c)throw it();Ct(c.userId===this.userId),r.push(_h(this.M,c))}))}),ge.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return km(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),ge.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return bh(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const y=uo(u[1]);i.push(y)}else p.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return wb(e,this.userId,t)}_n(e){return bb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function wb(n,e,t){const r=yh(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return bh(n).Wt({range:u,jt:!0},(p,y,b)=>{const[A,M,F]=p;A===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function bl(n){return $r(n,"mutations")}function bh(n){return $r(n,"documentMutations")}function bb(n){return $r(n,"mutationQueues")}class Yc{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Yc(0)}static gn(){return new Yc(-1)}}class uT{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new Yc(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>vt.fromTimestamp(new br(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Dh(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Dh(e).Wt((c,p)=>{const y=Nm(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>ge.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Dh(e).Wt((r,i)=>{const u=Nm(i);t(u)})}yn(e){return Db(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}pn(e,t){return Db(e).put("targetGlobalKey",t)}In(e,t){return Dh(e).put(Bv(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=gl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Dh(e).Wt({range:i,index:"queryTargetsIndex"},(c,p,y)=>{const b=Nm(p);rs(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=co(e);return t.forEach(c=>{const p=Xr(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=co(e);return ge.forEach(t,u=>{const c=Xr(u.path);return ge.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=co(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=co(e);let u=hn();return i.Wt({range:r,jt:!0},(c,p,y)=>{const b=uo(c[1]),A=new je(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Xr(t.path),i=IDBKeyRange.bound([r],[Dw(r)],!1,!0);let u=0;return co(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,p],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return Dh(e).get(t).next(r=>r?Nm(r):null)}}function Dh(n){return $r(n,"targets")}function Db(n){return $r(n,"targetGlobal")}function co(n){return $r(n,"targetDocuments")}function Dl(n){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,ve.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==gb)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),Lm.apply(this,arguments)}function Wv([n,e],[t,r]){const i=Wt(n,t);return 0===i?Wt(e,r):i}class Cb{constructor(e){this.En=e,this.buffer=new On(Wv),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Wv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ib{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){vl(i)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Dl(i)}yield t.vn(e)}))}}class Tb{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(ns.A);const r=new Cb(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(aT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aT):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,u,c,p,y,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),mw()<=el.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${M} documents in `+(b-y)+`ms\nTotal Duration: ${b-A}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class lT{constructor(e,t){this.db=e,this.garbageCollector=new Tb(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return bp(e,r)}removeReference(e,t,r){return bp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return bp(e,t)}Mn(e,t){return function(r,i){let u=!1;return bb(r).zt(c=>wb(r,c,i).next(p=>(p&&(u=!0),ge.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.kn(e,(c,p)=>{if(p<=t){const y=this.Mn(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,vt.min()),co(e).delete([0,Xr(c.path)])))});i.push(y)}}).next(()=>ge.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return bp(e,t)}kn(e,t){const r=co(e);let i,u=ns.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:y,sequenceNumber:b})=>{0===c?(u!==ns.A&&t(new je(uo(i)),u),u=b,i=y):u=ns.A}).next(()=>{u!==ns.A&&t(new je(uo(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bp(n,e){return co(n).put((r=n.currentSequenceNumber,{targetId:0,path:Xr(e.path),sequenceNumber:r}));var r}class Sb{constructor(){this.changes=new ml(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cT{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ho(e).put(r)}removeEntry(e,t,r){return Ho(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Rm(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return Ho(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Dp(t))},(i,u)=>{r=this.Fn(t,u)}).next(()=>r)}$n(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return Ho(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Dp(t))},(i,u)=>{r={document:this.Fn(t,u),size:Pm(u)}}).next(()=>r)}getEntries(e,t){let r=Uo();return this.Bn(e,t,(i,u)=>{const c=this.Fn(i,u);r=r.insert(i,c)}).next(()=>r)}Ln(e,t){let r=Uo(),i=new fr(je.comparator);return this.Bn(e,t,(u,c)=>{const p=this.Fn(u,c);r=r.insert(u,p),i=i.insert(u,Pm(c))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return ge.resolve();let i=new On(Go);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(Dp(i.first()),Dp(i.last())),c=i.getIterator();let p=c.getNext();return Ho(e).Wt({index:"documentKeyIndex",range:u},(y,b,A)=>{const M=je.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&Go(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?A.Ut(Dp(p)):A.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Rm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ho(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=Uo();for(const y of c){const b=this.Fn(je.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=Uo();const c=Vm(t,r),p=Vm(t,Ca.max());return Ho(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(y,b,A)=>{const M=this.Fn(je.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&A.done()}).next(()=>u)}newChangeBuffer(e){return new dT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ab(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}On(e,t){return Ab(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function tT(n,e){let t;if(e.document)t=PI(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),i=$o(e.noDocument.readTime);t=Nn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=je.fromSegments(e.unknownDocument.path),i=$o(e.unknownDocument.version);t=Nn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new br(r[0],r[1]);return vt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Nn.newInvalidDocument(e)}}class dT extends Sb{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new ml(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new On((u,c)=>Wt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.qn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const y=_p(this.qn.M,c);i=i.add(u.path.popLast()),r+=Pm(y)-p.size,t.push(this.qn.addEntry(e,u,y))}else if(r-=p.size,this.trackRemovals){const y=_p(this.qn.M,c.convertToNoDocument(vt.min()));t.push(this.qn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.qn.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Ab(n){return $r(n,"remoteDocumentGlobal")}function Ho(n){return $r(n,"remoteDocumentsV14")}function Dp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Vm(n,e){const t=e.documentKey.path.toArray();return[n,Rm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Go(n,e){const t=n.path.length-e.path.length;return 0!==t?t:je.comparator(n,e)}class hT{constructor(e){this.M=e}kt(e,t,r,i){const u=new Mm("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ub,{unique:!0}),p.createObjectStore("documentMutations"),Bm(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=ge.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),Bm(e)),c=c.next(()=>function(p){const y=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store("mutations").qt().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ub,{unique:!0});const A=y.store("mutations"),M=b.map(F=>A.put(F));return ge.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Kn(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(u)))),r<7&&i>=7&&(c=c.next(()=>this.jn(u))),r<8&&i>=8&&(c=c.next(()=>this.Wn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.zn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:YI});y.createIndex("collectionPathOverlayIndex",QI,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",JI,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:db});y.createIndex("documentKeyIndex",$I),y.createIndex("collectionGroupIndex",HI)}(e)).next(()=>this.Hn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:zI}).createIndex("sequenceNumberIndex",WI,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:KI}).createIndex("documentKeyIndex",ZI,{unique:!1})}(e)})),c}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Pm(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>ge.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>ge.forEach(p,y=>{Ct(y.userId===u.userId);const b=_h(this.M,y);return km(e,u.userId,b).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,p)=>{const y=new Kt(c),b=[0,Xr(y)];u.push(t.get(b).next(A=>A?ge.resolve():t.put({targetId:0,path:Xr(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ge.waitFor(u))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:hb});const r=t.store("collectionParents"),i=new Om,u=c=>{if(i.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:Xr(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const y=new Kt(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,y],b)=>{const A=uo(p);return u(A.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=Nm(i),c=Bv(this.M,u);return t.put(c)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),y=(b=c,b.document?new je(Kt.fromString(b.document.name).popFirst(5)):b.noDocument?je.fromSegments(b.noDocument.path):b.unknownDocument?je.fromSegments(b.unknownDocument.path):it()).path.toArray();var b;const A={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(A))}).next(()=>ge.waitFor(i))}}function Bm(n){n.createObjectStore("targetDocuments",{keyPath:Nv}).createIndex("documentTargetsIndex",qI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",GI,{unique:!0}),n.createObjectStore("targetGlobal")}const Qc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kv{constructor(e,t,r,i,u,c,p,y,b,A,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=u,this.window=c,this.document=p,this.Yn=b,this.Xn=A,this.Zn=M,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=F=>Promise.resolve(),!Kv.vt())throw new Re(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lT(this,i),this.cs=t+"main",this.M=new eT(y),this.hs=new jo(this.cs,this.Zn,new hT(this.M)),this.ls=new uT(this.referenceDelegate,this.M),this.fs=new cT(this.M),this.ds=new nT,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===A&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(le.FAILED_PRECONDITION,Qc);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new ns(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Um(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(vl(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Cp(e).get("owner").next(t=>ge.resolve(this.bs(t)))}Ps(e){return Um(e).delete(this.clientId)}Vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=$r(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ss(u,18e5),p=u.filter(y=>-1===c.indexOf(y));return ge.forEach(p,y=>i.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?ge.resolve(!0):Cp(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Re(le.FAILED_PRECONDITION,Qc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Um(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new yb(t,ns.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Um(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Fm.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new QA(e)}getDocumentOverlayCache(e){return vp.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.Zn)?XI:13===c?Ov:12===c?pb:11===c?fb:void it();var c;let p;return this.hs.runTransaction(e,i,u,y=>(p=new yb(y,this.ts?this.ts.next():ns.A),"readwrite-primary"===t?this.Ts(p).next(b=>!!b||this.Es(p)).next(b=>{if(!b)throw wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Re(le.FAILED_PRECONDITION,gb);return r(p)}).next(b=>this.Rs(p).next(()=>b)):this.Fs(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}Fs(e){return Cp(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(le.FAILED_PRECONDITION,Qc)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cp(e).put("owner",t)}static vt(){return jo.vt()}As(e){const t=Cp(e);return t.get("owner").next(r=>this.bs(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ge.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(wr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,Ht.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return wr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){wr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Cp(n){return $r(n,"owner")}function Um(n){return $r(n,"clientMetadata")}function Ch(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class jm{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):uh(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new je(t)).next(r=>{let i=Iv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let u=Iv();return this.indexManager.getCollectionParents(e,i).next(c=>ge.forEach(c,p=>{const y=(b=t,A=p.child(i),new Sa(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.Ws(e,y,r).next(b=>{b.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const y=p.key;let b=i.get(y);null==b&&(b=Nn.newInvalidDocument(y),i=i.insert(y,b)),bm(p,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(y))}}).next(()=>(i.forEach((u,c)=>{Em(t,c)||(i=i.remove(u))}),i))}}class Zv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=hn(),i=hn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new Zv(e,t.fromCache,r,i)}}class Mb{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(vt.min())?this.Zs(e,t):this.Xs.qs(e,i).next(u=>{const c=this.ti(t,u);return(mm(t)||op(t))&&this.ei(t.limitType,c,i,r)?this.Zs(e,t):(mw()<=el.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vm(t)),this.Xs.Ks(e,t,Aw(r,-1)).next(p=>(c.forEach(y=>{p=p.insert(y.key,y)}),p)))});var u}ti(e,t){let r=new On(Nw(e));return t.forEach((i,u)=>{Em(e,u)&&(r=r.add(u))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Zs(e,t){return mw()<=el.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",vm(t)),this.Xs.Ks(e,t,Ca.min())}}class xb{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new fr(Wt),this.ii=new ml(u=>gl(u),rs),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new jm(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function Yv(n,e,t,r){return new xb(n,e,t,r)}function $m(n,e){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,ve.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(u=>(i=u,t.ui(e),t.$s.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let y=hn();for(const b of i){c.push(b.batchId);for(const A of b.mutations)y=y.add(A.key)}for(const b of u){p.push(b.batchId);for(const A of b.mutations)y=y.add(A.key)}return t.ai.qs(r,y).next(b=>({ci:b,removedBatchIds:c,addedBatchIds:p}))})})}),Hm.apply(this,arguments)}function fT(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.oi.newChangeBuffer({trackRemovals:!0});return function(c,p,y,b){const A=y.batch,M=A.keys();let F=ge.resolve();return M.forEach(U=>{F=F.next(()=>b.getEntry(p,U)).next(G=>{const ne=y.docVersions.get(U);Ct(null!==ne),G.version.compareTo(ne)<0&&(A.applyToRemoteDocument(G,y),G.isValidDocument()&&(G.setReadTime(y.commitVersion),b.addEntry(G)))})}),F.next(()=>c.$s.removeMutationBatch(p,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function Rb(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function JA(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const p=[];e.targetChanges.forEach((b,A)=>{const M=i.get(A);if(!M)return;p.push(t.ls.removeMatchingKeys(u,b.removedDocuments,A).next(()=>t.ls.addMatchingKeys(u,b.addedDocuments,A)));let F=M.withSequenceNumber(u.currentSequenceNumber);var U,G,ne;e.targetMismatches.has(A)?F=F.withResumeToken(cr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(A,F),G=F,ne=b,(0===(U=M).resumeToken.approximateByteSize()||G.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0)&&p.push(t.ls.updateTargetData(u,F))});let y=Uo();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),p.push(Gm(u,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(vt.min())){const b=t.ls.getLastRemoteSnapshotVersion(u).next(A=>t.ls.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(b)}return ge.waitFor(p).next(()=>c.apply(u)).next(()=>t.ai.Gs(u,y)).next(()=>y)}).then(u=>(t.si=i,u))}function Gm(n,e,t){let r=hn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=Uo();return t.forEach((c,p)=>{const y=i.get(c);p.isNoDocument()&&p.version.isEqual(vt.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):Fe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",p.version)}),u})}function Qv(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function Jc(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(u=>u?(i=u,ge.resolve(i)):t.ls.allocateTargetId(r).next(c=>(i=new mu(e,c,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function Cl(n,e,t){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=r.si.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!vl(c))throw c;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),Ip.apply(this,arguments)}function qm(n,e,t){const r=qe(n);let i=vt.min(),u=hn();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,b){const A=qe(p),M=A.ii.get(b);return void 0!==M?ge.resolve(A.si.get(M)):A.ls.getTargetData(y,b)}(r,c,Is(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(c,p.targetId).next(y=>{u=y})}).next(()=>r.ni.Ks(c,e,t?i:vt.min(),t?u:hn())).next(p=>(kb(r,bv(e),p),{documents:p,hi:u})))}function Nb(n,e){const t=qe(n),r=qe(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function Ob(n,e){const t=qe(n),r=t.ri.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,Aw(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(kb(t,e,i),i))}function kb(n,e,t){let r=vt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ri.set(e,r)}function Tp(){return Tp=(0,ve.Z)(function*(n,e,t,r){const i=qe(n);let u=hn(),c=Uo();for(const b of t){const A=e.li(b.metadata.name);b.document&&(u=u.add(A));const M=e.fi(b);M.setReadTime(e.di(b.metadata.readTime)),c=c.insert(A,M)}const p=i.oi.newChangeBuffer({trackRemovals:!0}),y=yield Jc(i,(b=r,Is(fu(Kt.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>Gm(b,p,c).next(A=>(p.apply(b),A)).next(A=>i.ls.removeMatchingKeysForTargetId(b,y.targetId).next(()=>i.ls.addMatchingKeys(b,u,y.targetId)).next(()=>i.ai.Gs(b,A)).next(()=>A)))}),Tp.apply(this,arguments)}function Fb(n,e){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,ve.Z)(function*(n,e,t=hn()){const r=yield Jc(n,Is(Uv(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Jr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.ds.saveNamedQuery(u,e);const p=r.withResumeToken(cr.EMPTY_BYTE_STRING,c);return i.si=i.si.insert(p.targetId,p),i.ls.updateTargetData(u,p).next(()=>i.ls.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.ls.addMatchingKeys(u,t,r.targetId)).next(()=>i.ds.saveNamedQuery(u,e))})}),Jv.apply(this,arguments)}class Lb{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return ge.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Jr(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:Uv(r.bundledQuery),readTime:Jr(r.readTime)}),ge.resolve();var r}}class Vb{constructor(){this.overlays=new fr(je.comparator),this.mi=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.mi.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const i=hp(),u=t.length+1,c=new je(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new fr((b,A)=>b-A);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=hp(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const p=hp(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,A)=>p.set(b,A)),!(p.size()>=i)););return ge.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Vv(t,r));let u=this.mi.get(t);void 0===u&&(u=hn(),this.mi.set(t,u)),this.mi.set(t,u.add(r.key))}}class Xv{constructor(){this.gi=new On(Hr.yi),this.pi=new On(Hr.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Hr(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Hr(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new je(new Kt([])),r=new Hr(t,e),i=new Hr(t,e+1),u=[];return this.pi.forEachInRange([r,i],c=>{this.Ei(c),u.push(c.key)}),u}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new je(new Kt([])),r=new Hr(t,e),i=new Hr(t,e+1);let u=hn();return this.pi.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Hr(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Hr{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return je.comparator(e.key,t.key)||Wt(e.Vi,t.Vi)}static Ii(e,t){return Wt(e.Vi,t.Vi)||je.comparator(e.key,t.key)}}class Bb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new On(Hr.yi)}checkEmpty(e){return ge.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const u=this.vi;this.vi++;const c=new Lv(u,t,r,i);this.$s.push(c);for(const p of i)this.Si=this.Si.add(new Hr(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(e,t){return ge.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),u=i<0?0:i;return ge.resolve(this.$s.length>u?this.$s[u]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return ge.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Hr(t,0),i=new Hr(t,Number.POSITIVE_INFINITY),u=[];return this.Si.forEachInRange([r,i],c=>{const p=this.Di(c.Vi);u.push(p)}),ge.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Wt);return t.forEach(i=>{const u=new Hr(i,0),c=new Hr(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([u,c],p=>{r=r.add(p.Vi)})}),ge.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const c=new Hr(new je(u),0);let p=new On(Wt);return this.Si.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(y.Vi)),!0)},c),ge.resolve(this.xi(p))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return ge.forEach(t.mutations,i=>{const u=new Hr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Hr(t,0),i=this.Si.firstAfterOrEqual(r);return ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ge.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class pT{constructor(e){this.ki=e,this.docs=new fr(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=Uo();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Nn.newInvalidDocument(i))}),ge.resolve(r)}getAllFromCollection(e,t,r){let i=Uo();const u=new je(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:y}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||EI(vI(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return ge.resolve(i)}getAllFromCollectionGroup(e,t,r,i){it()}Mi(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ub(this)}getSize(e){return ge.resolve(this.size)}}class Ub extends Sb{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class gT{constructor(e){this.persistence=e,this.Oi=new ml(t=>gl(t),rs),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Xv,this.targetCount=0,this.Bi=Yc.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),ge.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Yc(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.In(t),ge.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Oi.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Oi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),ge.waitFor(u).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),ge.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.$i.containsKey(t))}}class $i{constructor(e,t){this.Li={},this.overlays={},this.ts=new ns(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new gT(this),this.indexManager=new wh,this.fs=new pT(r=>this.referenceDelegate.Ui(r)),this.M=new eT(t),this.ds=new Lb(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new Bb(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new Ih(this.ts.next());return this.referenceDelegate.qi(),r(i).next(u=>this.referenceDelegate.Gi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ki(e,t){return ge.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class Ih extends kv{constructor(e){super(),this.currentSequenceNumber=e}}class e0{constructor(e){this.persistence=e,this.Qi=new Xv,this.ji=null}static Wi(e){return new e0(e)}get zi(){if(this.ji)return this.ji;throw it()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.zi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.zi,r=>{const i=je.fromPath(r);return this.Hi(e,i).next(u=>{u||t.removeEntry(i,vt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return ge.or([()=>ge.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function jb(n,e){return`firestore_clients_${n}_${e}`}function mT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Xc(n,e){return`firestore_targets_${n}_${e}`}class zm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Re(i.error.code,i.error.message))),c?new zm(e,t,i.state,u):(wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ed{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Re(r.error.code,r.error.message))),u?new ed(e,r.state,i):(wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Im();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=dm(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new Wm(e,u):(wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Km{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Km(t.clientId,t.onlineState):(wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class t0{constructor(){this.activeTargetIds=Im()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n0{constructor(e,t,r,i,u){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new fr(Wt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=jb(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new t0),this.ar=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const u=e.getItem(jb(e.persistenceKey,i));if(u){const c=Wm.Ji(i,u);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Xc(this.persistenceKey,e));if(r){const i=ed.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xc(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(u){let c=ns.A;if(null!=u)try{const p=JSON.parse(u);Ct("number"==typeof p),c=p}catch(p){wr("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==ns.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new zm(this.currentUser,e,t,r),u=mT(this.persistenceKey,this.currentUser,e);this.setItem(u,i.Yi())}pr(e){const t=mT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=Xc(this.persistenceKey,e),u=new ed(e,t,r);this.setItem(i,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Wm.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return zm.Ji(new jr(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return ed.Ji(i,t)}wr(e){return Km.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),u=this.gr(r),c=[],p=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.Or(c,p).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Im();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Zm{constructor(){this.Fr=new t0,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new t0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $b{Br(e){}shutdown(){}}class r0{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ym={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class s0{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class XA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,u){const c=this.oo(e,t);Fe("RestConnection","Sending: ",c,r);const p={};return this.uo(p,i,u),this.ao(e,c,p,r).then(y=>(Fe("RestConnection","Received: ",y),y),y=>{throw sh("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}co(e,t,r,i,u){return this.ro(e,t,r,i,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+cl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}oo(e,t){return`${this.so}/v1/${t}:${Ym[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((u,c)=>{const p=new zA;p.listenOnce(pw.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case ov.NO_ERROR:const b=p.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case ov.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),c(new Re(le.DEADLINE_EXCEEDED,"Request time out"));break;case ov.HTTP_ERROR:const A=p.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",p.getResponseText()),A>0){const M=p.getResponseJson().error;if(M&&M.status&&M.message){const F=function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(G)>=0?G:le.UNKNOWN}(M.status);c(new Re(F,M.message))}else c(new Re(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Re(le.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);p.send(t,"POST",y,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=fw(),c=lI(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new dI({})),this.uo(p.initMessageHeaders,t,r),(0,Ht.uI)()||(0,Ht.b$)()||(0,Ht.d)()||(0,Ht.w1)()||(0,Ht.Mn)()||(0,Ht.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");Fe("Connection","Creating WebChannel: "+y,p);const b=u.createWebChannel(y,p);let A=!1,M=!1;const F=new s0({jr:G=>{M?Fe("Connection","Not sending because WebChannel is closed:",G):(A||(Fe("Connection","Opening WebChannel transport."),b.open(),A=!0),Fe("Connection","WebChannel sending:",G),b.send(G))},Wr:()=>b.close()}),U=(G,ne,we)=>{G.listen(ne,Ze=>{try{we(Ze)}catch(Le){setTimeout(()=>{throw Le},0)}})};return U(b,om.EventType.OPEN,()=>{M||Fe("Connection","WebChannel transport opened.")}),U(b,om.EventType.CLOSE,()=>{M||(M=!0,Fe("Connection","WebChannel transport closed"),F.eo())}),U(b,om.EventType.ERROR,G=>{M||(M=!0,sh("Connection","WebChannel transport errored:",G),F.eo(new Re(le.UNAVAILABLE,"The operation could not be completed")))}),U(b,om.EventType.MESSAGE,G=>{var ne;if(!M){const we=G.data[0];Ct(!!we);const Ze=we,Le=Ze.error||(null===(ne=Ze[0])||void 0===ne?void 0:ne.error);if(Le){Fe("Connection","WebChannel received error:",Le);const Ke=Le.status;let ze=function(ct){const Xt=hr[ct];if(void 0!==Xt)return Dt(Xt)}(Ke),_t=Le.message;void 0===ze&&(ze=le.INTERNAL,_t="Unknown error status: "+Ke+" with message "+Le.message),M=!0,F.eo(new Re(ze,_t)),b.close()}else Fe("Connection","WebChannel received:",we),F.no(we)}}),U(c,cI.STAT_EVENT,G=>{G.stat===av.PROXY?Fe("Connection","Detected buffering proxy"):G.stat===av.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.Zr()},0),F}}function o0(){return"undefined"!=typeof window?window:null}function Qm(){return"undefined"!=typeof document?document:null}function Th(n){return new gp(n,!0)}class Sh{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class a0{constructor(e,t,r,i,u,c,p,y){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Sh(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ve.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ve.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Re(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ve.Z)(function*(){e.state=0,e.start()}))}qo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yT extends a0{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function rb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:it(),i=e.targetChange.targetIds||[],u=function(y,b){return y.N?(Ct(void 0===b||"string"==typeof b),cr.fromBase64String(b||"")):(Ct(void 0===b||b instanceof Uint8Array),cr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const b=void 0===y.code?le.UNKNOWN:Dt(y.code);return new Re(b,y.message||"")}(c);t=new Jw(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Aa(n,r.document.name),u=Jr(r.document.updateTime),c=new ui({mapValue:{fields:r.document.fields}}),p=Nn.newFoundDocument(i,u,c);t=new yl(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Aa(n,r.document),u=r.readTime?Jr(r.readTime):vt.min(),c=Nn.newNoDocument(i,u);t=new yl([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Aa(n,r.document);t=new yl([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,u=new ZA(r.count||0);t=new Qw(r.targetId,u)}}var y;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return vt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?Jr(u.readTime):vt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=mp(this.M),t.addTarget=function(i,u){let c;const p=u.target;return c=gm(p)?{documents:xv(i,p)}:{query:ph(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=tb(i,u.resumeToken):u.snapshotVersion.compareTo(vt.min())>0&&(c.readTime=gu(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function LI(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=mp(this.M),t.removeTarget=e,this.Oo(t)}}class u0 extends a0{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function FI(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let u=Jr(r.updateTime?r.updateTime:i);return u.isEqual(vt.min())&&(u=Jr(i)),new $w(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.Jo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=mp(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>_l(this.M,r))};this.Oo(t)}}class l0 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.ro(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(le.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(le.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class eM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(wr(t),this.su=!1):Fe("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class _T{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(p=>{r.enqueueAndForget((0,ve.Z)(function*(){var y;_u(c)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,ve.Z)(function*(b){const A=qe(b);A.lu.add(4),yield td(A),A._u.set("Unknown"),A.lu.delete(4),yield Sp(A)}),function(b){return y.apply(this,arguments)})(c))}))}),this._u=new eM(r,i)}}function Sp(n){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,ve.Z)(function*(n){if(_u(n))for(const e of n.fu)yield e(!0)}),Jm.apply(this,arguments)}function td(n){return c0.apply(this,arguments)}function c0(){return c0=(0,ve.Z)(function*(n){for(const e of n.fu)yield e(!1)}),c0.apply(this,arguments)}function Ap(n,e){const t=qe(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),h0(t)?Xm(t):Mh(t).Co()&&d0(t,e))}function Ah(n,e){const t=qe(n),r=Mh(t);t.hu.delete(e),r.Co()&&Hb(t,e),0===t.hu.size&&(r.Co()?r.ko():_u(t)&&t._u.set("Unknown"))}function d0(n,e){n.wu.Z(e.targetId),Mh(n).Qo(e)}function Hb(n,e){n.wu.Z(e),Mh(n).jo(e)}function Xm(n){n.wu=new Tm({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),Mh(n).start(),n._u.iu()}function h0(n){return _u(n)&&!Mh(n).Do()&&n.hu.size>0}function _u(n){return 0===qe(n).lu.size}function f0(n){n.wu=void 0}function Gb(n){return ey.apply(this,arguments)}function ey(){return ey=(0,ve.Z)(function*(n){n.hu.forEach((e,t)=>{d0(n,e)})}),ey.apply(this,arguments)}function vT(n,e){return p0.apply(this,arguments)}function p0(){return p0=(0,ve.Z)(function*(n,e){f0(n),h0(n)?(n._u.uu(e),Xm(n)):n._u.set("Unknown")}),p0.apply(this,arguments)}function tM(n,e,t){return ty.apply(this,arguments)}function ty(){return ty=(0,ve.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Jw&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i.hu.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.hu.delete(p),i.wu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield g0(n,r)}else if(e instanceof yl?n.wu.ut(e):e instanceof Qw?n.wu._t(e):n.wu.ht(e),!t.isEqual(vt.min()))try{const r=yield Rb(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.wu.yt(u);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=i.hu.get(y);b&&i.hu.set(y,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const y=i.hu.get(p);if(!y)return;i.hu.set(p,y.withResumeToken(cr.EMPTY_BYTE_STRING,y.snapshotVersion)),Hb(i,p);const b=new mu(y.target,p,1,y.sequenceNumber);d0(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield g0(n,r)}var r}),ty.apply(this,arguments)}function g0(n,e,t){return qb.apply(this,arguments)}function qb(){return qb=(0,ve.Z)(function*(n,e,t){if(!vl(e))throw e;n.lu.add(1),yield td(n),n._u.set("Offline"),t||(t=()=>Rb(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Sp(n)}))}),qb.apply(this,arguments)}function ET(n,e){return e().catch(t=>g0(n,t,e))}function Mp(n){return zb.apply(this,arguments)}function zb(){return zb=(0,ve.Z)(function*(n){const e=qe(n),t=xa(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;nM(e);)try{const i=yield Qv(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,rM(e,i)}catch(i){yield g0(e,i)}wT(e)&&xp(e)}),zb.apply(this,arguments)}function nM(n){return _u(n)&&n.cu.length<10}function rM(n,e){n.cu.push(e);const t=xa(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function wT(n){return _u(n)&&!xa(n).Do()&&n.cu.length>0}function xp(n){xa(n).start()}function iM(n){return ny.apply(this,arguments)}function ny(){return ny=(0,ve.Z)(function*(n){xa(n).Xo()}),ny.apply(this,arguments)}function m0(n){return ry.apply(this,arguments)}function ry(){return ry=(0,ve.Z)(function*(n){const e=xa(n);for(const t of n.cu)e.Ho(t.mutations)}),ry.apply(this,arguments)}function Wb(n,e,t){return Kb.apply(this,arguments)}function Kb(){return Kb=(0,ve.Z)(function*(n,e,t){const r=n.cu.shift(),i=xm.from(r,e,t);yield ET(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Mp(n)}),Kb.apply(this,arguments)}function y0(n,e){return iy.apply(this,arguments)}function iy(){return iy=(0,ve.Z)(function*(n,e){var t;e&&xa(n).zo&&(yield(t=(0,ve.Z)(function*(r,i){if(xI(u=i.code)&&u!==le.ABORTED){const c=r.cu.shift();xa(r).No(),yield ET(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Mp(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),wT(n)&&xp(n)}),iy.apply(this,arguments)}function _0(n,e){return sy.apply(this,arguments)}function sy(){return sy=(0,ve.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=_u(t);t.lu.add(3),yield td(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Sp(t)}),sy.apply(this,arguments)}function Zb(n,e){return oy.apply(this,arguments)}function oy(){return oy=(0,ve.Z)(function*(n,e){const t=qe(n);e?(t.lu.delete(2),yield Sp(t)):e||(t.lu.add(2),yield td(t),t._u.set("Unknown"))}),oy.apply(this,arguments)}function Mh(n){return n.mu||(n.mu=function(e,t,r){const i=qe(e);return i.tu(),new yT(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:Gb.bind(null,n),Jr:vT.bind(null,n),Ko:tM.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.mu.No(),h0(n)?Xm(n):n._u.set("Unknown")):(yield n.mu.stop(),f0(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function xa(n){return n.gu||(n.gu=function(e,t,r){const i=qe(e);return i.tu(),new u0(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:iM.bind(null,n),Jr:y0.bind(null,n),Yo:m0.bind(null,n),Jo:Wb.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.gu.No(),yield Mp(n)):(yield n.gu.stop(),n.cu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class v0{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new v0(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rp(n,e){if(wr("AsyncQueue",`${e}: ${n}`),vl(n))return new Re(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Np{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Iv(),this.sortedSet=new fr(this.comparator)}static emptySet(e){return new Np(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Np)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Np;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class bT{constructor(){this.yu=new fr(je.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):it():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class xh{constructor(e,t,r,i,u,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new xh(e,t,Np.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class DT{constructor(){this.Iu=void 0,this.listeners=[]}}class CT{constructor(){this.queries=new ml(e=>wv(e),lh),this.onlineState="Unknown",this.Tu=new Set}}function Yb(n,e){return E0.apply(this,arguments)}function E0(){return E0=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new DT),i)try{u.Iu=yield t.onListen(r)}catch(c){const p=Rp(c,`Initialization of query '${vm(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&kp(t)}),E0.apply(this,arguments)}function Op(n,e){return w0.apply(this,arguments)}function w0(){return w0=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),w0.apply(this,arguments)}function qo(n,e){const t=qe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Au(i)&&(r=!0);c.Iu=i}}r&&kp(t)}function IT(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function kp(n){n.Tu.forEach(e=>{e.next()})}class b0{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new xh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=xh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class TT{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class ay{constructor(e){this.M=e}li(e){return Aa(this.M,e)}fi(e){return e.metadata.exists?PI(this.M,e.document,!1):Nn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Jr(e)}}class Qb{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=D0(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Kt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new ay(this.M);for(const i of e)if(i.metadata.queries){const u=r.li(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||hn()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function Pb(n,e,t,r){return Tp.apply(this,arguments)}(e.localStore,new ay(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield Fb(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function D0(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Jb{constructor(e){this.key=e}}class C0{constructor(e){this.key=e}}class I0{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=hn(),this.mutatedKeys=hn(),this.Lu=Nw(e),this.Uu=new Np(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new bT,i=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const y=mm(this.query)&&i.size===this.query.limit?i.last():null,b=op(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,M)=>{const F=i.get(A),U=Em(this.query,M)?M:null,G=!!F&&this.mutatedKeys.has(F.key),ne=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let we=!1;F&&U?F.data.isEqual(U.data)?G!==ne&&(r.track({type:3,doc:U}),we=!0):this.Qu(F,U)||(r.track({type:2,doc:U}),we=!0,(y&&this.Lu(U,y)>0||b&&this.Lu(U,b)<0)&&(p=!0)):!F&&U?(r.track({type:0,doc:U}),we=!0):F&&!U&&(r.track({type:1,doc:F}),we=!0,(y||b)&&(p=!0)),we&&(U?(c=c.add(U),u=ne?u.add(A):u.delete(A)):(c=c.delete(A),u=u.delete(A)))}),mm(this.query)||op(this.query))for(;c.size>this.query.limit;){const A=mm(this.query)?c.last():c.first();c=c.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Uu:c,Ku:r,ei:p,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Ku.pu();u.sort((b,A)=>function(M,F){const U=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return U(M)-U(F)}(b.type,A.type)||this.Lu(b.doc,A.doc)),this.ju(r);const c=t?this.Wu():[],p=0===this.Bu.size&&this.current?1:0,y=p!==this.$u;return this.$u=p,0!==u.length||y?{snapshot:new xh(this.query,e.Uu,i,u,e.mutatedKeys,0===p,y,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new bT,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=hn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new C0(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new Jb(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=hn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return xh.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class ST{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class AT{constructor(e){this.key=e,this.Xu=!1}}class T0{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Zu={},this.ta=new ml(p=>wv(p),lh),this.ea=new Map,this.na=new Set,this.sa=new fr(je.comparator),this.ia=new Map,this.ra=new Xv,this.oa={},this.ua=new Map,this.aa=Yc.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function zo(n,e){return S0.apply(this,arguments)}function S0(){return S0=(0,ve.Z)(function*(n,e){const t=lD(n);let r,i;const u=t.ta.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.Yu();else{const c=yield Jc(t.localStore,Is(e));t.isPrimaryClient&&Ap(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Xb(t,e,r,"current"===p)}return i}),S0.apply(this,arguments)}function Xb(n,e,t,r){return A0.apply(this,arguments)}function A0(){return A0=(0,ve.Z)(function*(n,e,t,r){n.ha=(A,M,F)=>{return(U=(0,ve.Z)(function*(G,ne,we,Ze){let Le=ne.view.Gu(we);Le.ei&&(Le=yield qm(G.localStore,ne.query,!1).then(({documents:_t})=>ne.view.Gu(_t,Le)));const Ke=Ze&&Ze.targetChanges.get(ne.targetId),ze=ne.view.applyChanges(Le,G.isPrimaryClient,Ke);return oD(G,ne.targetId,ze.zu),ze.snapshot}),function(G,ne,we,Ze){return U.apply(this,arguments)})(n,A,M,F);var U};const i=yield qm(n.localStore,e,!0),u=new I0(e,i.hi),c=u.Gu(i.documents),p=pp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,p);oD(n,t,y.zu);const b=new ST(e,t,u);return n.ta.set(e,b),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),y.snapshot}),A0.apply(this,arguments)}function eD(n,e){return M0.apply(this,arguments)}function M0(){return M0=(0,ve.Z)(function*(n,e){const t=qe(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(u=>!lh(u,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Cl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Ah(t.remoteStore,r.targetId),Rh(t,r.targetId)}).catch(Dl))):(Rh(t,r.targetId),yield Cl(t.localStore,r.targetId,!0))}),M0.apply(this,arguments)}function uy(){return uy=(0,ve.Z)(function*(n,e,t){const r=cD(n);try{const i=yield function(u,c){const p=qe(u),y=br.now(),b=c.reduce((M,F)=>M.add(F.key),hn());let A;return p.persistence.runTransaction("Locally write mutations","readwrite",M=>p.ai.qs(M,b).next(F=>{A=F;const U=[];for(const G of c){const ne=Gw(G,A.get(G.key));null!=ne&&U.push(new Ts(G.key,ne,Sw(ne.value.mapValue),dr.exists(!0)))}return p.$s.addMutationBatch(M,y,U,c)})).then(M=>(M.applyToLocalDocumentSet(A),{batchId:M.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let y=u.oa[u.currentUser.toKey()];y||(y=new fr(Wt)),y=y.insert(c,p),u.oa[u.currentUser.toKey()]=y}(r,i.batchId,t),yield vu(r,i.changes),yield Mp(r.remoteStore)}catch(i){const u=Rp(i,"Failed to persist write");t.reject(u)}}),uy.apply(this,arguments)}function tD(n,e){return nD.apply(this,arguments)}function nD(){return nD=(0,ve.Z)(function*(n,e){const t=qe(n);try{const r=yield JA(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.ia.get(u);c&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Ct(c.Xu):i.removedDocuments.size>0&&(Ct(c.Xu),c.Xu=!1))}),yield vu(t,r,e)}catch(r){yield Dl(r)}}),nD.apply(this,arguments)}function x0(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((u,c)=>{const p=c.view.Eu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=qe(u);p.onlineState=c;let y=!1;p.queries.forEach((b,A)=>{for(const M of A.listeners)M.Eu(c)&&(y=!0)}),y&&kp(p)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rD(n,e,t){return R0.apply(this,arguments)}function R0(){return R0=(0,ve.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),u=i&&i.key;if(u){let c=new fr(je.comparator);c=c.insert(u,Nn.newNoDocument(u,vt.min()));const p=hn().add(u),y=new fp(vt.min(),new Map,new On(Wt),c,p);yield tD(r,y),r.sa=r.sa.remove(u),r.ia.delete(e),hy(r)}else yield Cl(r.localStore,e,!1).then(()=>Rh(r,e,t)).catch(Dl)}),R0.apply(this,arguments)}function xT(n,e){return ly.apply(this,arguments)}function ly(){return ly=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield fT(t.localStore,e);dy(t,r,null),cy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield vu(t,i)}catch(i){yield Dl(i)}}),ly.apply(this,arguments)}function N0(n,e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,ve.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(u,c){const p=qe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.$s.lookupMutationBatch(y,c).next(A=>(Ct(null!==A),b=A.keys(),p.$s.removeMutationBatch(y,A))).next(()=>p.$s.performConsistencyCheck(y)).next(()=>p.ai.qs(y,b))})}(r.localStore,e);dy(r,e,t),cy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield vu(r,i)}catch(i){yield Dl(i)}}),Pp.apply(this,arguments)}function O0(){return O0=(0,ve.Z)(function*(n,e){const t=qe(n);_u(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=qe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.$s.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=Rp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),O0.apply(this,arguments)}function cy(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function dy(n,e,t){const r=qe(n);let i=r.oa[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function Rh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||sD(n,r)})}function sD(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(Ah(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),hy(n))}function oD(n,e,t){for(const r of t)r instanceof Jb?(n.ra.addReference(r.key,e),sM(n,r)):r instanceof C0?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||sD(n,r.key)):it()}function sM(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.na.add(r),hy(n))}function hy(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new je(Kt.fromString(e)),r=n.aa.next();n.ia.set(r,new AT(t)),n.sa=n.sa.insert(t,r),Ap(n.remoteStore,new mu(Is(fu(t.path)),r,2,ns.A))}}function vu(n,e,t){return k0.apply(this,arguments)}function k0(){return k0=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=[],u=[],c=[];var p;r.ta.isEmpty()||(r.ta.forEach((p,y)=>{c.push(r.ha(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),i.push(b);const A=Zv.Js(y.targetId,b);u.push(A)}}))}),yield Promise.all(c),r.Zu.Ko(i),yield(p=(0,ve.Z)(function*(y,b){const A=qe(y);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ge.forEach(b,F=>ge.forEach(F.zs,U=>A.persistence.referenceDelegate.addReference(M,F.targetId,U)).next(()=>ge.forEach(F.Hs,U=>A.persistence.referenceDelegate.removeReference(M,F.targetId,U)))))}catch(M){if(!vl(M))throw M;Fe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const U=A.si.get(F),ne=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);A.si=A.si.insert(F,ne)}}}),function(y,b){return p.apply(this,arguments)})(r.localStore,u))}),k0.apply(this,arguments)}function RT(n,e){return aD.apply(this,arguments)}function aD(){return aD=(0,ve.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield $m(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(c=>{c.forEach(p=>{p.reject(new Re(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield vu(t,r.ci)}var i}),aD.apply(this,arguments)}function oM(n,e){const t=qe(n),r=t.ia.get(e);if(r&&r.Xu)return hn().add(r.key);{let i=hn();const u=t.ea.get(e);if(!u)return i;for(const c of u){const p=t.ta.get(c);i=i.unionWith(p.view.qu)}return i}}function aM(n,e){return uD.apply(this,arguments)}function uD(){return uD=(0,ve.Z)(function*(n,e){const t=qe(n),r=yield qm(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&oD(t,e.targetId,i.zu),i}),uD.apply(this,arguments)}function uM(n,e){return P0.apply(this,arguments)}function P0(){return P0=(0,ve.Z)(function*(n,e){const t=qe(n);return Ob(t.localStore,e).then(r=>vu(t,r))}),P0.apply(this,arguments)}function fy(n,e,t,r){return F0.apply(this,arguments)}function F0(){return F0=(0,ve.Z)(function*(n,e,t,r){const i=qe(n),u=yield function(c,p){const y=qe(c),b=qe(y.$s);return y.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.ln(A,p).next(M=>M?y.ai.qs(A,M):ge.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield Mp(i.remoteStore):"acknowledged"===t||"rejected"===t?(dy(i,e,r||null),cy(i,e),p=e,qe(qe(i.localStore).$s).dn(p)):it(),yield vu(i,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),F0.apply(this,arguments)}function py(){return py=(0,ve.Z)(function*(n,e){const t=qe(n);if(lD(t),cD(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Il(t,r.toArray());t.ca=!0,yield Zb(t.remoteStore,!0);for(const u of i)Ap(t.remoteStore,u)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Rh(t,c),Cl(t.localStore,c,!0))),Ah(t.remoteStore,c)}),yield i,yield Il(t,r),function(u){const c=qe(u);c.ia.forEach((p,y)=>{Ah(c.remoteStore,y)}),c.ra.bi(),c.ia=new Map,c.sa=new fr(je.comparator)}(t),t.ca=!1,yield Zb(t.remoteStore,!1)}}),py.apply(this,arguments)}function Il(n,e,t){return gy.apply(this,arguments)}function gy(){return gy=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=[],u=[];for(const c of e){let p;const y=r.ea.get(c);if(y&&0!==y.length){p=yield Jc(r.localStore,Is(y[0]));for(const b of y){const A=r.ta.get(b),M=yield aM(r,A);M.snapshot&&u.push(M.snapshot)}}else{const b=yield Nb(r.localStore,c);p=yield Jc(r.localStore,b),yield Xb(r,my(b),c,!1)}i.push(p)}return r.Zu.Ko(u),i}),gy.apply(this,arguments)}function my(n){return vv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function L0(n){const e=qe(n);return qe(qe(e.localStore).persistence).Os()}function OT(n,e,t,r){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,ve.Z)(function*(n,e,t,r){const i=qe(n);if(i.ca)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=i.ea.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield Ob(i.localStore,bv(u[0])),p=fp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield vu(i,c,p);break}case"rejected":yield Cl(i.localStore,e,!0),Rh(i,e,r);break;default:it()}}),Fp.apply(this,arguments)}function V0(n,e,t){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,ve.Z)(function*(n,e,t){const r=lD(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const u=yield Nb(r.localStore,i),c=yield Jc(r.localStore,u);yield Xb(r,my(u),c.targetId,!1),Ap(r.remoteStore,c)}for(const i of t)r.ea.has(i)&&(yield Cl(r.localStore,i,!1).then(()=>{Ah(r.remoteStore,i),Rh(r,i)}).catch(Dl))}}),Nh.apply(this,arguments)}function lD(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rD.bind(null,e),e.Zu.Ko=qo.bind(null,e.eventManager),e.Zu.la=IT.bind(null,e.eventManager),e}function cD(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N0.bind(null,e),e}class kT{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=Th(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return Yv(this.persistence,new Mb,e.initialUser,this.M)}_a(e){return new $i(e0.Wi,this.M)}da(e){return new Zm}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class B0 extends kT{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield cD(r.ga.syncEngine),yield Mp(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return Yv(this.persistence,new Mb,e.initialUser,this.M)}wa(e){return new Ib(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Ch(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ji.withCacheSize(this.cacheSizeBytes):ji.DEFAULT;return new Kv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,o0(),Qm(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new Zm}}class PT extends B0{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof n0&&(r.sharedClientState.syncEngine={kr:fy.bind(null,i),Mr:OT.bind(null,i),Or:V0.bind(null,i),Os:L0.bind(null,i),Nr:uM.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var u=(0,ve.Z)(function*(c){yield function NT(n,e){return py.apply(this,arguments)}(r.ga.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}da(e){const t=o0();if(!n0.vt(t))throw new Re(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ch(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new n0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class U0{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>x0(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=RT.bind(null,r.syncEngine),yield Zb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new CT}createDatastore(e){const t=Th(e.databaseInfo.databaseId),r=new XA(e.databaseInfo);return new l0(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>x0(this.syncEngine,p,0),c=r0.vt()?new r0:new $b,new _T(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,y,b){const A=new T0(r,i,u,c,p,y);return b&&(A.ca=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=qe(t);Fe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield td(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function dD(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class yy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class hD{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new lr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const u=yield e.ba(i);return new TT(JSON.parse(u),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ve.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class fD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(u,c){const p=qe(u),y=mp(p.M)+"/documents",b={documents:c.map(U=>fh(p.M,U))},A=yield p.co("BatchGetDocuments",y,b),M=new Map;A.forEach(U=>{const G=function YA(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=Aa(t,r.found.name),u=Jr(r.found.updateTime),c=new ui({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=Aa(t,r.missing),u=Jr(r.readTime);return Nn.newNoDocument(i,u)}(n,e):it()}(p.M,U);M.set(G.key.toString(),G)});const F=[];return c.forEach(U=>{const G=M.get(U.toString());Ct(!!G),F.push(G)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=je.fromPath(i);e.mutations.push(new cp(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(i,u){const c=qe(i),p=mp(c.M)+"/documents",y={writes:u.map(b=>_l(c.M,b))};yield c.ro("Commit",p,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?dr.updateTime(t):dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Re(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dr.updateTime(t)}return dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pD{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new Sh(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ve.Z)(function*(){const t=new fD(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ca(u)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!fl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!xI(t)}return!1}}class FT{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=jr.UNAUTHENTICATED,this.clientId=am.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ve.Z)(function*(p){Fe("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Fe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Rp(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function gD(n,e){return _y.apply(this,arguments)}function _y(){return _y=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(u){r.isEqual(u)||(yield $m(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),_y.apply(this,arguments)}function vy(n,e){return mD.apply(this,arguments)}function mD(){return mD=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Ey(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>_0(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>_0(e.remoteStore,u)),n.onlineComponents=e}),mD.apply(this,arguments)}function Ey(n){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,ve.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield gD(n,new kT)),n.offlineComponents}),Lp.apply(this,arguments)}function wy(n){return j0.apply(this,arguments)}function j0(){return j0=(0,ve.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield vy(n,new U0)),n.onlineComponents}),j0.apply(this,arguments)}function LT(n){return Ey(n).then(e=>e.persistence)}function yD(n){return Ey(n).then(e=>e.localStore)}function VT(n){return wy(n).then(e=>e.remoteStore)}function $0(n){return wy(n).then(e=>e.syncEngine)}function Oh(n){return _D.apply(this,arguments)}function _D(){return _D=(0,ve.Z)(function*(n){const e=yield wy(n),t=e.eventManager;return t.onListen=zo.bind(null,e.syncEngine),t.onUnlisten=eD.bind(null,e.syncEngine),t}),_D.apply(this,arguments)}function BT(n,e,t={}){const r=new lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,u,c,p,y){const b=new yy({next:M=>{u.enqueueAndForget(()=>Op(i,A));const F=M.docs.has(c);!F&&M.fromCache?y.reject(new Re(le.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&p&&"server"===p.source?y.reject(new Re(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),A=new b0(fu(c.path),b,{includeMetadataChanges:!0,Du:!0});return Yb(i,A)}(yield Oh(n),n.asyncQueue,e,t,r)})),r.promise}function jT(n,e,t={}){const r=new lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,u,c,p,y){const b=new yy({next:M=>{u.enqueueAndForget(()=>Op(i,A)),M.fromCache&&"server"===p.source?y.reject(new Re(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),A=new b0(c,b,{includeMetadataChanges:!0,Du:!0});return Yb(i,A)}(yield Oh(n),n.asyncQueue,e,t,r)})),r.promise}const o=new Map;function a(n,e,t){if(!t)throw new Re(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function l(n,e,t,r){if(!0===e&&!0===r)throw new Re(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function d(n){if(!je.isDocumentKey(n))throw new Re(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function g(n){if(je.isDocumentKey(n))throw new Re(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function v(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function w(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=v(n);throw new Re(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function D(n,e){if(e<=0)throw new Re(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class S{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,l("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class x{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S({}),this._settingsFrozen=!1,e instanceof du?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Re(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(i.options.projectId)}(e))}get app(){if(!this._app)throw new Re(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new vw;switch(t.type){case"gapi":const r=t.client;return Ct(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new mI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=o.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),o.delete(e),t.terminate())}(this),Promise.resolve()}}class B{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new he(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new B(this.firestore,e,this._key)}}class W{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new W(this.firestore,e,this._query)}}class he extends W{constructor(e,t,r){super(e,t,fu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new B(this.firestore,null,new je(e))}withConverter(e){return new he(this.firestore,e,this._path)}}function Pe(n,e,...t){if(n=(0,Ht.m9)(n),a("collection","path",e),n instanceof x){const r=Kt.fromString(e,...t);return g(r),new he(n,null,r)}{if(!(n instanceof B||n instanceof he))throw new Re(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return g(r),new he(n.firestore,null,r)}}function Xe(n,e,...t){if(n=(0,Ht.m9)(n),1===arguments.length&&(e=am.R()),a("doc","path",e),n instanceof x){const r=Kt.fromString(e,...t);return d(r),new B(n,null,new je(r))}{if(!(n instanceof B||n instanceof he))throw new Re(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return d(r),new B(n.firestore,n instanceof he?n.converter:null,new je(r))}}function Ce(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),(n instanceof B||n instanceof he)&&(e instanceof B||e instanceof he)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function mt(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),n instanceof W&&e instanceof W&&n.firestore===e.firestore&&lh(n._query,e._query)&&n.converter===e.converter}class Zt{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Sh(this,"async_queue_retry"),this.Ua=()=>{const t=Qm();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Qm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Qm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new lr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ve.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!vl(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,wr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=v0.createAndSchedule(this,e,t,r,u=>this.Qa(u));return this.Oa.push(i),i}qa(){this.Fa&&it()}verifyOperationInProgress(){}ja(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function ln(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Ss{constructor(){this._progressObserver={},this._taskCompletionResolver=new lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Tn extends x{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Zt,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||by(this),this._firestoreClient.terminate()}}function tr(n){return n._firestoreClient||by(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function by(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Cw(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new FT(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Dy(n,e,t){const r=new lr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield gD(n,t),yield vy(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===le.FAILED_PRECONDITION||u.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function mM(n){if(n._initialized||n._terminated)throw new Re(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class rd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Tl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tl(cr.fromBase64String(e))}catch(t){throw new Re(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tl(cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vp{constructor(e){this._methodName=e}}class wD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const yO=/^__.*__$/;class _O{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new hh(e,this.data,t,this.fieldTransforms)}}class yM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _M(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class bD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.Ja(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new bD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return ID(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(_M(this.Ya)&&yO.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class vO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Th(e)}uc(e,t,r,i=!1){return new bD({Ya:e,methodName:t,oc:r,path:Dr.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Bp(n){const e=n._freezeSettings(),t=Th(n._databaseId);return new vO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DD(n,e,t,r,i,u={}){const c=n.uc(u.merge||u.mergeFields?2:0,e,t,i);qT("Data must be an object, but it was:",c,r);const p=wM(r,c);let y,b;if(u.merge)y=new tp(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const F=zT(e,M,t);if(!c.contains(F))throw new Re(le.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);DM(A,F)||A.push(F)}y=new tp(A),b=c.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,b=c.fieldTransforms;return new _O(new ui(p),y,b)}class z0 extends Vp{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof z0}}function vM(n,e,t){return new bD({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class $T extends Vp{_toFieldTransform(e){return new ap(e.path,new ch)}isEqual(e){return e instanceof $T}}class EO extends Vp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=vM(this,e,!0),r=this.ac.map(u=>Up(u,t)),i=new Gc(r);return new ap(e.path,i)}isEqual(e){return this===e}}class wO extends Vp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=vM(this,e,!0),r=this.ac.map(u=>Up(u,t)),i=new qc(r);return new ap(e.path,i)}isEqual(e){return this===e}}class bO extends Vp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new dh(e.M,Pw(e.M,this.cc));return new ap(e.path,t)}isEqual(e){return this===e}}function HT(n,e,t,r){const i=n.uc(1,e,t);qT("Data must be an object, but it was:",i,r);const u=[],c=ui.empty();uu(r,(y,b)=>{const A=CD(e,y,t);b=(0,Ht.m9)(b);const M=i.nc(A);if(b instanceof z0)u.push(A);else{const F=Up(b,M);null!=F&&(u.push(A),c.set(A,F))}});const p=new tp(u);return new yM(c,p,i.fieldTransforms)}function GT(n,e,t,r,i,u){const c=n.uc(1,e,t),p=[zT(e,r,t)],y=[i];if(u.length%2!=0)throw new Re(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)p.push(zT(e,u[F])),y.push(u[F+1]);const b=[],A=ui.empty();for(let F=p.length-1;F>=0;--F)if(!DM(b,p[F])){const U=p[F];let G=y[F];G=(0,Ht.m9)(G);const ne=c.nc(U);if(G instanceof z0)b.push(U);else{const we=Up(G,ne);null!=we&&(b.push(U),A.set(U,we))}}const M=new tp(b);return new yM(A,M,c.fieldTransforms)}function EM(n,e,t,r=!1){return Up(t,n.uc(r?4:3,e))}function Up(n,e){if(bM(n=(0,Ht.m9)(n)))return qT("Unsupported field value:",e,n),wM(n,e);if(n instanceof Vp)return function(t,r){if(!_M(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=Up(c,r.sc(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Ht.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Pw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=br.fromDate(t);return{timestampValue:gu(r.M,i)}}if(t instanceof br){const i=new br(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gu(r.M,i)}}if(t instanceof wD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tl)return{bytesValue:tb(r.M,t._byteString)};if(t instanceof B){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ic(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${v(t)}`)}(n,e)}function wM(n,e){const t={};return um(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uu(n,(r,i)=>{const u=Up(i,e.Za(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function bM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof br||n instanceof wD||n instanceof Tl||n instanceof B||n instanceof Vp)}function qT(n,e,t){if(!bM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=v(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function zT(n,e,t){if((e=(0,Ht.m9)(e))instanceof rd)return e._internalPath;if("string"==typeof e)return CD(n,e);throw ID("Field path arguments must be of type string or ",n,!1,void 0,t)}const DO=new RegExp("[~\\*/\\[\\]]");function CD(n,e,t){if(e.search(DO)>=0)throw ID(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rd(...e.split("."))._internalPath}catch(r){throw ID(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ID(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Re(le.INVALID_ARGUMENT,p+n+y)}function DM(n,e){return n.some(t=>t.isEqual(e))}class W0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new B(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new CO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class CO extends W0{data(){return super.data()}}function TD(n,e){return"string"==typeof e?CD(n,e):e instanceof rd?e._internalPath:e._delegate._internalPath}class jp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class id extends W0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new K0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(TD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class K0 extends id{data(e={}){return super.data(e)}}class kh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new jp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new K0(this._firestore,this._userDataWriter,r.key,r,new jp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new K0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new jp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new K0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new jp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:IO(c.type),doc:p,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function IO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function CM(n,e){return n instanceof id&&e instanceof id?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof kh&&e instanceof kh&&n._firestore===e._firestore&&mt(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function IM(n){if(op(n)&&0===n.explicitOrderBy.length)throw new Re(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Z0{}function Ph(n,...e){for(const t of e)n=t._apply(n);return n}class TO extends Z0{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Bp(e.firestore),r=function(i,u,c,p,y,b,A){let M;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){RM(A,b);const U=[];for(const G of A)U.push(xM(p,i,G));M={arrayValue:{values:U}}}else M=xM(p,i,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||RM(A,b),M=EM(c,"where",A,"in"===b||"not-in"===b);const F=In.create(y,b,M);return function(U,G){if(G.S()){const we=_m(U);if(null!==we&&!we.isEqual(G.field))throw new Re(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${we.toString()}' and '${G.field.toString()}'`);const Ze=ym(U);null!==Ze&&NM(0,G.field,Ze)}const ne=function(we,Ze){for(const Le of we.filters)if(Ze.indexOf(Le.op)>=0)return Le.op;return null}(U,function(we){switch(we){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==ne)throw new Re(le.INVALID_ARGUMENT,ne===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${ne.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new W(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new Sa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class AO extends Z0{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Re(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Ta(i,u);return function(p,y){if(null===ym(p)){const b=_m(p);null!==b&&NM(0,b,y.field)}}(r,c),c}(e._query,this.hc,this.dc);return new W(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Sa(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class TM extends Z0{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new W(e.firestore,e.converter,Ev(e._query,this._c,this.wc))}}class SM extends Z0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=MM(e,this.type,this.mc,this.gc);return new W(e.firestore,e.converter,(i=t,new Sa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class AM extends Z0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=MM(e,this.type,this.mc,this.gc);return new W(e.firestore,e.converter,(i=t,new Sa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function MM(n,e,t,r){if(t[0]=(0,Ht.m9)(t[0]),t[0]instanceof W0)return function(i,u,c,p,y){if(!p)throw new Re(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const A of Hc(i))if(A.field.isKeyField())b.push(jc(u,p.key));else{const M=p.data.field(A.field);if(cm(M))throw new Re(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=A.field.canonicalString();throw new Re(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new Ia(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Bp(n.firestore);return function(u,c,p,y,b,A){const M=u.explicitOrderBy;if(b.length>M.length)throw new Re(le.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let U=0;U<b.length;U++){const G=b[U];if(M[U].field.isKeyField()){if("string"!=typeof G)throw new Re(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof G}`);if(!uh(u)&&-1!==G.indexOf("/"))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${G}' contains a slash.`);const ne=u.path.child(Kt.fromString(G));if(!je.isDocumentKey(ne))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ne}' is not because it contains an odd number of segments.`);const we=new je(ne);F.push(jc(c,we))}else{const ne=EM(p,y,G);F.push(ne)}}return new Ia(F,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function xM(n,e,t){if("string"==typeof(t=(0,Ht.m9)(t))){if(""===t)throw new Re(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uh(e)&&-1!==t.indexOf("/"))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Kt.fromString(t));if(!je.isDocumentKey(r))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jc(n,new je(r))}if(t instanceof B)return jc(n,t._key);throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${v(t)}.`)}function RM(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function NM(n,e,t){if(!t.isEqual(e))throw new Re(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class WT{convertValue(e,t="none"){switch(pl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return uu(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new wD(Kn(e.latitude),Kn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vc(e));default:return null}}convertTimestamp(e){const t=lu(e);return new br(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Kt.fromString(e);Ct(Rv(r));const i=new du(r.get(1),r.get(3)),u=new je(r.popFirst(5));return i.isEqual(t)||wr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function SD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class FO extends WT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new B(this.firestore,null,t)}}class OM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bp(e)}set(e,t,r){this._verifyNotCommitted();const i=Fh(e,this._firestore),u=SD(i.converter,t,r),c=DD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,dr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Fh(e,this._firestore);let c;return c="string"==typeof(t=(0,Ht.m9)(t))||t instanceof rd?GT(this._dataReader,"WriteBatch.update",u._key,t,r,i):HT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Fh(e,this._firestore);return this._mutations=this._mutations.concat(new Dm(t._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fh(n,e){if((n=(0,Ht.m9)(n)).firestore!==e)throw new Re(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $p extends WT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new B(this.firestore,null,t)}}function kM(n,e,t){n=w(n,B);const r=w(n.firestore,Tn),i=SD(n.converter,e,t);return Cy(r,[DD(Bp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,dr.none())])}function PM(n,e,t,...r){n=w(n,B);const i=w(n.firestore,Tn),u=Bp(i);let c;return c="string"==typeof(e=(0,Ht.m9)(e))||e instanceof rd?GT(u,"updateDoc",n._key,e,t,r):HT(u,"updateDoc",n._key,e),Cy(i,[c.toMutation(n._key,dr.exists(!0))])}function FM(n,...e){var t,r,i;n=(0,Ht.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||ln(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(ln(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,b,A;if(n instanceof B)b=w(n.firestore,Tn),A=fu(n._key.path),y={next:M=>{e[c]&&e[c](KT(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=w(n,W);b=w(M.firestore,Tn),A=M._query;const F=new $p(b);y={next:U=>{e[c]&&e[c](new kh(b,F,M,U))},error:e[c+1],complete:e[c+2]},IM(n._query)}return function(M,F,U,G){const ne=new yy(G),we=new b0(F,ne,U);return M.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return Yb(yield Oh(M),we)})),()=>{ne.pa(),M.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return Op(yield Oh(M),we)}))}}(tr(b),A,p,y)}function Cy(n,e){return function(t,r){const i=new lr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function MT(n,e,t){return uy.apply(this,arguments)}(yield $0(t),r,i)})),i.promise}(tr(n),e)}function KT(n,e,t){const r=t.docs.get(e._key),i=new $p(n);return new id(n,i,e._key,r,new jp(t.hasPendingWrites,t.fromCache),e.converter)}class zO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bp(e)}get(e){const t=Fh(e,this._firestore),r=new FO(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const u=i[0];if(u.isFoundDocument())return new W0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new W0(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=Fh(e,this._firestore),u=SD(i.converter,t,r),c=DD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Fh(e,this._firestore);let c;return c="string"==typeof(t=(0,Ht.m9)(t))||t instanceof rd?GT(this._dataReader,"Transaction.update",u._key,t,r,i):HT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Fh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Fh(e,this._firestore),r=new $p(this._firestore);return super.get(e).then(i=>new id(this._firestore,r,t._key,i._document,new jp(!1,!1),t.converter))}}function ZT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function VM(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function BM(){if(!function yI(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){cl=wc.SDK_VERSION,(0,wc._registerComponent)(new kg.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new Tn(i,new pI(t.getProvider("auth-internal")),new ww(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,wc.registerVersion)(gw,"3.4.7",n),(0,wc.registerVersion)(gw,"3.4.7","esm2017")}();class Y0{constructor(e){this._delegate=e}static fromBase64String(e){return BM(),new Y0(Tl.fromBase64String(e))}static fromUint8Array(e){return VM(),new Y0(Tl.fromUint8Array(e))}toBase64(){return BM(),this._delegate.toBase64()}toUint8Array(){return VM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function YT(n){return function tk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class nk{enableIndexedDbPersistence(e,t){return function H0(n,e){mM(n=w(n,Tn));const t=tr(n),r=n._freezeSettings(),i=new U0;return Dy(t,i,new B0(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function G0(n){mM(n=w(n,Tn));const e=tr(n),t=n._freezeSettings(),r=new U0;return Dy(e,r,new PT(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function q0(n){if(n._initialized&&!n._terminated)throw new Re(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!jo.vt())return Promise.resolve();const i=r+"main";yield jo.delete(i)}),function(r){return t.apply(this,arguments)})(Ch(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class UM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof du||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&sh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function P(n,e,t,r={}){var i;const u=(n=w(n,x))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&sh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=jr.MOCK_USER;else{c=(0,Ht.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new jr(y)}n._authCredentials=new fI(new _w(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function fO(n){return function cM(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield LT(n),t=yield VT(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.lu.delete(0),Sp(i)}(t)}))}(tr(n=w(n,Tn)))}(this._delegate)}disableNetwork(){return function pO(n){return function dM(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield LT(n),t=yield VT(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const u=qe(i);u.lu.add(0),yield td(u),u._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(tr(n=w(n,Tn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,l("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hO(n){return function(e){const t=new lr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function iD(n,e){return O0.apply(this,arguments)}(yield $0(e),t)})),t.promise}(tr(n=w(n,Tn)))}(this._delegate)}onSnapshotsInSync(e){return function qO(n,e){return function fM(n,e){const t=new yy(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Oh(n),i=t,qe(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Oh(n),i=t,void qe(r).Tu.delete(i);var r,i}))}}(tr(n=w(n,Tn)),ln(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Iy(this,Pe(this._delegate,e))}catch(t){throw As(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ra(this,Xe(this._delegate,e))}catch(t){throw As(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ms(this,function He(n,e){if(n=w(n,x),a("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new W(n,null,(t=e,new Sa(Kt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw As(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function WO(n,e){return function pM(n,e){const t=new lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(i=n,wy(i).then(u=>u.datastore));var i;new pD(n.asyncQueue,r,e,t).run()})),t.promise}(tr(n=w(n,Tn)),t=>e(new zO(n,t)))}(this._delegate,t=>e(new jM(this,t)))}batch(){return tr(this._delegate),new $M(new OM(this._delegate,e=>Cy(this._delegate,e)))}loadBundle(e){return function gO(n,e){const t=tr(n=w(n,Tn)),r=new Ss;return function gM(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return dD(y,b);if(y instanceof ArrayBuffer)return dD(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new hD(y,c);var y}(t,Th(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function lM(n,e,t){const r=qe(n);var i;(i=(0,ve.Z)(function*(u,c,p){try{const y=yield c.getMetadata();if(yield function(F,U){const G=qe(F),ne=Jr(U.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",we=>G.ds.getBundleMetadata(we,U.id)).then(we=>!!we&&we.createTime.compareTo(ne)>=0)}(u.localStore,y))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(F=y).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);p._updateProgress(D0(y));const b=new Qb(y,u.localStore,c.M);let A=yield c.fa();for(;A;){const F=yield b.Nu(A);F&&p._updateProgress(F),A=yield c.fa()}const M=yield b.complete();return yield vu(u,M.Ou,void 0),yield function(F,U){const G=qe(F);return G.persistence.runTransaction("Save bundle","readwrite",ne=>G.ds.saveBundleMetadata(ne,U))}(u.localStore,y),p._completeWith(M.progress),Promise.resolve(M.Mu)}catch(y){return sh("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var F}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield $0(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function mO(n,e){return function s(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.ds.getNamedQuery(u,r))}(yield yD(n),e)}))}(tr(n=w(n,Tn)),e).then(t=>t?new W(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ms(this,t):null)}}class AD extends WT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Y0(new Tl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ra.forKey(t,this.firestore,null)}}class jM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}get(e){const t=Gp(e);return this._delegate.get(t).then(r=>new Q0(this._firestore,new id(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Gp(e);return r?(ZT("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Gp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Gp(e);return this._delegate.delete(t),this}}class $M{constructor(e){this._delegate=e}set(e,t,r){const i=Gp(e);return r?(ZT("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Gp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Gp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new K0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new J0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Hp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Hp(e,new AD(e),t),i.set(t,u)),u}}Hp.INSTANCES=new WeakMap;class Ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ra(t,new B(t._delegate,r,new je(e)))}static forKey(e,t,r){return new Ra(t,new B(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Iy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Iy(this.firestore,Pe(this._delegate,e))}catch(t){throw As(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.m9)(e))instanceof B&&Ce(this._delegate,e)}set(e,t){t=ZT("DocumentReference.set",t);try{return t?kM(this._delegate,e,t):kM(this._delegate,e)}catch(r){throw As(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?PM(this._delegate,e):PM(this._delegate,e,t,...r)}catch(i){throw As(i,"updateDoc()","DocumentReference.update()")}}delete(){return function HO(n){return Cy(w(n.firestore,Tn),[new Dm(n._key,dr.none())])}(this._delegate)}onSnapshot(...e){const t=HM(e),r=GM(e,i=>new Q0(this.firestore,new id(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return FM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function VO(n){n=w(n,B);const e=w(n.firestore,Tn),t=tr(e),r=new $p(e);return function hM(n,e){const t=new lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,u,c){try{const p=yield function(y,b){const A=qe(y);return A.persistence.runTransaction("read document","readonly",M=>A.ai.Bs(M,b))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Re(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=Rp(p,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield yD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new id(e,r,n._key,i,new jp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function BO(n){n=w(n,B);const e=w(n.firestore,Tn);return BT(tr(e),n._key,{source:"server"}).then(t=>KT(e,n,t))}(this._delegate):function LO(n){n=w(n,B);const e=w(n.firestore,Tn);return BT(tr(e),n._key).then(t=>KT(e,n,t))}(this._delegate),t.then(r=>new Q0(this.firestore,new id(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ra(this.firestore,this._delegate.withConverter(e?Hp.getInstance(this.firestore,e):null))}}function As(n,e,t){return n.message=n.message.replace(e,t),n}function HM(n){for(const e of n)if("object"==typeof e&&!YT(e))return e;return{}}function GM(n,e){var t,r;let i;return i=YT(n[0])?n[0]:YT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Q0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ra(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return CM(this._delegate,e._delegate)}}class J0 extends Q0{data(e){const t=this._delegate.data(e);return function hI(n,e){n||it()}(void 0!==t),t}}class Ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}where(e,t,r){try{return new Ms(this.firestore,Ph(this._delegate,function SO(n,e,t){const r=e,i=TD("where",n);return new TO(i,r,t)}(e,t,r)))}catch(i){throw As(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ms(this.firestore,Ph(this._delegate,function MO(n,e="asc"){const t=e,r=TD("orderBy",n);return new AO(r,t)}(e,t)))}catch(r){throw As(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ms(this.firestore,Ph(this._delegate,function xO(n){return D("limit",n),new TM("limit",n,"F")}(e)))}catch(t){throw As(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ms(this.firestore,Ph(this._delegate,function RO(n){return D("limitToLast",n),new TM("limitToLast",n,"L")}(e)))}catch(t){throw As(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ms(this.firestore,Ph(this._delegate,function NO(...n){return new SM("startAt",n,!0)}(...e)))}catch(t){throw As(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ms(this.firestore,Ph(this._delegate,function OO(...n){return new SM("startAfter",n,!1)}(...e)))}catch(t){throw As(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ms(this.firestore,Ph(this._delegate,function kO(...n){return new AM("endBefore",n,!1)}(...e)))}catch(t){throw As(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ms(this.firestore,Ph(this._delegate,function PO(...n){return new AM("endAt",n,!0)}(...e)))}catch(t){throw As(t,"endAt()","Query.endAt()")}}isEqual(e){return mt(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function jO(n){n=w(n,W);const e=w(n.firestore,Tn),t=tr(e),r=new $p(e);return function UT(n,e){const t=new lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,u,c){try{const p=yield qm(i,u,!0),y=new I0(u,p.hi),b=y.Gu(p.documents),A=y.applyChanges(b,!1);c.resolve(A.snapshot)}catch(p){const y=Rp(p,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield yD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new kh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function $O(n){n=w(n,W);const e=w(n.firestore,Tn),t=tr(e),r=new $p(e);return jT(t,n._query,{source:"server"}).then(i=>new kh(e,r,n,i))}(this._delegate):function UO(n){n=w(n,W);const e=w(n.firestore,Tn),t=tr(e),r=new $p(e);return IM(n._query),jT(t,n._query).then(i=>new kh(e,r,n,i))}(this._delegate),t.then(r=>new QT(this.firestore,new kh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=HM(e),r=GM(e,i=>new QT(this.firestore,new kh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return FM(this._delegate,t,r)}withConverter(e){return new Ms(this.firestore,this._delegate.withConverter(e?Hp.getInstance(this.firestore,e):null))}}class ik{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new J0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class QT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new J0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ik(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new J0(this._firestore,r))})}isEqual(e){return CM(this._delegate,e._delegate)}}class Iy extends Ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ra(this.firestore,e):null}doc(e){try{return new Ra(this.firestore,void 0===e?Xe(this._delegate):Xe(this._delegate,e))}catch(t){throw As(t,"doc()","CollectionReference.doc()")}}add(e){return function GO(n,e){const t=w(n.firestore,Tn),r=Xe(n),i=SD(n.converter,e);return Cy(t,[DD(Bp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ra(this.firestore,t))}isEqual(e){return Ce(this._delegate,e._delegate)}withConverter(e){return new Iy(this.firestore,this._delegate.withConverter(e?Hp.getInstance(this.firestore,e):null))}}function Gp(n){return w(n,B)}class JT{constructor(...e){this._delegate=new rd(...e)}static documentId(){return new JT(Dr.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.m9)(e))instanceof rd&&this._delegate._internalPath.isEqual(e._internalPath)}}class qp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ZO(){return new $T("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new qp(e)}static delete(){const e=function KO(){return new z0("deleteField")}();return e._methodName="FieldValue.delete",new qp(e)}static arrayUnion(...e){const t=function YO(...n){return new EO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new qp(t)}static arrayRemove(...e){const t=function QO(...n){return new wO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new qp(t)}static increment(e){const t=function JO(n){return new bO("increment",n)}(e);return t._methodName="FieldValue.increment",new qp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const sk={Firestore:UM,GeoPoint:wD,Timestamp:br,Blob:Y0,Transaction:jM,WriteBatch:$M,DocumentReference:Ra,DocumentSnapshot:Q0,Query:Ms,QueryDocumentSnapshot:J0,QuerySnapshot:QT,CollectionReference:Iy,FieldPath:JT,FieldValue:qp,setLogLevel:function rk(n){!function WA(n){dl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function ak(n){(function ok(n,e){n.INTERNAL.registerComponent(new kg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},sk)))})(n,(e,t)=>new UM(e,t,new nk)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(OE.Z);var qM=O(6451),MD=O(5363),uk=O(6063);class XT extends ar.x{constructor(e=1/0,t=1/0,r=uk.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)p=y;p&&r.splice(0,p+1)}}}var lk=O(3099);function zM(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,lk.B)({connector:()=>new XT(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function WM(n,e){return(0,yi.m)(e)?Un(()=>n,e):Un(()=>n)}var eS=O(9468);O(5867);const ZM=new Map,pk={activated:!1,tokenObservers:[]},gk={initialized:!1,enabled:!1};function Ci(n){return ZM.get(n)||pk}function Eu(n,e){ZM.set(n,e)}function RD(){return gk}class Ek{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new Ht.BH,yield function wk(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ht.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const xs=new Ht.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function QM(n){if(!Ci(n).activated)throw xs.create("use-before-activation",{appName:n.name})}function iS(n,e){return sS.apply(this,arguments)}function sS(){return sS=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(M){throw xs.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw xs.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(M){throw xs.create("fetch-parse-error",{originalErrorMessage:M.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw xs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(y[1]),A=Date.now();return{token:p.attestationToken,expireTimeMillis:A+b,issuedAtTimeMillis:A}}),sS.apply(this,arguments)}function Tk(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const X0="firebase-app-check-store";let kD=null;function XM(){return kD||(kD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(xs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(X0,{keyPath:"compositeKey"})}}catch(t){e(xs.create("storage-open",{originalErrorMessage:t.message}))}}),kD)}function oS(){return oS=(0,ve.Z)(function*(n,e){const r=(yield XM()).transaction(X0,"readwrite"),u=r.objectStore(X0).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;p(xs.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})}),oS.apply(this,arguments)}const eE=new el.Yd("@firebase/app-check");function rx(n,e){return(0,Ht.hl)()?function xk(n,e){return function ex(n,e){return oS.apply(this,arguments)}(function nx(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{eE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ix(){return RD().enabled}function sx(){return cS.apply(this,arguments)}function cS(){return cS=(0,ve.Z)(function*(){const n=RD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),cS.apply(this,arguments)}const Fk={error:"UNKNOWN_ERROR"};function Lk(n){return Ht.US.encodeString(JSON.stringify(n),!1)}function PD(n){return dS.apply(this,arguments)}function dS(){return dS=(0,ve.Z)(function*(n,e=!1){const t=n.app;QM(t);const r=Ci(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&FD(y)&&(i=y)}if(!e&&i&&FD(i))return{token:i.token};let p,c=!1;if(ix()){r.exchangeTokenPromise||(r.exchangeTokenPromise=iS(Tk(t,yield sx()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield rx(t,y),Eu(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?eE.warn(y.message):eE.error(y),u=y}return i?(p={token:i.token},Eu(t,Object.assign(Object.assign({},r),{token:i})),yield rx(t,i)):p=Bk(u),c&&ax(t,p),p}),dS.apply(this,arguments)}function fS(n,e){const t=Ci(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Eu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ox(n){const{app:e}=n,t=Ci(e);let r=t.tokenRefresher;r||(r=function Vk(n){const{app:e}=n;return new Ek((0,ve.Z)(function*(){let r;if(r=Ci(e).token?yield PD(n,!0):yield PD(n),r.error)throw r.error}),()=>!0,()=>{const t=Ci(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Eu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ax(n,e){const t=Ci(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function FD(n){return n.expireTimeMillis-Date.now()>0}function Bk(n){return{token:Lk(Fk),error:n}}class Uk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ci(this.app);for(const t of e)fS(this.app,t.next);return Promise.resolve()}}const gx="app-check-internal";!function eP(){(0,wc._registerComponent)(new kg.wA("app-check",n=>function jk(n,e){return new Uk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gx).initialize()})),(0,wc._registerComponent)(new kg.wA(gx,n=>function $k(n){return{getToken:e=>PD(n,e),addTokenListener:e=>function hS(n,e,t,r){const{app:i}=n,u=Ci(i),c={next:t,error:r,type:e};if(Eu(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&FD(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),ox(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ox(n))}(n,"INTERNAL",e),removeTokenListener:e=>fS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,wc.registerVersion)("@firebase/app-check","0.5.5")}();class yS{constructor(){return(0,oi.vb)("app-check")}}"undefined"!=typeof window&&window;var sP=O(127);const yx=new h.OlP("angularfire2.auth.use-emulator"),_x=new h.OlP("angularfire2.auth.settings"),vx=new h.OlP("angularfire2.auth.tenant-id"),Ex=new h.OlP("angularfire2.auth.langugage-code"),wx=new h.OlP("angularfire2.auth.use-device-language"),bx=new h.OlP("angularfire.auth.persistence"),Dx=(n,e,t,r,i,u,c,p)=>(0,ur.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[b,A]of Object.entries(c))y.settings[b]=A;return p&&y.setPersistence(p),y},[t,r,i,u,c,p]);let Cx=(()=>{class n{constructor(t,r,i,u,c,p,y,b,A,M,F,U){const G=new ar.x,ne=gt(void 0).pipe((0,MD.Q)(c.outsideAngular),Un(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,4087)))),(0,kt.U)(()=>(0,ur.on)(t,u,r)),(0,kt.U)(we=>Dx(we,u,p,b,A,M,y,F)),zM({bufferSize:1,refCount:!1}));if(vr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{ne.pipe(eo()).subscribe();const Ze=ne.pipe(Un(ze=>ze.getRedirectResult().then(_t=>_t,()=>null)),oi.iC,zM({bufferSize:1,refCount:!1})),Le=ne.pipe(Un(ze=>new zr.y(_t=>({unsubscribe:u.runOutsideAngular(()=>ze.onAuthStateChanged(ct=>_t.next(ct),ct=>_t.error(ct),()=>_t.complete()))})))),Ke=ne.pipe(Un(ze=>new zr.y(_t=>({unsubscribe:u.runOutsideAngular(()=>ze.onIdTokenChanged(ct=>_t.next(ct),ct=>_t.error(ct),()=>_t.complete()))}))));this.authState=Ze.pipe(WM(Le),(0,eS.R)(c.outsideAngular),(0,MD.Q)(c.insideAngular)),this.user=Ze.pipe(WM(Ke),(0,eS.R)(c.outsideAngular),(0,MD.Q)(c.insideAngular)),this.idToken=this.user.pipe(Un(ze=>ze?(0,Vn.D)(ze.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(Un(ze=>ze?(0,Vn.D)(ze.getIdTokenResult()):gt(null))),this.credential=(0,qM.T)(Ze,G,this.authState.pipe(Zi(ze=>!ze))).pipe((0,kt.U)(ze=>(null==ze?void 0:ze.user)?ze:null),(0,eS.R)(c.outsideAngular),(0,MD.Q)(c.insideAngular))}return(0,ur.pX)(this,ne,u,{spy:{apply:(we,Ze,Le)=>{(we.startsWith("signIn")||we.startsWith("createUser"))&&Le.then(Ke=>G.next(Ke))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ur.Dh),h.LFG(ur.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(oi.HU),h.LFG(yx,8),h.LFG(_x,8),h.LFG(vx,8),h.LFG(Ex,8),h.LFG(wx,8),h.LFG(bx,8),h.LFG(yS,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Ix(n,e){return function aP(n,e=NE.z){return new zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function vS(n,e){return Ix(n,e).pipe((0,kt.U)(t=>({payload:t,type:"query"})))}function VD(n,e){return vS(n,e).pipe(Oi(void 0),Og(),(0,kt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=i.find(A=>A.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function Tx(n,e,t){return VD(n,t).pipe(kr((r,i)=>function lP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function cP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ES(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ES(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ES(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function NC(n,e=gi.y){return n=null!=n?n:OC,(0,Wr.e)((t,r)=>{let i,u=!0;t.subscribe((0,zn.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}(),(0,kt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ES(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Sx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Ax{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=VD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,kt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Oi(void 0),Og(),Zi(([r,i])=>i.length>0||!r),(0,kt.U)(([r,i])=>i),oi.iC)}auditTrail(e){return this.stateChanges(e).pipe(kr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Sx(e);return Tx(this.query,t,this.afs.schedulers.outsideAngular).pipe(oi.iC)}valueChanges(e={}){return vS(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),oi.iC)}get(e){return(0,Vn.D)(this.query.get(e)).pipe(oi.iC)}add(e){return this.ref.add(e)}doc(e){return new Mx(this.ref.doc(e),this.afs)}}class Mx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=Nx(r,t);return new Ax(i,u,this.afs)}snapshotChanges(){return function uP(n,e){return Ix(n,e).pipe(Oi(void 0),Og(),(0,kt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(oi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,kt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Vn.D)(this.ref.get(e)).pipe(oi.iC)}}class dP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?VD(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Zi(t=>t.length>0),oi.iC):VD(this.query,this.afs.schedulers.outsideAngular).pipe(oi.iC)}auditTrail(e){return this.stateChanges(e).pipe(kr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Sx(e);return Tx(this.query,t,this.afs.schedulers.outsideAngular).pipe(oi.iC)}valueChanges(e={}){return vS(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),oi.iC)}get(e){return(0,Vn.D)(this.query.get(e)).pipe(oi.iC)}}const xx=new h.OlP("angularfire2.enableFirestorePersistence"),Rx=new h.OlP("angularfire2.firestore.persistenceSettings"),hP=new h.OlP("angularfire2.firestore.settings"),fP=new h.OlP("angularfire2.firestore.use-emulator");function Nx(n,e=(t=>t)){return{query:e(n),ref:n}}let wS=(()=>{class n{constructor(t,r,i,u,c,p,y,b,A,M,F,U,G,ne,we,Ze,Le){this.schedulers=y;const Ke=(0,ur.on)(t,p,r),ze=A;M&&Dx(Ke,p,F,G,ne,we,U,Ze),[this.firestore,this.persistenceEnabled$]=(0,ur.cc)(`${Ke.name}.firestore`,"AngularFirestore",Ke.name,()=>{const _t=p.runOutsideAngular(()=>Ke.firestore());if(u&&_t.settings(u),ze&&_t.useEmulator(...ze),i&&!vr(c)){const ct=()=>{try{return(0,Vn.D)(_t.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Xt){return"undefined"!=typeof console&&console.warn(Xt),gt(!1)}};return[_t,p.runOutsideAngular(ct)]}return[_t,gt(!1)]},[u,ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=Nx(i,r),p=this.schedulers.ngZone.run(()=>u);return new Ax(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new dP(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Mx(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ur.Dh),h.LFG(ur.xv,8),h.LFG(xx,8),h.LFG(hP,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(oi.HU),h.LFG(Rx,8),h.LFG(fP,8),h.LFG(Cx,8),h.LFG(yx,8),h.LFG(_x,8),h.LFG(vx,8),h.LFG(Ex,8),h.LFG(wx,8),h.LFG(bx,8),h.LFG(yS,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ox=(()=>{class n{constructor(){sP.Z.registerVersion("angularfire",oi.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:xx,useValue:!0},{provide:Rx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[wS]}),n})();const kx=(n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(i=>((i,u,c)=>void 0===i.find(p=>u[p]!==c[p]))(t,i,e))};let tE=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("task-list").add(t)}getAll(t){return this._client.collection("task-list").valueChanges({idField:"id"}).pipe((0,kt.U)(r=>kx(r,t)))}remove(t){this._client.doc("task-list/"+t).delete()}set(t){this._client.doc("task-list/"+t.id).update(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Px=new h.OlP("ADDS_TASK_DTO"),bS=new h.OlP("REMOVES_TASK_DTO"),Fx=new h.OlP("SETS_TASK_DTO");let DS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[tE,{provide:Px,useExisting:tE},{provide:g_,useExisting:tE},{provide:bS,useExisting:tE},{provide:Fx,useExisting:tE}],imports:[[Ox]]}),n})(),Lx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),zp=(()=>{class n extends Lx{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Sl=new h.OlP("NgValueAccessor"),mP={provide:Sl,useExisting:(0,h.Gpc)(()=>BD),multi:!0},_P=new h.OlP("CompositionEventMode");let BD=(()=>{class n extends Lx{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function yP(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(_P,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([mP]),h.qOj]}),n})();const is=new h.OlP("NgValidators"),Vh=new h.OlP("NgAsyncValidators");function Kx(n){return null!=n}function Zx(n){const e=(0,h.QGY)(n)?(0,Vn.D)(n):n;return(0,h.CqO)(e),e}function Yx(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Qx(n,e){return e.map(t=>t(n))}function Jx(n){return n.map(e=>function EP(n){return!n.validate}(e)?e:t=>e.validate(t))}function CS(n){return null!=n?function Xx(n){if(!n)return null;const e=n.filter(Kx);return 0==e.length?null:function(t){return Yx(Qx(t,e))}}(Jx(n)):null}function IS(n){return null!=n?function eR(n){if(!n)return null;const e=n.filter(Kx);return 0==e.length?null:function(t){return function pP(...n){const e=(0,Bn.jO)(n),{args:t,keys:r}=xi(n),i=new zr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let y=c,b=c;for(let A=0;A<c;A++){let M=!1;(0,Io.Xf)(t[A]).subscribe((0,zn.x)(u,F=>{M||(M=!0,b--),p[A]=F},()=>y--,void 0,()=>{(!y||!M)&&(b||u.next(r?Co(r,p):p),u.complete())}))}});return e?i.pipe(Yl(e)):i}(Qx(t,e).map(Zx)).pipe((0,kt.U)(Yx))}}(Jx(n)):null}function tR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nR(n){return n._rawValidators}function rR(n){return n._rawAsyncValidators}function TS(n){return n?Array.isArray(n)?n:[n]:[]}function jD(n,e){return Array.isArray(n)?n.includes(e):n===e}function iR(n,e){const t=TS(e);return TS(n).forEach(i=>{jD(t,i)||t.push(i)}),t}function sR(n,e){return TS(e).filter(t=>!jD(n,t))}class oR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=CS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=IS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Bh extends oR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Rs extends oR{get formDirective(){return null}get path(){return null}}class aR{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let uR=(()=>{class n extends aR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Bh,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),lR=(()=>{class n extends aR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Rs,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function nE(n,e){MS(n,e),e.valueAccessor.writeValue(n.value),function AP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&dR(n,e)})}(n,e),function xP(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function MP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&dR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function SP(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function GD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),zD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function qD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MS(n,e){const t=nR(n);null!==e.validator?n.setValidators(tR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=rR(n);null!==e.asyncValidator?n.setAsyncValidators(tR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();qD(e._rawValidators,i),qD(e._rawAsyncValidators,i)}function zD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=nR(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=rR(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return qD(e._rawValidators,r),qD(e._rawAsyncValidators,r),t}function dR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function NS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const rE="VALID",WD="INVALID",Ty="PENDING",iE="DISABLED";function kS(n){return(KD(n)?n.validators:n)||null}function gR(n){return Array.isArray(n)?CS(n):n||null}function PS(n,e){return(KD(e)?e.asyncValidators:n)||null}function mR(n){return Array.isArray(n)?IS(n):n||null}function KD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const yR=n=>n instanceof VS,FS=n=>n instanceof ZD;function _R(n){return yR(n)?n.value:n.getRawValue()}function vR(n,e){const t=FS(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function ER(n,e){FS(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class LS{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=gR(this._rawValidators),this._composedAsyncValidatorFn=mR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===rE}get invalid(){return this.status===WD}get pending(){return this.status==Ty}get disabled(){return this.status===iE}get enabled(){return this.status!==iE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=gR(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=mR(e)}addValidators(e){this.setValidators(iR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sR(e,this._rawAsyncValidators))}hasValidator(e){return jD(this._rawValidators,e)}hasAsyncValidator(e){return jD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ty,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=iE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=rE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rE||this.status===Ty)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?iE:rE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ty,this._hasOwnPendingAsyncValidator=!0;const t=Zx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function kP(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=FS(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof FP)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?iE:this.errors?WD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ty)?Ty:this._anyControlsHaveStatus(WD)?WD:rE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){KD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class VS extends LS{constructor(e=null,t,r){super(kS(t),PS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),KD(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class ZD extends LS{constructor(e,t,r){super(kS(t),PS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ER(this,e),Object.keys(e).forEach(r=>{vR(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=_R(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class FP extends LS{constructor(e,t,r){super(kS(t),PS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ER(this,e),e.forEach((r,i)=>{vR(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>_R(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let IR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),SR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const US=new h.OlP("NgModelWithFormControlWarning"),qP={provide:Rs,useExisting:(0,h.Gpc)(()=>YD)};let YD=(()=>{class n extends Rs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return nE(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){GD(t.control||null,t,!1),NS(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function pR(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(GD(r||null,t),yR(i)&&(nE(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function hR(n,e){MS(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function RP(n,e){return zD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){MS(this.form,this),this._oldForm&&zD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(is,10),h.Y36(Vh,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([qP]),h.qOj,h.TTD]}),n})();const KP={provide:Bh,useExisting:(0,h.Gpc)(()=>HS)};let HS=(()=>{class n extends Bh{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function RS(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===BD?t=u:function OP(n){return Object.getPrototypeOf(n.constructor)===zp}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function xS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function HD(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Rs,13),h.Y36(is,10),h.Y36(Vh,10),h.Y36(Sl,10),h.Y36(US,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([KP]),h.qOj,h.TTD]}),n})(),HR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[SR]]}),n})(),d1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[HR]}),n})(),GR=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:US,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[HR]}),n})();class h1{constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const f1={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const nr="undefined"!=typeof window&&window||{};var QD=(()=>(function(n){n.isBs3="bs3",n.isBs4="bs4",n.isBs5="bs5"}(QD||(QD={})),QD))();let Wo;function WS(){if(void 0===nr.document)return"bs4";const n=nr.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),nr.document.head.appendChild(n);const e=n.getBoundingClientRect(),t=nr.getComputedStyle(n).paddingLeft;return!e||e&&0!==e.top?(nr.document.head.removeChild(n),"bs3"):t&&parseFloat(t)?(nr.document.head.removeChild(n),"bs4"):(nr.document.head.removeChild(n),"bs5")}function sd(){return void 0===nr||(void 0===nr.__theme?(Wo||(Wo=WS()),"bs3"===Wo):"bs3"===nr.__theme)}function zR(){return!sd()&&(Wo||(Wo=WS()),"bs4"===Wo)}function oE(){return{isBs3:sd(),isBs4:zR(),isBs5:!sd()&&!zR()&&(Wo||(Wo=WS()),"bs5"===Wo)}}function v1(){const n="Change";return function(t,r){const i=` __${r}Value`;Object.defineProperty(t,r,{get(){return this[i]},set(u){const c=this[i];this[i]=u,c!==u&&this[r+n]&&this[r+n].emit(u)}})}}"undefined"==typeof console||console;class JD{}const od="*";function KR(n,e=null){return{type:2,steps:n,options:e}}function XD(n){return{type:6,styles:n,offset:null}}function ZR(n){Promise.resolve(null).then(n)}class aE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ZR(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class YR{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?ZR(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}var C1=O(1144);const I1=["addListener","removeListener"],T1=["addEventListener","removeEventListener"],S1=["on","off"];function eC(n,e,t,r){if((0,yi.m)(t)&&(r=t,t=void 0),r)return eC(n,e,t).pipe(Yl(r));const[i,u]=function x1(n){return(0,yi.m)(n.addEventListener)&&(0,yi.m)(n.removeEventListener)}(n)?T1.map(c=>p=>n[c](e,p,t)):function A1(n){return(0,yi.m)(n.addListener)&&(0,yi.m)(n.removeListener)}(n)?I1.map(QR(n,e)):function M1(n){return(0,yi.m)(n.on)&&(0,yi.m)(n.off)}(n)?S1.map(QR(n,e)):[];if(!i&&(0,C1.z)(n))return(0,Dn.z)(c=>eC(c,e,t))((0,Io.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new zr.y(c=>{const p=(...y)=>c.next(1<y.length?y:y[0]);return i(p),()=>u(p)})}function QR(n,e){return t=>r=>n[t](e,r)}var R1=O(4408);const uE={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=uE;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(u=>{t=void 0,n(u)});return new ua.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=uE;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=uE;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var O1=O(7565);const P1=new class k1 extends O1.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class N1 extends R1.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=uE.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(uE.cancelAnimationFrame(t),e._scheduled=void 0)}});var tC=(()=>(function(n){n.top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top"}(tC||(tC={})),tC))(),lE=(()=>(function(n){n.top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top"}(lE||(lE={})),lE))();function Kp(n,e){if(1!==n.nodeType)return[];const t=n.ownerDocument.defaultView,r=null==t?void 0:t.getComputedStyle(n,null);return e?r&&r[e]:r}function ZS(n){if(!n)return document.documentElement;let r,t=null==n?void 0:n.offsetParent;for(;null===t&&n.nextElementSibling&&r!==n.nextElementSibling;)r=n.nextElementSibling,t=r.offsetParent;const i=t&&t.nodeName;return i&&"BODY"!==i&&"HTML"!==i?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===Kp(t,"position")?ZS(t):t:r?r.ownerDocument.documentElement:document.documentElement}function YS(n){return null!==n.parentNode?YS(n.parentNode):n}function nC(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?n:e,i=t?e:n,u=document.createRange();u.setStart(r,0),u.setEnd(i,0);const c=u.commonAncestorContainer;if(n!==c&&e!==c||r.contains(i))return function F1(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||ZS(n.firstElementChild)===n)}(c)?c:ZS(c);const p=YS(n);return p.host?nC(p.host,e):nC(n,YS(e).host)}function JR(n){if(!n||!n.parentElement)return document.documentElement;let e=n.parentElement;for(;(null==e?void 0:e.parentElement)&&"none"===Kp(e,"transform");)e=e.parentElement;return e||document.documentElement}function XR(n,e){const t="x"===e?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${r}Width`])}function eN(n,e,t,r){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],0)}function tN(n){const e=n.body,t=n.documentElement;return{height:eN("Height",e,t),width:eN("Width",e,t)}}function cE(n){return Object.assign(Object.assign({},n),{right:(n.left||0)+n.width,bottom:(n.top||0)+n.height})}function rr(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function nN(n){const e=n.getBoundingClientRect();if(!(e&&rr(e.top)&&rr(e.left)&&rr(e.bottom)&&rr(e.right)))return e;const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===n.nodeName?tN(n.ownerDocument):void 0,i=(null==r?void 0:r.width)||n.clientWidth||rr(e.right)&&rr(t.left)&&e.right-t.left||0,u=(null==r?void 0:r.height)||n.clientHeight||rr(e.bottom)&&rr(t.top)&&e.bottom-t.top||0;let c=n.offsetWidth-i,p=n.offsetHeight-u;if(c||p){const y=Kp(n);c-=XR(y,"x"),p-=XR(y,"y"),t.width-=c,t.height-=p}return cE(t)}function QS(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function JS(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:r}=Kp(n);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(t))?n:JS(QS(n))}function XS(n,e,t=!1){var r,i,u,c,p,y;const b="HTML"===e.nodeName,A=nN(n),M=nN(e),U=(JS(n),Kp(e)),G=parseFloat(U.borderTopWidth),ne=parseFloat(U.borderLeftWidth);t&&b&&(M.top=Math.max(null!==(r=M.top)&&void 0!==r?r:0,0),M.left=Math.max(null!==(i=M.left)&&void 0!==i?i:0,0));const we=cE({top:(null!==(u=A.top)&&void 0!==u?u:0)-(null!==(c=M.top)&&void 0!==c?c:0)-G,left:(null!==(p=A.left)&&void 0!==p?p:0)-(null!==(y=M.left)&&void 0!==y?y:0)-ne,width:A.width,height:A.height});if(we.marginTop=0,we.marginLeft=0,b){const Ze=parseFloat(U.marginTop),Le=parseFloat(U.marginLeft);rr(we.top)&&(we.top-=G-Ze),rr(we.bottom)&&(we.bottom-=G-Ze),rr(we.left)&&(we.left-=ne-Le),rr(we.right)&&(we.right-=ne-Le),we.marginTop=Ze,we.marginLeft=Le}return we}function rN(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",r=n.nodeName;if("BODY"===r||"HTML"===r){const i=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||i)[t]}return n[t]}function iN(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===Kp(n,"position")||iN(QS(n)))}function eA(n,e,t=0,r,i=!1){let u={top:0,left:0};const c=i?JR(n):nC(n,e);if("viewport"===r)u=function V1(n,e=!1){const t=n.ownerDocument.documentElement,r=XS(n,t),i=Math.max(t.clientWidth,window.innerWidth||0),u=Math.max(t.clientHeight,window.innerHeight||0),c=e?0:rN(t),p=e?0:rN(t,"left");return cE({top:c-Number(null==r?void 0:r.top)+Number(null==r?void 0:r.marginTop),left:p-Number(null==r?void 0:r.left)+Number(null==r?void 0:r.marginLeft),width:i,height:u})}(c,i);else{let p;"scrollParent"===r?(p=JS(QS(e)),"BODY"===p.nodeName&&(p=n.ownerDocument.documentElement)):p="window"===r?n.ownerDocument.documentElement:r;const y=XS(p,c,i);if(y&&"HTML"===p.nodeName&&!iN(c)){const{height:b,width:A}=tN(n.ownerDocument);rr(u.top)&&rr(y.top)&&rr(y.marginTop)&&(u.top+=y.top-y.marginTop),rr(u.top)&&(u.bottom=Number(b)+Number(y.top)),rr(u.left)&&rr(y.left)&&rr(y.marginLeft)&&(u.left+=y.left-y.marginLeft),rr(u.top)&&(u.right=Number(A)+Number(y.left))}else y&&(u=y)}return rr(u.left)&&(u.left+=t),rr(u.top)&&(u.top+=t),rr(u.right)&&(u.right-=t),rr(u.bottom)&&(u.bottom-=t),u}function B1({width:n,height:e}){return n*e}function sN(n,e,t,r,i=["top","bottom","right","left"],u="viewport",c=0){var p,y,b,A,M,F,U,G,ne,we,Ze,Le;if(-1===n.indexOf("auto"))return n;const Ke=eA(t,r,c,u),ze={top:{width:null!==(p=null==Ke?void 0:Ke.width)&&void 0!==p?p:0,height:(null!==(y=null==e?void 0:e.top)&&void 0!==y?y:0)-(null!==(b=null==Ke?void 0:Ke.top)&&void 0!==b?b:0)},right:{width:(null!==(A=null==Ke?void 0:Ke.right)&&void 0!==A?A:0)-(null!==(M=null==e?void 0:e.right)&&void 0!==M?M:0),height:null!==(F=null==Ke?void 0:Ke.height)&&void 0!==F?F:0},bottom:{width:null!==(U=null==Ke?void 0:Ke.width)&&void 0!==U?U:0,height:(null!==(G=null==Ke?void 0:Ke.bottom)&&void 0!==G?G:0)-(null!==(ne=null==e?void 0:e.bottom)&&void 0!==ne?ne:0)},left:{width:(null!==(we=e.left)&&void 0!==we?we:0)-(null!==(Ze=null==Ke?void 0:Ke.left)&&void 0!==Ze?Ze:0),height:null!==(Le=null==Ke?void 0:Ke.height)&&void 0!==Le?Le:0}},_t=Object.keys(ze).map(_n=>Object.assign(Object.assign({position:_n},ze[_n]),{area:B1(ze[_n])})).sort((_n,Yt)=>Yt.area-_n.area);let ct=_t.filter(({width:_n,height:Yt})=>_n>=t.clientWidth&&Yt>=t.clientHeight);ct=ct.filter(({position:_n})=>i.some(Yt=>Yt===_n));const Xt=ct.length>0?ct[0].position:_t[0].position,wn=n.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${oE().isBs5?lE[Xt]:Xt}`),Xt+(wn?`-${wn}`:"")}const rC=(n,e=0)=>n?parseFloat(n):e;function oN(n){const e=n.ownerDocument.defaultView,t=null==e?void 0:e.getComputedStyle(n),r=rC(null==t?void 0:t.marginTop)+rC(null==t?void 0:t.marginBottom),i=rC(null==t?void 0:t.marginLeft)+rC(null==t?void 0:t.marginRight);return{width:Number(n.offsetWidth)+i,height:Number(n.offsetHeight)+r}}function aN(n,e,t){return XS(e,t?JR(n):nC(n,e),t)}function tA(n,e,t){var r,i,u;const c=t.split(" ")[0],p=oN(n),y={width:p.width,height:p.height},b=-1!==["right","left"].indexOf(c),A=b?"top":"left",M=b?"left":"top",F=b?"height":"width",U=b?"width":"height";return y[A]=(null!==(r=e[A])&&void 0!==r?r:0)+e[F]/2-p[F]/2,y[M]=c===M?(null!==(i=e[M])&&void 0!==i?i:0)-p[U]:null!==(u=e[function j1(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(M)])&&void 0!==u?u:0,y}function uN(n,e){var t;return!!(null===(t=n.modifiers[e])||void 0===t?void 0:t.enabled)}const H1={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function iC(n,e){return!!oE().isBs5&&H1[e].includes(n)}function lN(n,e,t){!n||!e||Object.keys(e).forEach(r=>{let i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&function L1(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(Number(n))}(e[r])&&(i="px"),t?t.setStyle(n,r,`${String(e[r])}${i}`):n.style[r]=String(e[r])+i})}function z1(n){var e,t,r,i,u,c;let p=n.offsets.target;const y=n.instance.target.querySelector(".arrow");if(!y)return n;const b=-1!==["left","right"].indexOf(n.placement.split(" ")[0]),A=b?"height":"width",M=b?"Top":"Left",F=M.toLowerCase(),U=b?"left":"top",G=b?"bottom":"right",ne=oN(y)[A],we=n.placement.split(" ")[1];(null!==(e=n.offsets.host[G])&&void 0!==e?e:0)-ne<(null!==(t=p[F])&&void 0!==t?t:0)&&(p[F]-=(null!==(r=p[F])&&void 0!==r?r:0)-((null!==(i=n.offsets.host[G])&&void 0!==i?i:0)-ne)),Number(n.offsets.host[F])+Number(ne)>(null!==(u=p[G])&&void 0!==u?u:0)&&(p[F]+=Number(n.offsets.host[F])+Number(ne)-Number(p[G])),p=cE(p);const Ze=Kp(n.instance.target),Le=parseFloat(Ze[`margin${M}`])||0,Ke=parseFloat(Ze[`border${M}Width`])||0;let ze;if(we){const ct=parseFloat(Ze.borderRadius)||0,Xt=Number(Le+Ke+ct);ze=F===we?Number(n.offsets.host[F])+Xt:Number(n.offsets.host[F])+Number(n.offsets.host[A]-Xt)}else ze=Number(n.offsets.host[F])+Number(n.offsets.host[A]/2-ne/2);let _t=ze-(null!==(c=p[F])&&void 0!==c?c:0)-Le-Ke;return _t=Math.max(Math.min(p[A]-(ne+5),_t),0),n.offsets.arrow={[F]:Math.round(_t),[U]:""},n.instance.arrow=y,n}function W1(n){if(n.offsets.target=cE(n.offsets.target),!uN(n.options,"flip"))return n.offsets.target=Object.assign(Object.assign({},n.offsets.target),tA(n.instance.target,n.offsets.host,n.placement)),n;const e=eA(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],r=n.placement.split(" ")[1]||"";const p=sN("auto",n.offsets.host,n.instance.target,n.instance.host,n.options.allowedPositions),y=[t,p];return y.forEach((b,A)=>{var M,F,U,G,ne,we,Ze,Le,Ke,ze,_t,ct,Xt,wn,_n,Yt;if(t!==b||y.length===A+1)return;t=n.placement.split(" ")[0];const bn="left"===t&&Math.floor(null!==(M=n.offsets.target.right)&&void 0!==M?M:0)>Math.floor(null!==(F=n.offsets.host.left)&&void 0!==F?F:0)||"right"===t&&Math.floor(null!==(U=n.offsets.target.left)&&void 0!==U?U:0)<Math.floor(null!==(G=n.offsets.host.right)&&void 0!==G?G:0)||"top"===t&&Math.floor(null!==(ne=n.offsets.target.bottom)&&void 0!==ne?ne:0)>Math.floor(null!==(we=n.offsets.host.top)&&void 0!==we?we:0)||"bottom"===t&&Math.floor(null!==(Ze=n.offsets.target.top)&&void 0!==Ze?Ze:0)<Math.floor(null!==(Le=n.offsets.host.bottom)&&void 0!==Le?Le:0),Ns=Math.floor(null!==(Ke=n.offsets.target.left)&&void 0!==Ke?Ke:0)<Math.floor(null!==(ze=e.left)&&void 0!==ze?ze:0),Ml=Math.floor(null!==(_t=n.offsets.target.right)&&void 0!==_t?_t:0)>Math.floor(null!==(ct=e.right)&&void 0!==ct?ct:0),gE=Math.floor(null!==(Xt=n.offsets.target.top)&&void 0!==Xt?Xt:0)<Math.floor(null!==(wn=e.top)&&void 0!==wn?wn:0),mE=Math.floor(null!==(_n=n.offsets.target.bottom)&&void 0!==_n?_n:0)>Math.floor(null!==(Yt=e.bottom)&&void 0!==Yt?Yt:0),st="left"===t&&Ns||"right"===t&&Ml||"top"===t&&gE||"bottom"===t&&mE,yt=-1!==["top","bottom"].indexOf(t),At=yt&&"left"===r&&Ns||yt&&"right"===r&&Ml||!yt&&"left"===r&&gE||!yt&&"right"===r&&mE;(bn||st||At)&&((bn||st)&&(t=y[A+1]),At&&(r=function $1(n){return"right"===n?"left":"left"===n?"right":n}(r)),n.placement=t+(r?` ${r}`:""),n.offsets.target=Object.assign(Object.assign({},n.offsets.target),tA(n.instance.target,n.offsets.host,n.placement)))}),n}function Z1(n){var e;if(!uN(n.options,"preventOverflow"))return n;const t="transform",r=n.instance.target.style,{top:i,left:u,[t]:c}=r;r.top="",r.left="",r[t]="";const p=eA(n.instance.target,n.instance.host,0,(null===(e=n.options.modifiers.preventOverflow)||void 0===e?void 0:e.boundariesElement)||"scrollParent",!1);r.top=i,r.left=u,r[t]=c;const b={primary(A){var M,F,U,G;let ne=n.offsets.target[A];return(null!==(M=n.offsets.target[A])&&void 0!==M?M:0)<(null!==(F=p[A])&&void 0!==F?F:0)&&(ne=Math.max(null!==(U=n.offsets.target[A])&&void 0!==U?U:0,null!==(G=p[A])&&void 0!==G?G:0)),{[A]:ne}},secondary(A){var M,F,U,G;const ne="right"===A,we=ne?"left":"top";let Le=n.offsets.target[we];return(null!==(M=n.offsets.target[A])&&void 0!==M?M:0)>(null!==(F=p[A])&&void 0!==F?F:0)&&(Le=Math.min(null!==(U=n.offsets.target[we])&&void 0!==U?U:0,(null!==(G=p[A])&&void 0!==G?G:0)-n.offsets.target[ne?"width":"height"])),{[we]:Le}}};return["left","right","top","bottom"].forEach(A=>{const M=-1!==["left","top","start"].indexOf(A)?b.primary:b.secondary;n.offsets.target=Object.assign(Object.assign({},n.offsets.target),M(A))}),n}function Y1(n){var e;const t=n.placement,r=t.split(" ")[0],i=t.split(" ")[1];if(i){const{host:u,target:c}=n.offsets,p=-1!==["bottom","top"].indexOf(r),y=p?"left":"top",b=p?"width":"height",A={start:{[y]:u[y]},end:{[y]:(null!==(e=u[y])&&void 0!==e?e:0)+u[b]-c[b]}};n.offsets.target=Object.assign(Object.assign({},c),{[y]:y===i?A.start[y]:A.end[y]})}return n}const J1=new class Q1{position(e,t){return this.offset(e,t)}offset(e,t){return aN(t,e)}positionElements(e,t,r,i,u){const c=[W1,Y1,Z1,z1],y=function K1(n,e,t,r){if(!n||!e)return;const i=aN(n,e);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const u=!!t.match(/auto/g);let c=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const p=c.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return p&&(c=p[1]+(p[2]?` ${p[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(c)&&(c="auto"),c=sN(c,i,n,e,r?r.allowedPositions:void 0),{options:r||{modifiers:{}},instance:{target:n,host:e,arrow:void 0},offsets:{target:tA(n,i,c),host:i,arrow:void 0},positionFixed:!1,placement:c,placementAuto:u}}(t,e,tC[r],u);if(y)return c.reduce((b,A)=>A(b),y)}};function X1(n,e,t,r,i,u){const c=J1.positionElements(n,e,t,r,i);if(!c)return;const p=function U1(n){var e,t,r,i;return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(null!==(e=n.offsets.target.left)&&void 0!==e?e:0),top:Math.round(null!==(t=n.offsets.target.top)&&void 0!==t?t:0),bottom:Math.round(null!==(r=n.offsets.target.bottom)&&void 0!==r?r:0),right:Math.floor(null!==(i=n.offsets.target.right)&&void 0!==i?i:0)}}(c);lN(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${p.left}px, ${p.top}px, 0px)`},u),c.instance.arrow&&lN(c.instance.arrow,c.offsets.arrow,u),function q1(n,e){const t=n.instance.target;let r=t.className;const i=oE().isBs5?lE[n.placement]:n.placement;n.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),-1!==r.indexOf("popover")&&(r=r+" "+function G1(n){return oE().isBs5?iC(n,"end")?"ms-2":iC(n,"start")?"me-2":iC(n,"top")?"mb-2":iC(n,"bottom")?"mt-2":"":""}(i)),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e?e.setAttribute(t,"class",r):t.className=r}(c,u)}let sC=(()=>{class n{constructor(t,r,i){this.update$$=new ar.x,this.positionElements=new Map,this.isDisabled=!1,xr(i)&&t.runOutsideAngular(()=>{this.triggerEvent$=(0,qM.T)(eC(window,"scroll",{passive:!0}),eC(window,"resize",{passive:!0}),gt(0,P1),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(u=>{X1(oC(u.target),oC(u.element),u.attachment,u.appendToBody,this.options,r.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(oC(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(oC(t))}setOptions(t){this.options=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(h.FYo),h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oC(n){return"string"==typeof n?document.querySelector(n):n instanceof h.SBq?n.nativeElement:null!=n?n:null}class dE{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class eF{constructor(e,t,r,i,u,c,p,y){this._viewContainerRef=e,this._renderer=t,this._elementRef=r,this._injector=i,this._componentFactoryResolver=u,this._ngZone=c,this._applicationRef=p,this._posService=y,this.onBeforeShow=new h.vpe,this.onShown=new h.vpe,this.onBeforeHide=new h.vpe,this.onHidden=new h.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);const t=h.zs3.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof h.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const r=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){var t,r,i,u,c,p;if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const y=this._componentRef.location.nativeElement;return null===(t=y.parentNode)||void 0===t||t.removeChild(y),null===(i=null===(r=this._contentRef)||void 0===r?void 0:r.componentRef)||void 0===i||i.destroy(),this._viewContainerRef&&(null===(u=this._contentRef)||void 0===u?void 0:u.viewRef)&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),null===(p=null===(c=this._contentRef)||void 0===c?void 0:c.viewRef)||void 0===p||p.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){var t;this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||(null===(t=this._elementRef)||void 0===t?void 0:t.nativeElement);const r=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),i=this._listenOpts.show=c=>{e.show?e.show(c):this.show(c),c()};return this._renderer&&(this._unregisterListenersFn=function p1(n,e){const t=function qR(n,e=f1){const t=(n||"").trim();if(0===t.length)return[];const r=t.split(/\s+/).map(u=>u.split(":")).map(u=>{const c=e[u[0]]||u;return new h1(c[0],c[1])}),i=r.filter(u=>u.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const i=[],u=[],c=()=>{u.forEach(p=>i.push(p())),u.length=0};return t.forEach(p=>{const y=p.open===p.close,b=y?e.toggle:e.show;if(!y&&p.close&&e.hide){const A=n.listen(r,p.close,e.hide);u.push(()=>A)}b&&i.push(n.listen(r,p.open,()=>b(c)))}),()=>{i.forEach(p=>p())}}(this._renderer,{target:e.target,triggers:e.triggers,show:i,hide:r,toggle:c=>{this.isShown?r():i(c)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,t){return e&&t&&(this._inlineViewRef=e.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function g1(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function m1(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{var e;this._posService.position({element:null===(e=this._componentRef)||void 0===e?void 0:e.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,t,r){if(!e)return new dE([]);if(e instanceof h.Rgc){if(this._viewContainerRef){const c=this._viewContainerRef.createEmbeddedView(e,t);return c.markForCheck(),new dE([c.rootNodes],c)}const u=e.createEmbeddedView({});return this._applicationRef.attachView(u),new dE([u.rootNodes],u)}if("function"==typeof e){const u=this._componentFactoryResolver.resolveComponentFactory(e),c=h.zs3.create({providers:this._providers,parent:this._injector}),p=u.create(c);return Object.assign(p.instance,r),this._applicationRef.attachView(p.hostView),new dE([[p.location.nativeElement]],p.hostView,p)}const i=this._renderer?[this._renderer.createText(`${e}`)]:[];return new dE([i])}}let hE=(()=>{class n{constructor(t,r,i,u,c){this._componentFactoryResolver=t,this._ngZone=r,this._injector=i,this._posService=u,this._applicationRef=c}createLoader(t,r,i){return new eF(r,i,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h._Vd),h.LFG(h.R0b),h.LFG(h.zs3),h.LFG(sC),h.LFG(h.z2F))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tF=function(n){return{dropdown:n}},nF=["*"],cN=[XD({height:0,overflow:"hidden"}),function D1(n,e=null){return{type:4,styles:e,timings:n}}("220ms cubic-bezier(0, 0, 0.2, 1)",XD({height:"*",overflow:"hidden"}))];let nA,Zp=(()=>{class n{constructor(){this.direction="down",this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1,this.isOpenChange=new h.vpe,this.isDisabledChange=new h.vpe,this.toggleClick=new h.vpe,this.counts=0,this.dropdownMenu=new Promise(t=>{this.resolveDropdownMenu=t})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),iF=(()=>{class n{constructor(t,r,i,u,c){this._state=t,this.cd=r,this._renderer=i,this._element=u,this.isOpen=!1,this._factoryDropDownAnimation=c.build(cN),this._subscription=t.isOpenChange.subscribe(p=>{this.isOpen=p;const y=this._element.nativeElement.querySelector(".dropdown-menu");this._renderer.addClass(this._element.nativeElement.querySelector("div"),"open"),y&&!sd()&&(this._renderer.addClass(y,"show"),(y.classList.contains("dropdown-menu-right")||y.classList.contains("dropdown-menu-end"))&&(this._renderer.setStyle(y,"left","auto"),this._renderer.setStyle(y,"right","0")),"up"===this.direction&&(this._renderer.setStyle(y,"top","auto"),this._renderer.setStyle(y,"transform","translateY(-101%)"))),y&&this._state.isAnimated&&this._factoryDropDownAnimation.create(y).play(),this.cd.markForCheck(),this.cd.detectChanges()})}get direction(){return this._state.direction}_contains(t){return this._element.nativeElement.contains(t)}ngOnDestroy(){this._subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Zp),h.Y36(h.sBO),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(JD))},n.\u0275cmp=h.Xpm({type:n,selectors:[["bs-dropdown-container"]],hostAttrs:[2,"display","block","position","absolute","z-index","1040"],ngContentSelectors:nF,decls:2,vars:9,consts:[[3,"ngClass"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div",0),h.Hsn(1),h.qZA()),2&t&&(h.ekj("dropup","up"===r.direction)("show",r.isOpen)("open",r.isOpen),h.Q6J("ngClass",h.VKq(7,tF,"down"===r.direction)))},directives:[zi],encapsulation:2,changeDetection:0}),n})(),sF=(()=>{class n{constructor(){this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dN=(()=>{class n{constructor(t,r,i,u,c,p,y){this._elementRef=t,this._renderer=r,this._viewContainerRef=i,this._cis=u,this._state=c,this._config=p,this.dropup=!1,this._isInlineOpen=!1,this._isDisabled=!1,this._subscriptions=[],this._isInited=!1,this._state.autoClose=this._config.autoClose,this._state.insideClick=this._config.insideClick,this._state.isAnimated=this._config.isAnimated,this._state.stopOnClickPropagation=this._config.stopOnClickPropagation,this._factoryDropDownAnimation=y.build(cN),this._dropdown=this._cis.createLoader(this._elementRef,this._viewContainerRef,this._renderer).provide({provide:Zp,useValue:this._state}),this.onShown=this._dropdown.onShown,this.onHidden=this._dropdown.onHidden,this.isOpenChange=this._state.isOpenChange}set autoClose(t){this._state.autoClose=t}get autoClose(){return this._state.autoClose}set isAnimated(t){this._state.isAnimated=t}get isAnimated(){return this._state.isAnimated}set insideClick(t){this._state.insideClick=t}get insideClick(){return this._state.insideClick}set isDisabled(t){this._isDisabled=t,this._state.isDisabledChange.emit(t),t&&this.hide()}get isDisabled(){return this._isDisabled}get isOpen(){return this._showInline?this._isInlineOpen:this._dropdown.isShown}set isOpen(t){t?this.show():this.hide()}get isBs4(){return!sd()}get _showInline(){return!this.container}ngOnInit(){this._isInited||(this._isInited=!0,this._dropdown.listen({outsideClick:!1,triggers:this.triggers,show:()=>this.show()}),this._subscriptions.push(this._state.toggleClick.subscribe(t=>this.toggle(t))),this._subscriptions.push(this._state.isDisabledChange.pipe(Zi(t=>t)).subscribe(()=>this.hide())))}show(){if(!this.isOpen&&!this.isDisabled){if(this._showInline)return this._inlinedMenu||this._state.dropdownMenu.then(t=>{this._dropdown.attachInline(t.viewContainer,t.templateRef),this._inlinedMenu=this._dropdown._inlineViewRef,this.addBs4Polyfills(),this._inlinedMenu&&this._renderer.addClass(this._inlinedMenu.rootNodes[0].parentNode,"open"),this.playAnimation()}).catch(),this.addBs4Polyfills(),this._isInlineOpen=!0,this.onShown.emit(!0),this._state.isOpenChange.emit(!0),void this.playAnimation();this._state.dropdownMenu.then(t=>{const r=this.dropup||void 0!==this.dropup&&this.dropup;this._state.direction=r?"up":"down";const i=this.placement||(r?"top start":"bottom start");this._dropdown.attach(iF).to(this.container).position({attachment:i}).show({content:t.templateRef,placement:i}),this._state.isOpenChange.emit(!0)}).catch()}}hide(){!this.isOpen||(this._showInline?(this.removeShowClass(),this.removeDropupStyles(),this._isInlineOpen=!1,this.onHidden.emit(!0)):this._dropdown.hide(),this._state.isOpenChange.emit(!1))}toggle(t){return this.isOpen||!t?this.hide():this.show()}_contains(t){return this._elementRef.nativeElement.contains(t.target)||this._dropdown.instance&&this._dropdown.instance._contains(t.target)}navigationClick(t){const r=this._elementRef.nativeElement.querySelector(".dropdown-menu");if(!r)return;const i=this._elementRef.nativeElement.ownerDocument.activeElement,u=r.querySelectorAll(".dropdown-item");switch(t.keyCode){case 38:this._state.counts>0&&u[--this._state.counts].focus();break;case 40:this._state.counts+1<u.length&&(i.classList!==u[this._state.counts].classList?u[this._state.counts].focus():u[++this._state.counts].focus())}t.preventDefault()}ngOnDestroy(){for(const t of this._subscriptions)t.unsubscribe();this._dropdown.dispose()}addBs4Polyfills(){sd()||(this.addShowClass(),this.checkRightAlignment(),this.addDropupStyles())}playAnimation(){this._state.isAnimated&&this._inlinedMenu&&setTimeout(()=>{this._inlinedMenu&&this._factoryDropDownAnimation.create(this._inlinedMenu.rootNodes[0]).play()})}addShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.addClass(this._inlinedMenu.rootNodes[0],"show")}removeShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.removeClass(this._inlinedMenu.rootNodes[0],"show")}checkRightAlignment(){if(this._inlinedMenu&&this._inlinedMenu.rootNodes[0]){const t=this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-right")||this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-end");this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"left",t?"auto":"0"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"right",t?"0":"auto")}}addDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"top",this.dropup?"auto":"100%"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"transform",this.dropup?"translateY(-101%)":"translateY(0)"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"bottom","auto"))}removeDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"top"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"transform"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"bottom"))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.s_b),h.Y36(hE),h.Y36(Zp),h.Y36(sF),h.Y36(JD))},n.\u0275dir=h.lG2({type:n,selectors:[["","bsDropdown",""],["","dropdown",""]],hostVars:6,hostBindings:function(t,r){1&t&&h.NdJ("keydown.arrowDown",function(u){return r.navigationClick(u)})("keydown.arrowUp",function(u){return r.navigationClick(u)}),2&t&&h.ekj("dropup",r.dropup)("open",r.isOpen)("show",r.isOpen&&r.isBs4)},inputs:{placement:"placement",triggers:"triggers",container:"container",dropup:"dropup",autoClose:"autoClose",isAnimated:"isAnimated",insideClick:"insideClick",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange",onShown:"onShown",onHidden:"onHidden"},exportAs:["bs-dropdown"],features:[h._Bn([Zp])]}),n})(),oF=(()=>{class n{constructor(t,r,i){t.resolveDropdownMenu({templateRef:i,viewContainer:r})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Zp),h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","bsDropdownMenu",""],["","dropdownMenu",""]],exportAs:["bs-dropdown-menu"]}),n})(),aF=(()=>{class n{constructor(t,r,i,u,c){this._changeDetectorRef=t,this._dropdown=r,this._element=i,this._renderer=u,this._state=c,this.isOpen=!1,this._subscriptions=[],this._subscriptions.push(this._state.isOpenChange.subscribe(p=>{this.isOpen=p,p?(this._documentClickListener=this._renderer.listen("document","click",y=>{this._state.autoClose&&2!==y.button&&!this._element.nativeElement.contains(y.target)&&(!this._state.insideClick||!this._dropdown._contains(y))&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())}),this._escKeyUpListener=this._renderer.listen(this._element.nativeElement,"keyup.esc",()=>{this._state.autoClose&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())})):(this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener())})),this._subscriptions.push(this._state.isDisabledChange.subscribe(p=>this.isDisabled=p||void 0))}onClick(t){this._state.stopOnClickPropagation&&t.stopPropagation(),!this.isDisabled&&this._state.toggleClick.emit(!0)}ngOnDestroy(){this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener();for(const t of this._subscriptions)t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO),h.Y36(dN),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(Zp))},n.\u0275dir=h.lG2({type:n,selectors:[["","bsDropdownToggle",""],["","dropdownToggle",""]],hostVars:3,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u)}),2&t&&h.uIk("aria-haspopup",!0)("disabled",r.isDisabled)("aria-expanded",r.isOpen)},exportAs:["bs-dropdown-toggle"]}),n})(),uF=(()=>{class n{static forRoot(){return{ngModule:n,providers:[hE,sC,Zp]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Fn]]}),n})(),lF=(()=>{class n{constructor(){this._focusTrapStack=[]}register(t){this._focusTrapStack=this._focusTrapStack.filter(i=>i!==t);let r=this._focusTrapStack;r.length&&r[r.length-1]._disable(),r.push(t),t._enable()}deregister(t){t._disable();const r=this._focusTrapStack,i=r.indexOf(t);-1!==i&&(r.splice(i,1),r.length&&r[r.length-1]._enable())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{nA="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){nA=!1}let hN=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?xr(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!nA)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fN=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function dF(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function cF(n){try{return n.frameElement}catch(e){return null}}(function vF(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===gN(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),u=gN(t);return t.hasAttribute("contenteditable")?-1!==u:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function yF(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==u:"video"===i?-1!==u&&(null!==u||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function _F(n){return!function fF(n){return function gF(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function hF(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function pF(n){return function mF(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||pN(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(hN))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pN(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function gN(n){if(!pN(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function mN(n){return null!=n&&"false"!=`${n}`}class EF{constructor(e,t,r,i,u=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,u||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let r=0;r<t.length;r++)t[r].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]):t[r].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return null==t||t.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=0;r<t.length;r++){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=t.length-1;r>=0;r--){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,To.q)(1)).subscribe(e)}}let wF=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new EF(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fN),h.LFG(h.R0b),h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bF=(()=>{class n{constructor(t,r,i){this._elementRef=t,this._focusTrapFactory=r,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=i,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=mN(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=mN(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const r=t.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(wF),h.Y36(re))},n.\u0275dir=h.lG2({type:n,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[h.TTD]}),n})(),yN=(()=>{class n{static forRoot(){return{ngModule:n,providers:[lF,hN,fN]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Fn]]}),n})();const DF=["*"];let rA=(()=>{class n{constructor(){this.hide=()=>{},this.setClass=()=>{}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),_N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const aC={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},CF=new h.OlP("override-default-config");let IF=(()=>{class n{constructor(t,r,i){this._element=r,this._renderer=i,this.isShown=!1,this.isAnimated=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,sd()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(t){this.clickStartedInContent=t.target!==this._element.nativeElement}onClickStop(t){var r;this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(null===(r=this.bsModalService)||void 0===r||r.setDismissReason("backdrop-click"),this.hide())}onPopState(){var t;null===(t=this.bsModalService)||void 0===t||t.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(t){var r,i;!this.isShown||((27===t.keyCode||"Escape"===t.key)&&t.preventDefault(),this.config.keyboard&&this.level===(null===(r=this.bsModalService)||void 0===r?void 0:r.getModalsCount())&&(null===(i=this.bsModalService)||void 0===i||i.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding&&this.isShown){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,sd()?"in":"show"),setTimeout(()=>{var t,r;this.isShown=!1,document&&document.body&&1===(null===(t=this.bsModalService)||void 0===t?void 0:t.getModalsCount())&&(this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","")),null===(r=this.bsModalService)||void 0===r||r.hide(this.config.id),this.isModalHiding=!1},this.isAnimated?300:0)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_N),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275cmp=h.Xpm({type:n,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(t,r){1&t&&h.NdJ("mousedown",function(u){return r.onClickStarted(u)})("click",function(u){return r.onClickStop(u)})("popstate",function(){return r.onPopState()},!1,h.Jf7)("keydown.esc",function(u){return r.onEsc(u)},!1,h.Jf7),2&t&&h.uIk("aria-modal",!0)("aria-labelledby",r.config.ariaLabelledBy)("aria-describedby",r.config.ariaDescribedby)},ngContentSelectors:DF,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div",0)(1,"div",1),h.Hsn(2),h.qZA()()),2&t&&h.Tol("modal-dialog"+(r.config.class?" "+r.config.class:""))},directives:[bF],encapsulation:2}),n})(),TF=(()=>{class n{constructor(t,r){this._isAnimated=!1,this._isShown=!1,this.element=t,this.renderer=r}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,"in"):this.renderer.removeClass(this.element.nativeElement,"in"),sd()||(t?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),class E1{static reflow(e){}static getStyles(e){let t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=nr),t.getComputedStyle(e)}static stackOverflowConfig(){const e=function _1(){const n=oE(),e=Object.keys(n).find(t=>n[t]);return QD[e]}();return{crossorigin:"bs3"!==e?"anonymous":void 0,integrity:"bs5"===e?"sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We":"bs4"===e?"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2":void 0,cdnLink:"bs5"===e?"https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css":"bs4"===e?"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}}}.reflow(this.element.nativeElement)),this.isShown=!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275cmp=h.Xpm({type:n,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),SF=1,sA=(()=>{class n{constructor(t,r,i){this.clf=r,this.modalDefaultOption=i,this.onShow=new h.vpe,this.onShown=new h.vpe,this.onHide=new h.vpe,this.onHidden=new h.vpe,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._backdropLoader=this.clf.createLoader(),this._renderer=t.createRenderer(null,null),this.config=i?Object.assign({},aC,i):aC}show(t,r){this.modalsCount++,this._createLoaders();const i=(null==r?void 0:r.id)||SF++;return this.config=this.modalDefaultOption?Object.assign({},aC,this.modalDefaultOption,r):Object.assign({},aC,r),this.config.id=i,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(t)}hide(t){(1===this.modalsCount||null==t)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=t?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=!0===this.config.backdrop||"static"===this.config.backdrop,r=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&r&&(this._backdropLoader.attach(TF).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){var r;const i=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const p of this.config.providers)i.provide(p);const u=new rA,c=i.provide({provide:_N,useValue:this.config}).provide({provide:rA,useValue:u}).attach(IF).to("body");return u.hide=()=>{var p;return null===(p=c.instance)||void 0===p?void 0:p.hide()},u.setClass=p=>{c.instance&&(c.instance.config.class=p)},u.onHidden=new h.vpe,u.onHide=new h.vpe,this.copyEvent(i.onBeforeHide,u.onHide),this.copyEvent(i.onHidden,u.onHidden),c.show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),c.instance&&(c.instance.level=this.getModalsCount(),u.content=i.getInnerComponent(),u.id=null===(r=c.instance.config)||void 0===r?void 0:r.id),u}_hideModal(t){if(null!=t){const r=this.loaders.findIndex(u=>{var c;return(null===(c=u.instance)||void 0===c?void 0:c.config.id)===t}),i=this.loaders[r];i&&i.hide(t)}else this.loaders.forEach(r=>{r.instance&&r.hide(r.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!document||(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const t=this._renderer.createElement("div");this._renderer.addClass(t,"modal-scrollbar-measure"),this._renderer.appendChild(document.body,t);const r=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(document.body,t),r}_createLoaders(){const t=this.clf.createLoader();this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)}removeLoaders(t){if(null!=t){const r=this.loaders.findIndex(i=>{var u;return(null===(u=i.instance)||void 0===u?void 0:u.config.id)===t});r>=0&&(this.loaders.splice(r,1),this.loaders.forEach((i,u)=>{i.instance&&(i.instance.level=u+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(t,r){t.subscribe(i=>{r.emit(this.lastDismissReason||i)})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(hE),h.LFG(CF,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();yN.forRoot();let AF=(()=>{class n{static forRoot(){return{ngModule:n,providers:[sA,hE,sC]}}static forChild(){return{ngModule:n,providers:[sA,hE,sC]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[yN]]}),n})();var vN=O(655);function MF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",2),h.NdJ("click",function(){return h.CHM(t),h.oxw(2).close()}),h.TgZ(1,"span",3),h._uU(2,"\xd7"),h.qZA(),h.TgZ(3,"span",4),h._uU(4,"Close"),h.qZA()()}}function xF(n,e){if(1&n&&(h.TgZ(0,"div",1),h.YNc(1,MF,5,0,"ng-template",0),h.Hsn(2),h.qZA()),2&n){const t=h.oxw();h.Tol("alert alert-"+t.type),h.Q6J("ngClass",t.classes),h.xp6(1),h.Q6J("ngIf",t.dismissible)}}const RF=["*"];let NF=(()=>{class n{constructor(){this.type="warning",this.dismissible=!1,this.dismissOnTimeout=void 0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OF=(()=>{class n{constructor(t,r){this.changeDetection=r,this.type="warning",this.dismissible=!1,this.isOpen=!0,this.onClose=new h.vpe,this.onClosed=new h.vpe,this.classes="",this.dismissibleChange=new h.vpe,Object.assign(this,t),this.dismissibleChange.subscribe(()=>{this.classes=this.dismissible?"alert-dismissible":"",this.changeDetection.markForCheck()})}ngOnInit(){this.dismissOnTimeout&&setTimeout(()=>this.close(),parseInt(this.dismissOnTimeout,10))}close(){!this.isOpen||(this.onClose.emit(this),this.isOpen=!1,this.changeDetection.markForCheck(),this.onClosed.emit(this))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(NF),h.Y36(h.sBO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["alert"],["bs-alert"]],inputs:{type:"type",dismissible:"dismissible",dismissOnTimeout:"dismissOnTimeout",isOpen:"isOpen"},outputs:{onClose:"onClose",onClosed:"onClosed"},ngContentSelectors:RF,decls:1,vars:1,consts:[[3,"ngIf"],["role","alert",3,"ngClass"],["type","button","aria-label","Close",1,"close","btn-close",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"sr-only","visually-hidden"]],template:function(t,r){1&t&&(h.F$t(),h.YNc(0,xF,3,4,"ng-template",0)),2&t&&h.Q6J("ngIf",r.isOpen)},directives:[Mr,zi],encapsulation:2,changeDetection:0}),(0,vN.gn)([v1(),(0,vN.w6)("design:type",Object)],n.prototype,"dismissible",void 0),n})(),EN=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Fn]]}),n})(),oA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Fn,GR,d1,uF.forRoot(),EN.forRoot(),AF.forRoot(),_a]]}),n})(),aA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Fn]]}),n})(),wN=(()=>{class n{constructor(t){this._client=t}getAll(t){return this._client.collection("images").valueChanges({idField:"id"}).pipe((0,kt.U)(r=>kx(r,t)))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),uA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[wN,{provide:xE,useExisting:wN}],imports:[[Ox]]}),n})(),kF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Fn]]}),n})(),PF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Fn,_a.forChild([{path:"",component:FA}]),kF,DS,oA,aA,uA]]}),n})();const lA=new h.OlP("TASK_DTO_STORAGE"),cA=new h.OlP("ALERT_DTO_STORAGE");function FF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",8),h.NdJ("click",function(){const u=h.CHM(t).ngIf;return h.oxw().confirm(u.id)}),h._uU(1," Delete task "),h.qZA()}}let LF=(()=>{class n{constructor(t,r,i,u){this._getTaskFromMemoryStorage=t,this._removesTaskDto=r,this.modalRef=i,this._alertDtoStorage=u,this.task$=this._getTaskFromMemoryStorage.asObservable()}confirm(t){var r=this;return(0,ve.Z)(function*(){var i;r._removesTaskDto.remove(t),r._alertDtoStorage.next({alertId:t}),null===(i=r.modalRef)||void 0===i||i.hide(),yield function VF(n){return new Promise(e=>setTimeout(e,n))}(4e3),r._alertDtoStorage.next(void 0)})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lA),h.Y36(bS),h.Y36(rA),h.Y36(cA))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-delete-task"]],decls:13,vars:3,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"h4",1),h._uU(2,"DELETE TASK"),h.qZA(),h.TgZ(3,"button",2),h.NdJ("click",function(){return null==r.modalRef?null:r.modalRef.hide()}),h.TgZ(4,"span",3),h._uU(5,"\xd7"),h.qZA()()(),h.TgZ(6,"div",4),h._uU(7,"Are you sure you want to delete this task?"),h.qZA(),h.TgZ(8,"div",5)(9,"button",6),h.NdJ("click",function(){return null==r.modalRef?null:r.modalRef.hide()}),h._uU(10," Cancel "),h.qZA(),h.YNc(11,FF,2,0,"button",7),h.ALo(12,"async"),h.qZA()),2&t&&(h.xp6(11),h.Q6J("ngIf",h.lcZ(12,1,r.task$)))},directives:[Mr],pipes:[hs],encapsulation:2,changeDetection:0}),n})();function BF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"ul",12)(1,"li",13)(2,"button",14),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit;return h.oxw().onOpenModal(i)}),h._uU(3," Delete Task "),h.qZA()()()}}const UF=function(n){return{"bg-success":n}},jF=function(n){return{"text-decoration-line-through":n}};function $F(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li",3)(1,"div",4)(2,"input",5),h.NdJ("change",function(){const u=h.CHM(t).$implicit;return h.oxw().onCheckedBox(u)}),h.qZA(),h.TgZ(3,"p",6),h._uU(4),h.qZA()(),h.TgZ(5,"div",7)(6,"div",8)(7,"button",9),h._uU(8," ... "),h._UZ(9,"span",10),h.qZA(),h.YNc(10,BF,4,0,"ul",11),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.Q6J("ngClass",h.VKq(5,UF,!0===t.isChecked))("value",t.id)("checked",t.isChecked),h.xp6(1),h.Q6J("ngClass",h.VKq(7,jF,!0===t.isChecked)),h.xp6(1),h.hij(" ",t.text," ")}}let HF=(()=>{class n{constructor(t,r,i,u,c,p){this.modalService=t,this._getsAllTaskDto=r,this._removesTaskDto=i,this._setsTaskDto=u,this.router=c,this._setTaskToInMemoryStorage=p,this.tasks$=this._getsAllTaskDto.getAll().pipe((0,kt.U)(y=>y.sort((b,A)=>b.date-A.date)),(0,Kr.b)(y=>this.goHome(y))),this.alerts=[{type:"success",msg:"Task deleted!",timeout:1}]}onOpenModal(t){this.modalRef=this.modalService.show(LF),this._setTaskToInMemoryStorage.next(t)}onCheckedBox(t){this._setsTaskDto.set(!1===t.isChecked?{id:t.id,isChecked:!0}:{id:t.id,isChecked:!1})}add(){this.alerts.push({type:"info",msg:"Task deleted!",timeout:2e3})}onClosed(t){this.alerts=this.alerts.filter(r=>r!==t)}goHome(t){t.length<1&&this.router.navigate(["/"])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(sA),h.Y36(g_),h.Y36(bS),h.Y36(Fx),h.Y36(Qr),h.Y36(lA))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-get-tasks"]],decls:5,vars:3,consts:[[1,"form-check"],["class","pt-1 d-flex",4,"ngFor","ngForOf"],[1,"py-3"],[1,"pt-1","d-flex"],[1,"p-3","bd-highlight"],["type","checkbox",1,"form-check-input","rounded-circle","pointer",3,"ngClass","value","checked","change"],[1,"d-inline",3,"ngClass"],[1,"ms-auto","p-2","bd-highlight"],["dropdown","",1,"btn-group"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","btn-outline-secondary","border-0"],[1,"caret"],["id","dropdown-basic","class","dropdown-menu","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu"],["role","menuitem"],["type","button",1,"dropdown-item",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"ul",0),h.YNc(1,$F,11,9,"li",1),h.ALo(2,"async"),h.qZA(),h.TgZ(3,"div",2),h._UZ(4,"hr"),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngForOf",h.lcZ(2,1,r.tasks$)))},directives:[Hn,zi,dN,aF,oF],pipes:[hs],encapsulation:2,changeDetection:0}),n})(),bN=(()=>{class n{constructor(t,r){this._addsTaskDto=t,this.router=r,this.taskMessage="",this.createTask=new ZD({text:new VS})}onCreateTaskSubmited(t){var r;this._addsTaskDto.add({text:null===(r=t.get("text"))||void 0===r?void 0:r.value,isChecked:!1,date:(new Date).getTime()}),this.createTask.reset(),this.router.navigate(["/addTask"])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Px),h.Y36(Qr))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-create-task"]],decls:10,vars:3,consts:[[1,"row","row-cols-1","row-cols-md-3"],[1,"pt-2","col"],[3,"formGroup","ngSubmit"],["formControlName","text","rows","3","placeholder","Write your message here",1,"form-control",3,"ngModel","ngModelChange"],[1,"mt-4","d-grid","gap-2","d-md-block"],["type","submit",1,"btn","btn-danger",2,"background-color","#d40909bc",3,"disabled"],["type","button",1,"ms-4","btn","btn-outline-dark",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"form",2),h.NdJ("ngSubmit",function(){return r.onCreateTaskSubmited(r.createTask)}),h.TgZ(3,"textarea",3),h.NdJ("ngModelChange",function(u){return r.taskMessage=u}),h._uU(4,"      "),h.qZA(),h.TgZ(5,"div",4)(6,"button",5),h._uU(7," Add task "),h.qZA(),h.TgZ(8,"button",6),h.NdJ("click",function(){return r.taskMessage=""}),h._uU(9," Cancel "),h.qZA()()()()()),2&t&&(h.xp6(2),h.Q6J("formGroup",r.createTask),h.xp6(1),h.Q6J("ngModel",r.taskMessage),h.xp6(3),h.Q6J("disabled",""===r.taskMessage))},directives:[IR,lR,YD,BD,uR,HS],encapsulation:2,changeDetection:0}),n})(),GF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-add-task-page"]],decls:3,vars:0,template:function(t,r){1&t&&h._UZ(0,"lib-get-tasks")(1,"lib-create-task")(2,"lib-show-images")},directives:[HF,bN,Ng],encapsulation:2,changeDetection:0}),n})(),DN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Fn,GR,_a]]}),n})(),CN=(()=>{class n extends XT{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),qF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[CN,{provide:lA,useExisting:CN}],imports:[[]]}),n})(),zF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Fn]]}),n})(),IN=(()=>{class n extends XT{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),WF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[IN,{provide:cA,useExisting:IN}],imports:[[]]}),n})(),KF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Fn,_a.forChild([{path:"",component:GF}]),DN,DS,oA,aA,uA,zF]]}),n})(),ZF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-first-task-page"]],decls:2,vars:0,template:function(t,r){1&t&&h._UZ(0,"lib-create-task")(1,"lib-show-images")},directives:[bN,Ng],encapsulation:2,changeDetection:0}),n})(),YF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Fn,_a.forChild([{path:"",component:ZF}]),DN,DS,oA,aA,uA]]}),n})();const QF=[{path:"",loadChildren:()=>PF},{path:"addTask",loadChildren:()=>KF},{path:"firstTask",loadChildren:()=>YF}];let JF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[_a.forRoot(QF)],_a]}),n})();function XF(n,e){if(1&n&&(h.TgZ(0,"li",4)(1,"a",5),h._uU(2),h.qZA()()),2&n){const t=e.$implicit;h.xp6(2),h.hij(" ",t.text,"")}}let eL=(()=>{class n{constructor(){this.navbarItems$=gt([{text:"MICHAL'S TODO APP"}])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-navbar"]],decls:5,vars:3,consts:[[1,"navbar","navbar-expand-md","navbar-dark",2,"background-color","#d40909bc"],[1,"container-xxl","flex-wrap","flex-md-nowrap"],[1,"navbar-nav","flex-row","flex-wrap","bd-navbar-nav","pt-2","py-md-2"],["class","nav-item col-6 col-md-auto",4,"ngFor","ngForOf"],[1,"nav-item","col-6","col-md-auto"],[1,"navbar-brand"]],template:function(t,r){1&t&&(h.TgZ(0,"header",0)(1,"nav",1)(2,"ul",2),h.YNc(3,XF,3,1,"li",3),h.ALo(4,"async"),h.qZA()()()),2&t&&(h.xp6(3),h.Q6J("ngForOf",h.lcZ(4,1,r.navbarItems$)))},directives:[Hn],pipes:[hs],encapsulation:2,changeDetection:0}),n})();function tL(n,e){if(1&n&&(h.TgZ(0,"div",2)(1,"div",3)(2,"p",4),h._uU(3),h.qZA()(),h.TgZ(4,"div",5)(5,"p",6),h._uU(6),h.ALo(7,"date"),h.qZA()()()),2&n){const t=e.$implicit;h.xp6(3),h.hij(" ",t.text," "),h.xp6(3),h.hij(" ",h.lcZ(7,2,t.date)," ")}}let nL=(()=>{class n{constructor(){this.displayData$=gt([{text:"TODAY",date:Date.now()}])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-data-picker"]],decls:4,vars:3,consts:[["class","pt-4 d-flex align-items-center",4,"ngFor","ngForOf"],[1,"pb-2"],[1,"pt-4","d-flex","align-items-center"],[1,"p-0","bd-highlight"],[1,"fs-2","fw-bold"],[1,"p-3","bd-highlight"],[1,"fs-5"]],template:function(t,r){1&t&&(h.YNc(0,tL,8,4,"div",0),h.ALo(1,"async"),h.TgZ(2,"div",1),h._UZ(3,"hr"),h.qZA()),2&t&&h.Q6J("ngForOf",h.lcZ(1,1,r.displayData$))},directives:[Hn],pipes:[hs,qh],encapsulation:2,changeDetection:0}),n})();function rL(n,e){1&n&&(h.TgZ(0,"div")(1,"alert",1),h._uU(2,"1 task deleted!"),h.qZA()())}let iL=(()=>{class n{constructor(t){this._alertDtoStorage=t,this.alert$=this._alertDtoStorage.asObservable()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(cA))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-alert"]],decls:2,vars:3,consts:[[4,"ngIf"],["type","success"]],template:function(t,r){if(1&t&&(h.YNc(0,rL,3,0,"div",0),h.ALo(1,"async")),2&t){let i;h.Q6J("ngIf",null!=(null==(i=h.lcZ(1,1,r.alert$))?null:i.alertId))}},directives:[Mr,OF],pipes:[hs],encapsulation:2,changeDetection:0}),n})(),sL=(()=>{class n{constructor(){this.title="my-todo-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"container"],[1,"position-relative","position-relative-example"],[1,"position-absolute","top-0","end-0"],[1,"w-10","p-1"]],template:function(t,r){1&t&&(h._UZ(0,"lib-navbar"),h.TgZ(1,"div",0),h._UZ(2,"lib-data-picker"),h.TgZ(3,"div",1)(4,"div",2)(5,"div",3),h._UZ(6,"lib-alert"),h.qZA()()(),h._UZ(7,"router-outlet"),h.qZA())},directives:[eL,nL,iL,pc],styles:[""]}),n})();const nn=!1;function TN(n){return new h.vHH(3e3,nn)}function BL(){return"undefined"!=typeof window&&void 0!==window.document}function dA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Uh(n){switch(n.length){case 0:return new aE;case 1:return n[0];default:return new YR(n)}}function SN(n,e,t,r,i={},u={}){const c=[],p=[];let y=-1,b=null;if(r.forEach(A=>{const M=A.offset,F=M==y,U=F&&b||{};Object.keys(A).forEach(G=>{let ne=G,we=A[G];if("offset"!==G)switch(ne=e.normalizePropertyName(ne,c),we){case"!":we=i[G];break;case od:we=u[G];break;default:we=e.normalizeStyleValue(G,ne,we,c)}U[ne]=we}),F||p.push(U),b=U,y=M}),c.length)throw function AL(n){return new h.vHH(3502,nn)}();return p}function hA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&fA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&fA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&fA(t,"destroy",n)))}}function fA(n,e,t){const r=t.totalTime,u=pA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function pA(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Ko(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function AN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let gA=(n,e)=>!1,MN=(n,e,t)=>[],xN=null;function mA(n){const e=n.parentNode||n.host;return e===xN?null:e}(dA()||"undefined"!=typeof Element)&&(BL()?(xN=(()=>document.documentElement)(),gA=(n,e)=>{for(;e;){if(e===n)return!0;e=mA(e)}return!1}):gA=(n,e)=>n.contains(e),MN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Yp=null,RN=!1;function NN(n){Yp||(Yp=function jL(){return"undefined"!=typeof document?document.body:null}()||{},RN=!!Yp.style&&"WebkitAppearance"in Yp.style);let e=!0;return Yp.style&&!function UL(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Yp.style,!e&&RN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Yp.style)),e}const ON=gA,kN=MN;let PN=(()=>{class n{validateStyleProperty(t){return NN(t)}matchesElement(t,r){return!1}containsElement(t,r){return ON(t,r)}getParentElement(t){return mA(t)}query(t,r,i){return kN(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,p=[],y){return new aE(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),yA=(()=>{class n{}return n.NOOP=new PN,n})();const _A="ng-enter",cC="ng-leave",dC="ng-trigger",hC=".ng-trigger",LN="ng-animating",vA=".ng-animating";function Qp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:EA(parseFloat(e[1]),e[2])}function EA(n,e){return"s"===e?1e3*n:n}function fC(n,e,t){return n.hasOwnProperty("duration")?n:function GL(n,e,t){let i,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(TN()),{duration:0,delay:0,easing:""};i=EA(parseFloat(p[1]),p[2]);const y=p[3];null!=y&&(u=EA(parseFloat(y),p[4]));const b=p[5];b&&(c=b)}else i=n;if(!t){let p=!1,y=e.length;i<0&&(e.push(function oL(){return new h.vHH(3100,nn)}()),p=!0),u<0&&(e.push(function aL(){return new h.vHH(3101,nn)}()),p=!0),p&&e.splice(y,0,TN())}return{duration:i,delay:u,easing:c}}(n,e,t)}function Sy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function jh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Sy(n,t);return t}function BN(n,e,t){return t?e+":"+t+";":""}function UN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=BN(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=BN(0,WL(t),n.style[t]));n.setAttribute("style",e)}function Al(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=bA(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),dA()&&UN(n))}function Jp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=bA(t);n.style[r]=""}),dA()&&UN(n))}function fE(n){return Array.isArray(n)?1==n.length?n[0]:KR(n):n}const wA=new RegExp("{{\\s*(.+?)\\s*}}","g");function jN(n){let e=[];if("string"==typeof n){let t;for(;t=wA.exec(n);)e.push(t[1]);wA.lastIndex=0}return e}function pC(n,e,t){const r=n.toString(),i=r.replace(wA,(u,c)=>{let p=e[c];return e.hasOwnProperty(c)||(t.push(function lL(n){return new h.vHH(3003,nn)}()),p=""),p.toString()});return i==r?n:i}function gC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const zL=/-+([a-z0-9])/g;function bA(n){return n.replace(zL,(...e)=>e[1].toUpperCase())}function WL(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Zo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function cL(n){return new h.vHH(3004,nn)}()}}function $N(n,e){return window.getComputedStyle(n)[e]}function XL(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function eV(n,e,t){if(":"==n[0]){const y=function tV(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function CL(n){return new h.vHH(3016,nn)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function DL(n){return new h.vHH(3015,nn)}()),e;const i=r[1],u=r[2],c=r[3];e.push(HN(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(HN(c,i))}(r,t,e)):t.push(n),t}const vC=new Set(["true","1"]),EC=new Set(["false","0"]);function HN(n,e){const t=vC.has(n)||EC.has(n),r=vC.has(e)||EC.has(e);return(i,u)=>{let c="*"==n||n==i,p="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?vC.has(n):EC.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?vC.has(e):EC.has(e)),c&&p}}const nV=new RegExp("s*:selfs*,?","g");function DA(n,e,t,r){return new rV(n).build(e,t,r)}class rV{constructor(e){this._driver=e}build(e,t,r){const i=new oV(t);this._resetContextStyleTimingState(i);const u=Zo(this,fE(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function hL(){return new h.vHH(3006,nn)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const y=p,b=y.name;b.toString().split(/\s*,\s*/).forEach(A=>{y.name=A,u.push(this.visitState(y,t))}),y.name=b}else if(1==p.type){const y=this.visitTransition(p,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function fL(){return new h.vHH(3007,nn)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(p=>{if(wC(p)){const y=p;Object.keys(y).forEach(b=>{jN(y[b]).forEach(A=>{c.hasOwnProperty(A)||u.add(A)})})}}),u.size&&(gC(u.values()),t.errors.push(function pL(n,e){return new h.vHH(3008,nn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Zo(this,fE(e.animation),t);return{type:1,matchers:XL(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Xp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Zo(this,r,t)),options:Xp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const p=Zo(this,c,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:u,options:Xp(e.options)}}visitAnimate(e,t){const r=function uV(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return CA(fC(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=CA(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||fC(r,e),CA(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:XD({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const b={};r.easing&&(b.easing=r.easing),c=XD(b)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=p,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==od?r.push(c):t.errors.push(function gL(n){return new h.vHH(3002,nn)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(wC(c)){const p=c,y=p.easing;if(y&&(u=y,delete p.easing),!i)for(let b in p)if(p[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(p=>{if(!this._driver.validateStyleProperty(p))return delete c[p],void t.unsupportedCSSPropertiesFound.add(p);const y=t.collectedStyles[t.currentQuerySelector],b=y[p];let A=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function mL(n,e,t,r,i){return new h.vHH(3010,nn)}()),A=!1),u=b.startTime),A&&(y[p]={startTime:u,endTime:i}),t.options&&function qL(n,e,t){const r=e.params||{},i=jN(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function uL(n){return new h.vHH(3001,nn)}())})}(c[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function yL(){return new h.vHH(3011,nn)}()),r;let u=0;const c=[];let p=!1,y=!1,b=0;const A=e.steps.map(Ze=>{const Le=this._makeStyleAst(Ze,t);let Ke=null!=Le.offset?Le.offset:function aV(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(wC(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(wC(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Le.styles),ze=0;return null!=Ke&&(u++,ze=Le.offset=Ke),y=y||ze<0||ze>1,p=p||ze<b,b=ze,c.push(ze),Le});y&&t.errors.push(function _L(){return new h.vHH(3012,nn)}()),p&&t.errors.push(function vL(){return new h.vHH(3200,nn)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function EL(){return new h.vHH(3202,nn)}()):0==u&&(F=1/(M-1));const U=M-1,G=t.currentTime,ne=t.currentAnimateTimings,we=ne.duration;return A.forEach((Ze,Le)=>{const Ke=F>0?Le==U?1:F*Le:c[Le],ze=Ke*we;t.currentTime=G+ne.delay+ze,ne.duration=ze,this._validateStyleAst(Ze,t),Ze.offset=Ke,r.styles.push(Ze)}),r}visitReference(e,t){return{type:8,animation:Zo(this,fE(e.animation),t),options:Xp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Xp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Xp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function iV(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(nV,"")),n=n.replace(/@\*/g,hC).replace(/@\w+/g,t=>hC+"-"+t.substr(1)).replace(/:animating/g,vA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Ko(t.collectedStyles,t.currentQuerySelector,{});const p=Zo(this,fE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:Xp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function wL(){return new h.vHH(3013,nn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:fC(e.timings,t.errors,!0);return{type:12,animation:Zo(this,fE(e.animation),t),timings:r,options:null}}}class oV{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function wC(n){return!Array.isArray(n)&&"object"==typeof n}function Xp(n){return n?(n=Sy(n)).params&&(n.params=function sV(n){return n?Sy(n):null}(n.params)):n={},n}function CA(n,e,t){return{duration:n,delay:e,easing:t}}function IA(n,e,t,r,i,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:p}}class bC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const dV=new RegExp(":enter","g"),fV=new RegExp(":leave","g");function TA(n,e,t,r,i,u={},c={},p,y,b=[]){return(new pV).buildKeyframes(n,e,t,r,i,u,c,p,y,b)}class pV{buildKeyframes(e,t,r,i,u,c,p,y,b,A=[]){b=b||new bC;const M=new SA(e,t,b,i,u,A,[]);M.options=y,M.currentTimeline.setStyles([c],null,M.errors,y),Zo(this,r,M);const F=M.timelines.filter(U=>U.containsAnimation());if(Object.keys(p).length){let U;for(let G=F.length-1;G>=0;G--){const ne=F[G];if(ne.element===t){U=ne;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([p],null,M.errors,y)}return F.length?F.map(U=>U.buildKeyframes()):[IA(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?Qp(r.duration):null,p=null!=r.delay?Qp(r.delay):null;return 0!==c&&e.forEach(y=>{const b=t.appendInstructionToTimeline(y,c,p);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Zo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=DC);const c=Qp(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Zo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Qp(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),Zo(this,c,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return fC(t.params?pC(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(y=>{p.forwardTime((y.offset||0)*u),p.setStyles(y.styles,y.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?Qp(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=DC);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let y=null;p.forEach((b,A)=>{t.currentQueryIndex=A;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(y=M.currentTimeline),Zo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=p-y;break;case"full":y=r.currentStaggerTime}const A=t.currentTimeline;y&&A.delayNextStep(y);const M=A.currentTime;Zo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const DC={};class SA{constructor(e,t,r,i,u,c,p,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=DC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new CC(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Qp(r.duration)),null!=r.delay&&(i.delay=Qp(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=pC(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new SA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=DC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new gV(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(dV,"."+this._enterClassName)).replace(fV,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!u&&0==p.length&&c.push(function bL(n){return new h.vHH(3014,nn)}()),p}}class CC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new CC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||od,this._currentKeyframe[t]=od}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function mV(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=od})):jh(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(p=>{const y=pC(c[p],u,r);this._pendingStyles[p]=y,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:od),this._updateStyle(p,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,y)=>{const b=jh(p,!0);Object.keys(b).forEach(A=>{const M=b[A];"!"==M?e.add(A):M==od&&t.add(A)}),r||(b.offset=y/this.duration),i.push(b)});const u=e.size?gC(e.values()):[],c=t.size?gC(t.values()):[];if(r){const p=i[0],y=Sy(p);p.offset=0,y.offset=1,i=[p,y]}return IA(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class gV extends CC{constructor(e,t,r,i,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,y=jh(e[0],!1);y.offset=0,u.push(y);const b=jh(e[0],!1);b.offset=zN(p),u.push(b);const A=e.length-1;for(let M=1;M<=A;M++){let F=jh(e[M],!1);F.offset=zN((t+F.offset*r)/c),u.push(F)}r=c,t=0,i="",e=u}return IA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function zN(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class AA{}class yV extends AA{normalizePropertyName(e,t){return bA(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(_V[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function dL(n,e){return new h.vHH(3005,nn)}())}return c+u}}const _V=(()=>function vV(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function WN(n,e,t,r,i,u,c,p,y,b,A,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:y,preStyleProps:b,postStyleProps:A,totalTime:M,errors:F}}const MA={};class KN{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function EV(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,p,y,b,A){const M=[],F=this.ast.options&&this.ast.options.params||MA,G=this.buildStyles(r,p&&p.params||MA,M),ne=y&&y.params||MA,we=this.buildStyles(i,ne,M),Ze=new Set,Le=new Map,Ke=new Map,ze="void"===i,_t={params:Object.assign(Object.assign({},F),ne)},ct=A?[]:TA(e,t,this.ast.animation,u,c,G,we,_t,b,M);let Xt=0;if(ct.forEach(_n=>{Xt=Math.max(_n.duration+_n.delay,Xt)}),M.length)return WN(t,this._triggerName,r,i,ze,G,we,[],[],Le,Ke,Xt,M);ct.forEach(_n=>{const Yt=_n.element,bn=Ko(Le,Yt,{});_n.preStyleProps.forEach(Ml=>bn[Ml]=!0);const Ns=Ko(Ke,Yt,{});_n.postStyleProps.forEach(Ml=>Ns[Ml]=!0),Yt!==t&&Ze.add(Yt)});const wn=gC(Ze.values());return WN(t,this._triggerName,r,i,ze,G,we,ct,wn,Le,Ke,Xt)}}class wV{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Sy(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(p=>{let y=c[p];y.length>1&&(y=pC(y,i,t));const b=this.normalizer.normalizePropertyName(p,t);y=this.normalizer.normalizeStyleValue(p,b,y,t),r[b]=y})}}),r}}class DV{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new wV(i.style,i.options&&i.options.params||{},r)}),ZN(this.states,"true","1"),ZN(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new KN(e,i,this.states))}),this.fallbackTransition=function CV(n,e,t){return new KN(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function ZN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const IV=new bC;class TV{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=DA(this._driver,t,r,[]);if(r.length)throw function ML(n){return new h.vHH(3503,nn)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=SN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const p=new Map;if(u?(c=TA(this._driver,t,u,_A,cC,{},{},r,IV,i),c.forEach(A=>{const M=Ko(p,A.element,{});A.postStyleProps.forEach(F=>M[F]=null)})):(i.push(function xL(){return new h.vHH(3300,nn)}()),c=[]),i.length)throw function RL(n){return new h.vHH(3504,nn)}();p.forEach((A,M)=>{Object.keys(A).forEach(F=>{A[F]=this._driver.computeStyle(M,F,od)})});const b=Uh(c.map(A=>{const M=p.get(A.element);return this._buildPlayer(A,{},M)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function NL(n){return new h.vHH(3301,nn)}();return t}listen(e,t,r,i){const u=pA(t,"","","");return hA(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const YN="ng-animate-queued",xA="ng-animate-disabled",RV=[],QN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},NV={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Na="__ng_removed";class RA{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function FV(n){return null!=n?n:null}(r?e.value:e),r){const u=Sy(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const pE="void",NA=new RA(pE);class OV{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Oa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function OL(n,e){return new h.vHH(3302,nn)}();if(null==r||0==r.length)throw function kL(n){return new h.vHH(3303,nn)}();if(!function LV(n){return"start"==n||"done"==n}(r))throw function PL(n,e){return new h.vHH(3400,nn)}();const u=Ko(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const p=Ko(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(Oa(e,dC),Oa(e,dC+"-"+t),p[t]=NA),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function FL(n){return new h.vHH(3401,nn)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new OA(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Oa(e,dC),Oa(e,dC+"-"+t),this._engine.statesByElement.set(e,p={}));let y=p[t];const b=new RA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&b.absorbOptions(y.options),p[t]=b,y||(y=NA),b.value!==pE&&y.value===b.value){if(!function UV(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,b.params)){const ne=[],we=u.matchStyles(y.value,y.params,ne),Ze=u.matchStyles(b.value,b.params,ne);ne.length?this._engine.reportError(ne):this._engine.afterFlush(()=>{Jp(e,we),Al(e,Ze)})}return}const F=Ko(this._engine.playersByElement,e,[]);F.forEach(ne=>{ne.namespaceId==this.id&&ne.triggerName==t&&ne.queued&&ne.destroy()});let U=u.matchTransition(y.value,b.value,e,b.params),G=!1;if(!U){if(!i)return;U=u.fallbackTransition,G=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:U,fromState:y,toState:b,player:c,isFallbackTransition:G}),G||(Oa(e,YN),c.onStart(()=>{Ay(e,YN)})),c.onDone(()=>{let ne=this.players.indexOf(c);ne>=0&&this.players.splice(ne,1);const we=this._engine.playersByElement.get(e);if(we){let Ze=we.indexOf(c);Ze>=0&&we.splice(Ze,1)}}),this.players.push(c),F.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,hC,!0);r.forEach(i=>{if(i[Na])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(Object.keys(u).forEach(y=>{if(c.set(y,u[y].value),this._triggers[y]){const b=this.trigger(e,y,pE,i);b&&p.push(b)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Uh(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers[c].fallbackTransition,b=r[c]||NA,A=new RA(pE),M=new OA(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:b,toState:A,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Na];(!u||u===QN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Oa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const y=pA(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,hA(r.player,p.phase,y,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class kV{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new OV(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let p=this.driver.getParentElement(t);for(;p;){const y=i.get(p);if(y){const b=r.indexOf(y);r.splice(b+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}}else for(let p=u;p>=0;p--)if(this.driver.containsElement(r[p].hostElement,t)){r.splice(p+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const p=this._fetchNamespace(c);p&&t.add(p)}}}return t}trigger(e,t,r,i){if(IC(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!IC(t))return;const u=t[Na];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Oa(e,xA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ay(e,xA))}removeNode(e,t,r,i){if(IC(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Na]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return IC(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,hC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,vA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Uh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Na];if(r&&r.setForRemoval){if(e[Na]=QN,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(xA))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Oa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Uh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function LL(n){return new h.vHH(3402,nn)}()}_flushAnimations(e,t){const r=new bC,i=[],u=new Map,c=[],p=new Map,y=new Map,b=new Map,A=new Set;this.disabledNodes.forEach(st=>{A.add(st);const yt=this.driver.query(st,".ng-animate-queued",!0);for(let At=0;At<yt.length;At++)A.add(yt[At])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),U=eO(F,this.collectedEnterElements),G=new Map;let ne=0;U.forEach((st,yt)=>{const At=_A+ne++;G.set(yt,At),st.forEach(fn=>Oa(fn,At))});const we=[],Ze=new Set,Le=new Set;for(let st=0;st<this.collectedLeaveElements.length;st++){const yt=this.collectedLeaveElements[st],At=yt[Na];At&&At.setForRemoval&&(we.push(yt),Ze.add(yt),At.hasAnimation?this.driver.query(yt,".ng-star-inserted",!0).forEach(fn=>Ze.add(fn)):Le.add(yt))}const Ke=new Map,ze=eO(F,Array.from(Ze));ze.forEach((st,yt)=>{const At=cC+ne++;Ke.set(yt,At),st.forEach(fn=>Oa(fn,At))}),e.push(()=>{U.forEach((st,yt)=>{const At=G.get(yt);st.forEach(fn=>Ay(fn,At))}),ze.forEach((st,yt)=>{const At=Ke.get(yt);st.forEach(fn=>Ay(fn,At))}),we.forEach(st=>{this.processLeaveNode(st)})});const _t=[],ct=[];for(let st=this._namespaceList.length-1;st>=0;st--)this._namespaceList[st].drainQueuedTransitions(t).forEach(At=>{const fn=At.player,Ii=At.element;if(_t.push(fn),this.collectedEnterElements.length){const Os=Ii[Na];if(Os&&Os.setForMove){if(Os.previousTriggersValues&&Os.previousTriggersValues.has(At.triggerName)){const eg=Os.previousTriggersValues.get(At.triggerName),Hh=this.statesByElement.get(At.element);Hh&&Hh[At.triggerName]&&(Hh[At.triggerName].value=eg)}return void fn.destroy()}}const xl=!M||!this.driver.containsElement(M,Ii),Yo=Ke.get(Ii),$h=G.get(Ii),pr=this._buildInstruction(At,r,$h,Yo,xl);if(pr.errors&&pr.errors.length)return void ct.push(pr);if(xl)return fn.onStart(()=>Jp(Ii,pr.fromStyles)),fn.onDestroy(()=>Al(Ii,pr.toStyles)),void i.push(fn);if(At.isFallbackTransition)return fn.onStart(()=>Jp(Ii,pr.fromStyles)),fn.onDestroy(()=>Al(Ii,pr.toStyles)),void i.push(fn);const dO=[];pr.timelines.forEach(Os=>{Os.stretchStartingKeyframe=!0,this.disabledNodes.has(Os.element)||dO.push(Os)}),pr.timelines=dO,r.append(Ii,pr.timelines),c.push({instruction:pr,player:fn,element:Ii}),pr.queriedElements.forEach(Os=>Ko(p,Os,[]).push(fn)),pr.preStyleProps.forEach((Os,eg)=>{const Hh=Object.keys(Os);if(Hh.length){let tg=y.get(eg);tg||y.set(eg,tg=new Set),Hh.forEach(PA=>tg.add(PA))}}),pr.postStyleProps.forEach((Os,eg)=>{const Hh=Object.keys(Os);let tg=b.get(eg);tg||b.set(eg,tg=new Set),Hh.forEach(PA=>tg.add(PA))})});if(ct.length){const st=[];ct.forEach(yt=>{st.push(function VL(n,e){return new h.vHH(3505,nn)}())}),_t.forEach(yt=>yt.destroy()),this.reportError(st)}const Xt=new Map,wn=new Map;c.forEach(st=>{const yt=st.element;r.has(yt)&&(wn.set(yt,yt),this._beforeAnimationBuild(st.player.namespaceId,st.instruction,Xt))}),i.forEach(st=>{const yt=st.element;this._getPreviousPlayers(yt,!1,st.namespaceId,st.triggerName,null).forEach(fn=>{Ko(Xt,yt,[]).push(fn),fn.destroy()})});const _n=we.filter(st=>nO(st,y,b)),Yt=new Map;XN(Yt,this.driver,Le,b,od).forEach(st=>{nO(st,y,b)&&_n.push(st)});const Ns=new Map;U.forEach((st,yt)=>{XN(Ns,this.driver,new Set(st),y,"!")}),_n.forEach(st=>{const yt=Yt.get(st),At=Ns.get(st);Yt.set(st,Object.assign(Object.assign({},yt),At))});const Ml=[],gE=[],mE={};c.forEach(st=>{const{element:yt,player:At,instruction:fn}=st;if(r.has(yt)){if(A.has(yt))return At.onDestroy(()=>Al(yt,fn.toStyles)),At.disabled=!0,At.overrideTotalTime(fn.totalTime),void i.push(At);let Ii=mE;if(wn.size>1){let Yo=yt;const $h=[];for(;Yo=Yo.parentNode;){const pr=wn.get(Yo);if(pr){Ii=pr;break}$h.push(Yo)}$h.forEach(pr=>wn.set(pr,Ii))}const xl=this._buildAnimation(At.namespaceId,fn,Xt,u,Ns,Yt);if(At.setRealPlayer(xl),Ii===mE)Ml.push(At);else{const Yo=this.playersByElement.get(Ii);Yo&&Yo.length&&(At.parentPlayer=Uh(Yo)),i.push(At)}}else Jp(yt,fn.fromStyles),At.onDestroy(()=>Al(yt,fn.toStyles)),gE.push(At),A.has(yt)&&i.push(At)}),gE.forEach(st=>{const yt=u.get(st.element);if(yt&&yt.length){const At=Uh(yt);st.setRealPlayer(At)}}),i.forEach(st=>{st.parentPlayer?st.syncPlayerEvents(st.parentPlayer):st.destroy()});for(let st=0;st<we.length;st++){const yt=we[st],At=yt[Na];if(Ay(yt,cC),At&&At.hasAnimation)continue;let fn=[];if(p.size){let xl=p.get(yt);xl&&xl.length&&fn.push(...xl);let Yo=this.driver.query(yt,vA,!0);for(let $h=0;$h<Yo.length;$h++){let pr=p.get(Yo[$h]);pr&&pr.length&&fn.push(...pr)}}const Ii=fn.filter(xl=>!xl.destroyed);Ii.length?VV(this,yt,Ii):this.processLeaveNode(yt)}return we.length=0,Ml.forEach(st=>{this.players.push(st),st.onDone(()=>{st.destroy();const yt=this.players.indexOf(st);this.players.splice(yt,1)}),st.play()}),Ml}elementContainsData(e,t){let r=!1;const i=t[Na];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const y=!u||u==pE;p.forEach(b=>{b.queued||!y&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const b=y.element,A=b!==u,M=Ko(r,b,[]);this._getPreviousPlayers(b,A,c,p,t.toState).forEach(U=>{const G=U.getRealPlayer();G.beforeDestroy&&G.beforeDestroy(),U.destroy(),M.push(U)})}Jp(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const p=t.triggerName,y=t.element,b=[],A=new Set,M=new Set,F=t.timelines.map(G=>{const ne=G.element;A.add(ne);const we=ne[Na];if(we&&we.removedBeforeQueried)return new aE(G.duration,G.delay);const Ze=ne!==y,Le=function BV(n){const e=[];return tO(n,e),e}((r.get(ne)||RV).map(Xt=>Xt.getRealPlayer())).filter(Xt=>!!Xt.element&&Xt.element===ne),Ke=u.get(ne),ze=c.get(ne),_t=SN(0,this._normalizer,0,G.keyframes,Ke,ze),ct=this._buildPlayer(G,_t,Le);if(G.subTimeline&&i&&M.add(ne),Ze){const Xt=new OA(e,p,ne);Xt.setRealPlayer(ct),b.push(Xt)}return ct});b.forEach(G=>{Ko(this.playersByQueriedElement,G.element,[]).push(G),G.onDone(()=>function PV(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,G.element,G))}),A.forEach(G=>Oa(G,LN));const U=Uh(F);return U.onDestroy(()=>{A.forEach(G=>Ay(G,LN)),Al(y,t.toStyles)}),M.forEach(G=>{Ko(i,G,[]).push(U)}),U}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new aE(e.duration,e.delay)}}class OA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new aE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>hA(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ko(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function IC(n){return n&&1===n.nodeType}function JN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function XN(n,e,t,r,i){const u=[];t.forEach(y=>u.push(JN(y)));const c=[];r.forEach((y,b)=>{const A={};y.forEach(M=>{const F=A[M]=e.computeStyle(b,M,i);(!F||0==F.length)&&(b[Na]=NV,c.push(b))}),n.set(b,A)});let p=0;return t.forEach(y=>JN(y,u[p++])),c}function eO(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(p){if(!p)return 1;let y=u.get(p);if(y)return y;const b=p.parentNode;return y=t.has(b)?b:i.has(b)?1:c(b),u.set(p,y),y}return e.forEach(p=>{const y=c(p);1!==y&&t.get(y).push(p)}),t}function Oa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Ay(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function VV(n,e,t){Uh(t).onDone(()=>n.processLeaveNode(e))}function tO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof YR?tO(r.players,e):e.push(r)}}function nO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class TC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new kV(e,t,r),this._timelineEngine=new TV(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let p=this._triggerCache[c];if(!p){const y=[],A=DA(this._driver,u,y,[]);if(y.length)throw function SL(n,e){return new h.vHH(3404,nn)}();p=function bV(n,e,t){return new DV(n,e,t)}(i,A,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=AN(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,p]=AN(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let $V=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Al(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Al(this._element,this._initialStyles),this._endStyles&&(Al(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Jp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Jp(this._element,this._endStyles),this._endStyles=null),Al(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function kA(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];HV(i)&&(e=e||{},e[i]=n[i])}return e}function HV(n){return"display"===n||"position"===n}class rO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:$N(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class GV{validateStyleProperty(e){return NN(e)}matchesElement(e,t){return!1}containsElement(e,t){return ON(e,t)}getParentElement(e){return mA(e)}query(e,t,r){return kN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const b={},A=c.filter(F=>F instanceof rO);(function KL(n,e){return 0===n||0===e})(r,i)&&A.forEach(F=>{let U=F.currentSnapshot;Object.keys(U).forEach(G=>b[G]=U[G])}),t=function ZL(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(p=>{u.hasOwnProperty(p)||c.push(p),u[p]=t[p]}),c.length)for(var i=1;i<e.length;i++){let p=e[i];c.forEach(function(y){p[y]=$N(n,y)})}}return e}(e,t=t.map(F=>jh(F,!1)),b);const M=function jV(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=kA(e[0]),e.length>1&&(r=kA(e[e.length-1]))):e&&(t=kA(e)),t||r?new $V(n,t,r):null}(e,t);return new rO(e,t,y,M)}}let qV=(()=>{class n extends JD{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?KR(t):t;return iO(this._renderer,null,r,"register",[i]),new zV(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class zV extends class b1{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new WV(this._id,e,t||{},this._renderer)}}class WV{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return iO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function iO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const sO="@.disabled";let KV=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=null==c?void 0:c.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let A=this._rendererCache.get(u);return A||(A=new oO("",u,this.engine),this._rendererCache.set(u,A)),A}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const y=A=>{Array.isArray(A)?A.forEach(y):this.engine.registerTrigger(c,p,t,A.name,A)};return r.data.animation.forEach(y),new ZV(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(TC),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class oO{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==sO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class ZV extends oO{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==sO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function YV(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function QV(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let JV=(()=>{class n extends TC{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re),h.LFG(yA),h.LFG(AA))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const aO=new h.OlP("AnimationModuleType"),uO=[{provide:JD,useClass:qV},{provide:AA,useFactory:function XV(){return new yV}},{provide:TC,useClass:JV},{provide:h.FYo,useFactory:function eB(n,e,t){return new KV(n,e,t)},deps:[En,TC,h.R0b]}],lO=[{provide:yA,useFactory:()=>new GV},{provide:aO,useValue:"BrowserAnimations"},...uO],tB=[{provide:yA,useClass:PN},{provide:aO,useValue:"NoopAnimations"},...uO];let nB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?tB:lO}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:lO,imports:[ra]}),n})();const cO_firestoreConfig={apiKey:"AIzaSyD8q-zcHmwBpNyCO7xcdyZFUDFf1XwhIRs",authDomain:"todo-app-f2a04.firebaseapp.com",projectId:"todo-app-f2a04",storageBucket:"todo-app-f2a04.appspot.com",messagingSenderId:"511326328594",appId:"1:511326328594:web:6e2ebe09e7d3a7a61c05cb"};let rB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Fn]]}),n})(),iB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Fn]]}),n})(),sB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Fn,EN.forRoot()]]}),n})(),oB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[sL]}),n.\u0275inj=h.cJS({providers:[],imports:[[rB,sB,iB,ra,JF,nB,qF,WF,ur.hO.initializeApp(cO_firestoreConfig)]]}),n})();(0,h.G48)(),jl().bootstrapModule(oB).catch(n=>console.error(n))},5867:(ut,Se,O)=>{O.d(Se,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=O(9681);(0,h.registerVersion)("firebase","9.6.10","app")},127:(ut,Se,O)=>{O.d(Se,{Z:()=>h.Z});var h=O(3942);h.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(ut,Se,O)=>{O.r(Se);var h=O(5861),Y=O(3942),k=O(2090),ue=O(9681),X=O(655),me=O(1877),re=O(4859);const Oe=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nt=new me.Yd("@firebase/auth");function Ye(_,...f){nt.logLevel<=me.in.ERROR&&nt.error(`Auth (${ue.SDK_VERSION}): ${_}`,...f)}function Ie(_,...f){throw $e(_,...f)}function _e(_,...f){return $e(_,...f)}function Ee(_,f,m){const E=Object.assign(Object.assign({},Ve()),{[f]:m});return new k.LL("auth","Firebase",E).create(f,{appName:_.name})}function Ge(_,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ie(_,"argument-error"),Ee(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(_,...f){if("string"!=typeof _){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(m,...E)}return pe.create(_,...f)}function te(_,f,...m){if(!_)throw $e(f,...m)}function K(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Ye(f),new Error(f)}function ie(_,f){_||K(f)}const ye=new Map;function se(_){ie(_ instanceof Function,"Expected a class definition");let f=ye.get(_);return f?(ie(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,ye.set(_,f),f)}function St(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function en(){return"http:"===kn()||"https:"===kn()}function kn(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class cn{constructor(f,m){this.shortDelay=f,this.longDelay=m,ie(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function lt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(en()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(_,f){ie(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Ti{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void K("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void K("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void K("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ss=new cn(3e4,6e4);function tn(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function Gt(_,f,m,E){return gr.apply(this,arguments)}function gr(){return(gr=(0,h.Z)(function*(_,f,m,E,T={}){return li(_,T,(0,h.Z)(function*(){let N={},z={};E&&("GET"===f?z=E:N={body:JSON.stringify(E)});const oe=(0,k.xO)(Object.assign({key:_.config.apiKey},z)).slice(1),Ue=yield _._getAdditionalHeaders();return Ue["Content-Type"]="application/json",_.languageCode&&(Ue["X-Firebase-Locale"]=_.languageCode),Ti.fetch()(qr(_,_.config.apiHost,m,oe),Object.assign({method:f,headers:Ue,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function li(_,f,m){return ks.apply(this,arguments)}function ks(){return(ks=(0,h.Z)(function*(_,f,m){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},sn),f);try{const T=new os(_),N=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const z=yield N.json();if("needConfirmation"in z)throw as(_,"account-exists-with-different-credential",z);if(N.ok&&!("errorMessage"in z))return z;{const oe=N.ok?z.errorMessage:z.error.message,[Ue,tt]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw as(_,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ue)throw as(_,"email-already-in-use",z);const bt=E[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(tt)throw Ee(_,bt,tt);Ie(_,bt)}}catch(T){if(T instanceof k.ZR)throw T;Ie(_,"network-request-failed")}})).apply(this,arguments)}function Gr(_,f,m,E){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,h.Z)(function*(_,f,m,E,T={}){const N=yield Gt(_,f,m,E,T);return"mfaPendingCredential"in N&&Ie(_,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function qr(_,f,m,E){const T=`${f}${m}?${E}`;return _.config.emulator?dn(_.config,T):`${_.config.apiScheme}://${T}`}class os{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(_e(this.auth,"network-request-failed")),ss.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function as(_,f,m){const E={appName:_.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const T=_e(_,f,E);return T.customData._tokenResponse=m,T}function ei(){return(ei=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ir(_,f){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ci(_,f){return fo.apply(this,arguments)}function fo(){return(fo=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function vn(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function ka(){return(ka=(0,h.Z)(function*(_,f=!1){const m=(0,k.m9)(_),E=yield m.getIdToken(f),T=ot(E);te(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const N="object"==typeof T.firebase?T.firebase:void 0,z=null==N?void 0:N.sign_in_provider;return{claims:T,token:E,authTime:vn(qt(T.auth_time)),issuedAtTime:vn(qt(T.iat)),expirationTime:vn(qt(T.exp)),signInProvider:z||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function qt(_){return 1e3*Number(_)}function ot(_){const[f,m,E]=_.split(".");if(void 0===f||void 0===m||void 0===E)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,k.tV)(m);return T?JSON.parse(T):(Ye("Failed to decode base64 JWT payload"),null)}catch(T){return Ye("Caught error parsing JWT payload as JSON",T),null}}function mr(_,f){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,h.Z)(function*(_,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof k.ZR&&$t(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function $t({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class po{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class Tr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=vn(this.lastLoginAt),this.creationTime=vn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yr(_){return ht.apply(this,arguments)}function ht(){return(ht=(0,h.Z)(function*(_){var f;const m=_.auth,E=yield _.getIdToken(),T=yield mr(_,ci(m,{idToken:E}));te(null==T?void 0:T.users.length,m,"internal-error");const N=T.users[0];_._notifyReloadListener(N);const z=(null===(f=N.providerUserInfo)||void 0===f?void 0:f.length)?Te(N.providerUserInfo):[],oe=Qe(_.providerData,z),bt=!!_.isAnonymous&&!(_.email&&N.passwordHash||(null==oe?void 0:oe.length)),at={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:oe,metadata:new Tr(N.createdAt,N.lastLoginAt),isAnonymous:bt};Object.assign(_,at)})).apply(this,arguments)}function Ut(){return(Ut=(0,h.Z)(function*(_){const f=(0,k.m9)(_);yield yr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Qe(_,f){return[..._.filter(E=>!f.some(T=>T.providerId===E.providerId)),...f]}function Te(_){return _.map(f=>{var{providerId:m}=f,E=(0,X._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ft(){return(ft=(0,h.Z)(function*(_,f){const m=yield li(_,{},(0,h.Z)(function*(){const E=(0,k.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:N}=_.config,z=qr(_,T,"/v1/token",`key=${N}`),oe=yield _._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",Ti.fetch()(z,{method:"POST",headers:oe,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class jt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){te(f.idToken,"internal-error"),te(void 0!==f.idToken,"internal-error"),te(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function It(_){const f=ot(_);return te(f,"internal-error"),te(void 0!==f.exp,"internal-error"),te(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,h.Z)(function*(){return te(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:N,expiresIn:z}=yield function et(_,f){return ft.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(T,N,Number(z))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:T,expirationTime:N}=m,z=new jt;return E&&(te("string"==typeof E,"internal-error",{appName:f}),z.refreshToken=E),T&&(te("string"==typeof T,"internal-error",{appName:f}),z.accessToken=T),N&&(te("number"==typeof N,"internal-error",{appName:f}),z.expirationTime=N),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new jt,this.toJSON())}_performRefresh(){return K("not implemented")}}function Vt(_,f){te("string"==typeof _||void 0===_,"internal-error",{appName:f})}class j{constructor(f){var{uid:m,auth:E,stsTokenManager:T}=f,N=(0,X._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new po(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Tr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,h.Z)(function*(){const E=yield mr(m,m.stsTokenManager.getToken(m.auth,f));return te(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function Ps(_){return ka.apply(this,arguments)}(this,f)}reload(){return function Sr(_){return Ut.apply(this,arguments)}(this)}_assign(f){this!==f&&(te(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new j(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),T=!0),m&&(yield yr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,h.Z)(function*(){const m=yield f.getIdToken();return yield mr(f,function dt(_,f){return ei.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,T,N,z,oe,Ue,tt,bt;const at=null!==(E=m.displayName)&&void 0!==E?E:void 0,Rn=null!==(T=m.email)&&void 0!==T?T:void 0,ts=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,Ec=null!==(z=m.photoURL)&&void 0!==z?z:void 0,Ju=null!==(oe=m.tenantId)&&void 0!==oe?oe:void 0,Xu=null!==(Ue=m._redirectEventId)&&void 0!==Ue?Ue:void 0,Cf=null!==(tt=m.createdAt)&&void 0!==tt?tt:void 0,r_=null!==(bt=m.lastLoginAt)&&void 0!==bt?bt:void 0,{uid:ya,emailVerified:$d,isAnonymous:Hd,providerData:If,stsTokenManager:Gd}=m;te(ya&&Gd,f,"internal-error");const Qr=jt.fromJSON(this.name,Gd);te("string"==typeof ya,f,"internal-error"),Vt(at,f.name),Vt(Rn,f.name),te("boolean"==typeof $d,f,"internal-error"),te("boolean"==typeof Hd,f,"internal-error"),Vt(ts,f.name),Vt(Ec,f.name),Vt(Ju,f.name),Vt(Xu,f.name),Vt(Cf,f.name),Vt(r_,f.name);const Tf=new j({uid:ya,auth:f,email:Rn,emailVerified:$d,displayName:at,isAnonymous:Hd,photoURL:Ec,phoneNumber:ts,tenantId:Ju,stsTokenManager:Qr,createdAt:Cf,lastLoginAt:r_});return If&&Array.isArray(If)&&(Tf.providerData=If.map(Ag=>Object.assign({},Ag))),Xu&&(Tf._redirectEventId=Xu),Tf}static _fromIdTokenResponse(f,m,E=!1){return(0,h.Z)(function*(){const T=new jt;T.updateFromServerResponse(m);const N=new j({uid:m.localId,auth:f,stsTokenManager:T,isAnonymous:E});return yield yr(N),N})()}}const q=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var T=this;return(0,h.Z)(function*(){T.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const T=E.storage[m];return void 0===T?null:T})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return _.type="NONE",_})();function de(_,f,m){return`firebase:${_}:${f}:${m}`}class Q{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:T,name:N}=this.auth;this.fullUserKey=de(this.userKey,T.apiKey,N),this.fullPersistenceKey=de("persistence",T.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?j._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,h.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new Q(se(q),f,E);const T=(yield Promise.all(m.map(function(){var tt=(0,h.Z)(function*(bt){if(yield bt._isAvailable())return bt});return function(bt){return tt.apply(this,arguments)}}()))).filter(tt=>tt);let N=T[0]||se(q);const z=de(E,f.config.apiKey,f.name);let oe=null;for(const tt of m)try{const bt=yield tt._get(z);if(bt){const at=j._fromJSON(f,bt);tt!==N&&(oe=at),N=tt;break}}catch(bt){}const Ue=T.filter(tt=>tt._shouldAllowMigration);return N._shouldAllowMigration&&Ue.length?(N=Ue[0],oe&&(yield N._set(z,oe.toJSON())),yield Promise.all(m.map(function(){var tt=(0,h.Z)(function*(bt){if(bt!==N)try{yield bt._remove(z)}catch(at){}});return function(bt){return tt.apply(this,arguments)}}())),new Q(N,f,E)):new Q(N,f,E)})()}}function Be(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(zt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(wt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ot(f))return"Blackberry";if(pn(f))return"Webos";if(Qt(f))return"Safari";if((f.includes("chrome/")||Ar(f))&&!f.includes("edge/"))return"Chrome";if(Sn(f))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function wt(_=(0,k.z$)()){return/firefox\//i.test(_)}function Qt(_=(0,k.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ar(_=(0,k.z$)()){return/crios\//i.test(_)}function zt(_=(0,k.z$)()){return/iemobile/i.test(_)}function Sn(_=(0,k.z$)()){return/android/i.test(_)}function Ot(_=(0,k.z$)()){return/blackberry/i.test(_)}function pn(_=(0,k.z$)()){return/webos/i.test(_)}function or(_=(0,k.z$)()){return/iphone|ipad|ipod/i.test(_)}function us(_=(0,k.z$)()){return or(_)||Sn(_)||pn(_)||Ot(_)||/windows phone/i.test(_)||zt(_)}function Fa(_,f=[]){let m;switch(_){case"Browser":m=Be((0,k.z$)());break;case"Worker":m=`${Be((0,k.z$)())}-${_}`;break;default:m=_}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ue.SDK_VERSION}/${E}`}class di{constructor(f,m,E){this.app=f,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ft(this),this.idTokenSubscription=new Ft(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=se(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,N;if(!E._deleted&&(E.persistenceManager=yield Q.create(E,f),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(z){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m)}})()}initializeCurrentUser(f){var m=this;return(0,h.Z)(function*(){var E;let T=yield m.assertedPersistence.getCurrentUser();if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const N=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,z=null==T?void 0:T._redirectEventId,oe=yield m.tryRedirectSignIn(f);(!N||N===z)&&(null==oe?void 0:oe.user)&&(T=oe.user)}return T?T._redirectEventId?(te(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===T._redirectEventId?m.directlySetCurrentUser(T):m.reloadAndSetCurrentUserOrClear(T)):m.reloadAndSetCurrentUserOrClear(T):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(T){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,h.Z)(function*(){try{yield yr(f)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Et(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,h.Z)(function*(){const E=f?(0,k.m9)(f):null;return E&&te(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f){var m=this;return(0,h.Z)(function*(){if(!m._deleted)return f&&te(m.tenantId===f.tenantId,m,"tenant-id-mismatch"),m.queue((0,h.Z)(function*(){yield m.directlySetCurrentUser(f),m.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(se(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new k.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,h.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(m);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&se(f)||m._popupRedirectResolver;te(E,m,"argument-error"),m.redirectPersistenceManager=yield Q.create(m,[se(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,h.Z)(function*(){var E,T;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,h.Z)(function*(){if(f===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,T){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),z=this._isInitialized?Promise.resolve():this._initializationPromise;return te(z,this,"internal-error"),z.then(()=>N(this.currentUser)),"function"==typeof m?f.addObserver(m,E,T):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Fa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function ke(_){return(0,k.m9)(_)}class Ft{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,k.ne)(m=>this.observer=m)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _r(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function $n(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class on{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return K("not implemented")}_getIdTokenResponse(f){return K("not implemented")}_linkToIdToken(f,m){return K("not implemented")}_getReauthenticationResolver(f){return K("not implemented")}}function Pn(_,f){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:resetPassword",tn(_,f))})).apply(this,arguments)}function Nt(_,f){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function zi(_,f){return La.apply(this,arguments)}function La(){return(La=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:update",tn(_,f))})).apply(this,arguments)}function Hn(){return(Hn=(0,h.Z)(function*(_,f){return Gr(_,"POST","/v1/accounts:signInWithPassword",tn(_,f))})).apply(this,arguments)}function ls(_,f){return cs.apply(this,arguments)}function cs(){return(cs=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:sendOobCode",tn(_,f))})).apply(this,arguments)}function Mr(_,f){return an.apply(this,arguments)}function an(){return(an=(0,h.Z)(function*(_,f){return ls(_,f)})).apply(this,arguments)}function bu(_,f){return Du.apply(this,arguments)}function Du(){return(Du=(0,h.Z)(function*(_,f){return ls(_,f)})).apply(this,arguments)}function Si(_,f){return hi.apply(this,arguments)}function hi(){return(hi=(0,h.Z)(function*(_,f){return ls(_,f)})).apply(this,arguments)}function ad(_,f){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,h.Z)(function*(_,f){return ls(_,f)})).apply(this,arguments)}function ti(){return(ti=(0,h.Z)(function*(_,f){return Gr(_,"POST","/v1/accounts:signInWithEmailLink",tn(_,f))})).apply(this,arguments)}function ud(){return(ud=(0,h.Z)(function*(_,f){return Gr(_,"POST","/v1/accounts:signInWithEmailLink",tn(_,f))})).apply(this,arguments)}class Iu extends on{constructor(f,m,E,T=null){super("password",E),this._email=f,this._password=m,this._tenantId=T}static _fromEmailAndPassword(f,m){return new Iu(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new Iu(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function Vs(_,f){return Hn.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Cu(_,f){return ti.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ie(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return Nt(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Gh(_,f){return ud.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:Ie(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Gn(_,f){return ld.apply(this,arguments)}function ld(){return(ld=(0,h.Z)(function*(_,f){return Gr(_,"POST","/v1/accounts:signInWithIdp",tn(_,f))})).apply(this,arguments)}class ds extends on{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new ds(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ie("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:T}=m,N=(0,X._T)(m,["providerId","signInMethod"]);if(!E||!T)return null;const z=new ds(E,T);return z.idToken=N.idToken||void 0,z.accessToken=N.accessToken||void 0,z.secret=N.secret,z.nonce=N.nonce,z.pendingToken=N.pendingToken||null,z}_getIdTokenResponse(f){return Gn(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Gn(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Gn(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,k.xO)(m)}return f}}function rg(_,f){return hs.apply(this,arguments)}function hs(){return(hs=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:sendVerificationCode",tn(_,f))})).apply(this,arguments)}function Us(){return(Us=(0,h.Z)(function*(_,f){return Gr(_,"POST","/v1/accounts:signInWithPhoneNumber",tn(_,f))})).apply(this,arguments)}function cd(){return(cd=(0,h.Z)(function*(_,f){const m=yield Gr(_,"POST","/v1/accounts:signInWithPhoneNumber",tn(_,f));if(m.temporaryProof)throw as(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const sg={USER_NOT_FOUND:"user-not-found"};function dd(){return(dd=(0,h.Z)(function*(_,f){return Gr(_,"POST","/v1/accounts:signInWithPhoneNumber",tn(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),sg)})).apply(this,arguments)}class Jo extends on{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Jo({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Jo({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Rl(_,f){return Us.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function ig(_,f){return cd.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function qh(_,f){return dd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:T}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:N}=f;return E||m||T||N?new Jo({verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:N}):null}}class mo{constructor(f){var m,E,T,N,z,oe;const Ue=(0,k.zd)((0,k.pd)(f)),tt=null!==(m=Ue.apiKey)&&void 0!==m?m:null,bt=null!==(E=Ue.oobCode)&&void 0!==E?E:null,at=function My(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ue.mode)&&void 0!==T?T:null);te(tt&&bt&&at,"argument-error"),this.apiKey=tt,this.operation=at,this.code=bt,this.continueUrl=null!==(N=Ue.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(z=Ue.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(oe=Ue.tenantId)&&void 0!==oe?oe:null}static parseLink(f){const m=function Tu(_){const f=(0,k.zd)((0,k.pd)(_)).link,m=f?(0,k.zd)((0,k.pd)(f)).deep_link_id:null,E=(0,k.zd)((0,k.pd)(_)).deep_link_id;return(E?(0,k.zd)((0,k.pd)(E)).link:null)||E||m||f||_}(f);try{return new mo(m)}catch(E){return null}}}let Nl=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,E){return Iu._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const T=mo.parseLink(E);return te(T,"argument-error"),Iu._fromEmailAndCode(m,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class js{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class ni extends js{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Xo extends ni{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return te("providerId"in m&&"signInMethod"in m,"argument-error"),ds._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return te(f.idToken||f.accessToken,"argument-error"),ds._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Xo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Xo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:N,nonce:z,providerId:oe}=f;if(!E&&!T&&!m&&!N||!oe)return null;try{return new Xo(oe)._credential({idToken:m,accessToken:E,nonce:z,pendingToken:N})}catch(Ue){return null}}}let yo=(()=>{class _ extends ni{constructor(){super("facebook.com")}static credential(m){return ds._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Va=(()=>{class _ extends ni{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return ds._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:T}=m;if(!E&&!T)return null;try{return _.credential(E,T)}catch(N){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),hd=(()=>{class _ extends ni{constructor(){super("github.com")}static credential(m){return ds._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Fn extends on{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Gn(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Gn(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Gn(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:T,pendingToken:N}=m;return E&&T&&N&&E===T?new Fn(E,N):null}static _create(f,m){return new Fn(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fi extends js{constructor(f){te(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return fi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return fi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Fn.fromJSON(f);return te(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return Fn._create(E,m)}catch(T){return null}}}let Su=(()=>{class _ extends ni{constructor(){super("twitter.com")}static credential(m,E){return ds._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=m;if(!E||!T)return null;try{return _.credential(E,T)}catch(N){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Au(_,f){return xr.apply(this,arguments)}function xr(){return(xr=(0,h.Z)(function*(_,f){return Gr(_,"POST","/v1/accounts:signUp",tn(_,f))})).apply(this,arguments)}class vr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,T=!1){return(0,h.Z)(function*(){const N=yield j._fromIdTokenResponse(f,E,T),z=Wh(E);return new vr({user:N,providerId:z,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const T=Wh(E);return new vr({user:f,providerId:T,_tokenResponse:E,operationType:m})})()}}function Wh(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function fd(){return(fd=(0,h.Z)(function*(_){var f;const m=ke(_);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new vr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Au(m,{returnSecureToken:!0}),T=yield vr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class xu extends k.ZR{constructor(f,m,E,T){var N;super(m.code,m.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,xu.prototype),this.customData={appName:f.name,tenantId:null!==(N=f.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,T){return new xu(f,m,E,T)}}function Ru(_,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?xu._fromErrorAndOperation(_,N,f,E):N})}function fs(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function Ol(){return(Ol=(0,h.Z)(function*(_,f){const m=(0,k.m9)(_);yield Hs(!0,m,f);const{providerUserInfo:E}=yield ir(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),T=fs(E||[]);return m.providerData=m.providerData.filter(N=>T.has(N.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function yn(_,f){return ea.apply(this,arguments)}function ea(){return(ea=(0,h.Z)(function*(_,f,m=!1){const E=yield mr(_,f._linkToIdToken(_.auth,yield _.getIdToken()),m);return vr._forOperation(_,"link",E)})).apply(this,arguments)}function Hs(_,f,m){return un.apply(this,arguments)}function un(){return(un=(0,h.Z)(function*(_,f,m){yield yr(f);const T=!1===_?"provider-already-linked":"no-such-provider";te(fs(f.providerData).has(m)===_,f.auth,T)})).apply(this,arguments)}function pd(_,f){return _o.apply(this,arguments)}function _o(){return(_o=(0,h.Z)(function*(_,f,m=!1){const{auth:E}=_,T="reauthenticate";try{const N=yield mr(_,Ru(E,T,f,_),m);te(N.idToken,E,"internal-error");const z=ot(N.idToken);te(z,E,"internal-error");const{sub:oe}=z;return te(_.uid===oe,E,"user-mismatch"),vr._forOperation(_,T,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Ie(E,"user-mismatch"),N}})).apply(this,arguments)}function vo(_,f){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,h.Z)(function*(_,f,m=!1){const E="signIn",T=yield Ru(_,E,f),N=yield vr._fromIdTokenResponse(_,E,T);return m||(yield _._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Ln(_,f){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,h.Z)(function*(_,f){return vo(ke(_),f)})).apply(this,arguments)}function Ai(_,f){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,h.Z)(function*(_,f){const m=(0,k.m9)(_);return yield Hs(!1,m,f.providerId),yn(m,f)})).apply(this,arguments)}function Gs(_,f){return ps.apply(this,arguments)}function ps(){return(ps=(0,h.Z)(function*(_,f){return pd((0,k.m9)(_),f)})).apply(this,arguments)}function Nu(_,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,h.Z)(function*(_,f){return Gr(_,"POST","/v1/accounts:signInWithCustomToken",tn(_,f))})).apply(this,arguments)}function zs(){return(zs=(0,h.Z)(function*(_,f){const m=ke(_),E=yield Nu(m,{token:f,returnSecureToken:!0}),T=yield vr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class pt{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Ou._fromServerResponse(f,m):Ie(f,"internal-error")}}class Ou extends pt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Ou(m)}}function ja(_,f,m){var E;te((null===(E=m.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),te(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(te(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(te(m.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Pu(){return(Pu=(0,h.Z)(function*(_,f,m){const E=(0,k.m9)(_),T={requestType:"PASSWORD_RESET",email:f};m&&ja(E,T,m),yield bu(E,T)})).apply(this,arguments)}function kl(){return(kl=(0,h.Z)(function*(_,f,m){yield Pn((0,k.m9)(_),{oobCode:f,newPassword:m})})).apply(this,arguments)}function De(){return(De=(0,h.Z)(function*(_,f){yield zi((0,k.m9)(_),{oobCode:f})})).apply(this,arguments)}function Bt(_,f){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,h.Z)(function*(_,f){const m=(0,k.m9)(_),E=yield Pn(m,{oobCode:f}),T=E.requestType;switch(te(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(E.mfaInfo,m,"internal-error");default:te(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=pt._fromServerResponse(ke(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:T}})).apply(this,arguments)}function ta(){return(ta=(0,h.Z)(function*(_,f){const{data:m}=yield Bt((0,k.m9)(_),f);return m.email})).apply(this,arguments)}function ii(){return(ii=(0,h.Z)(function*(_,f,m){const E=ke(_),T=yield Au(E,{returnSecureToken:!0,email:f,password:m}),N=yield vr._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function gd(){return(gd=(0,h.Z)(function*(_,f,m){const E=(0,k.m9)(_),T={requestType:"EMAIL_SIGNIN",email:f};te(m.handleCodeInApp,E,"argument-error"),m&&ja(E,T,m),yield Si(E,T)})).apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(_,f,m){const E=(0,k.m9)(_),T=Nl.credentialWithLink(f,m||St());return te(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ln(E,T)})).apply(this,arguments)}function Er(_,f){return pi.apply(this,arguments)}function pi(){return(pi=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:createAuthUri",tn(_,f))})).apply(this,arguments)}function Ks(){return(Ks=(0,h.Z)(function*(_,f){const E={identifier:f,continueUri:en()?St():"http://localhost"},{signinMethods:T}=yield Er((0,k.m9)(_),E);return T||[]})).apply(this,arguments)}function Ul(){return(Ul=(0,h.Z)(function*(_,f){const m=(0,k.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&ja(m.auth,T,f);const{email:N}=yield Mr(m.auth,T);N!==_.email&&(yield _.reload())})).apply(this,arguments)}function Uu(){return(Uu=(0,h.Z)(function*(_,f,m){const E=(0,k.m9)(_),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};m&&ja(E.auth,N,m);const{email:z}=yield ad(E.auth,N);z!==_.email&&(yield _.reload())})).apply(this,arguments)}function jl(_,f){return $a.apply(this,arguments)}function $a(){return($a=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function $l(){return($l=(0,h.Z)(function*(_,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,k.m9)(_),N={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},z=yield mr(E,jl(E.auth,N));E.displayName=z.displayName||null,E.photoURL=z.photoUrl||null;const oe=E.providerData.find(({providerId:Ue})=>"password"===Ue);oe&&(oe.displayName=E.displayName,oe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(z)})).apply(this,arguments)}function Gl(_,f,m){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,h.Z)(function*(_,f,m){const{auth:E}=_,N={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(N.email=f),m&&(N.password=m);const z=yield mr(_,Nt(E,N));yield _._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class wo{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class _d extends wo{constructor(f,m,E,T){super(f,m,E),this.username=T}}class vd extends wo{constructor(f,m){super(f,"facebook.com",m)}}class bo extends _d{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Zs extends wo{constructor(f,m){super(f,"google.com",m)}}class ql extends _d{constructor(f,m,E){super(f,"twitter.com",m,E)}}function Or(_){const{user:f,_tokenResponse:m}=_;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function yd(_){var f,m;if(!_)return null;const{providerId:E}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},N=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const z=null===(m=null===(f=ot(_.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(z)return new wo(N,"anonymous"!==z&&"custom"!==z?z:null)}if(!E)return null;switch(E){case"facebook.com":return new vd(N,T);case"github.com":return new bo(N,T);case"google.com":return new Zs(N,T);case"twitter.com":return new ql(N,T,_.screenName||null);case"custom":case"anonymous":return new wo(N,null);default:return new wo(N,E,T)}}(m)}class gs{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new gs("enroll",f)}static _fromMfaPendingCredential(f){return new gs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return gs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return gs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ha{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=ke(f),T=m.customData._serverResponse,N=(T.mfaInfo||[]).map(oe=>pt._fromServerResponse(E,oe));te(T.mfaPendingCredential,E,"internal-error");const z=gs._fromMfaPendingCredential(T.mfaPendingCredential);return new Ha(z,N,function(){var oe=(0,h.Z)(function*(Ue){const tt=yield Ue._process(E,z);delete T.mfaInfo,delete T.mfaPendingCredential;const bt=Object.assign(Object.assign({},T),{idToken:tt.idToken,refreshToken:tt.refreshToken});switch(m.operationType){case"signIn":const at=yield vr._fromIdTokenResponse(E,m.operationType,bt);return yield E._updateCurrentUser(at.user),at;case"reauthenticate":return te(m.user,E,"internal-error"),vr._forOperation(m.user,m.operationType,bt);default:Ie(E,"internal-error")}});return function(Ue){return oe.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,h.Z)(function*(){return m.signInResolver(f)})()}}function qn(_,f){return Gt(_,"POST","/v2/accounts/mfaEnrollment:start",tn(_,f))}class ms{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>pt._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new ms(f)}getSession(){var f=this;return(0,h.Z)(function*(){return gs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var E=this;return(0,h.Z)(function*(){const T=f,N=yield E.getSession(),z=yield mr(E.user,T._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(z),E.user.reload()})()}unenroll(f){var m=this;return(0,h.Z)(function*(){const E="string"==typeof f?f:f.uid,T=yield m.user.getIdToken(),N=yield mr(m.user,function ag(_,f){return Gt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(_,f))}(m.user.auth,{idToken:T,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:z})=>z!==E),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const ia=new WeakMap,Kl="__sak";class Do{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Kl,"1"),this.storage.removeItem(Kl),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Bn=(()=>{class _ extends Do{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bd(){const _=(0,k.z$)();return Qt(_)||or(_)}()&&function Yn(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=us(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),N=this.localCache[E];T!==N&&m(E,N,T)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((oe,Ue,tt)=>{this.notifyListeners(oe,tt)});const T=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(T);if(m.newValue!==oe)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!E)return}const N=()=>{const oe=this.storage.getItem(T);!E&&this.localCache[T]===oe||this.notifyListeners(T,oe)},z=this.storage.getItem(T);!function Pa(){return(0,k.w1)()&&10===document.documentMode}()||z===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const N of Array.from(T))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var T=()=>super._set,N=this;return(0,h.Z)(function*(){yield T().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,T=this;return(0,h.Z)(function*(){const N=yield E().call(T,m);return T.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,T=this;return(0,h.Z)(function*(){yield E().call(T,m),delete T.localCache[m]})()}}return _.type="LOCAL",_})(),ar=(()=>{class _ extends Do{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return _.type="SESSION",_})();let zr=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const T=new _(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const T=m,{eventId:N,eventType:z,data:oe}=T.data,Ue=E.handlersMap[z];if(!(null==Ue?void 0:Ue.size))return;T.ports[0].postMessage({status:"ack",eventId:N,eventType:z});const tt=Array.from(Ue).map(function(){var at=(0,h.Z)(function*(Rn){return Rn(T.origin,oe)});return function(Rn){return at.apply(this,arguments)}}()),bt=yield function si(_){return Promise.all(_.map(function(){var f=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(tt);T.ports[0].postMessage({status:"done",eventId:N,eventType:z,response:bt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function sa(_="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return _+m}class Dd{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var T=this;return(0,h.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let z,oe;return new Promise((Ue,tt)=>{const bt=sa("",20);N.port1.start();const at=setTimeout(()=>{tt(new Error("unsupported_event"))},E);oe={messageChannel:N,onMessage(Rn){const ts=Rn;if(ts.data.eventId===bt)switch(ts.data.status){case"ack":clearTimeout(at),z=setTimeout(()=>{tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ue(ts.data.response);break;default:clearTimeout(at),clearTimeout(z),tt(new Error("invalid_response"))}}},T.handlers.add(oe),N.port1.addEventListener("message",oe.onMessage),T.target.postMessage({eventType:f,eventId:bt,data:m},[N.port2])}).finally(()=>{oe&&T.removeMessageHandler(oe)})})()}}function mn(){return window}function xi(){return void 0!==mn().WorkerGlobalScope&&"function"==typeof mn().importScripts}function gi(){return(gi=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Zl="firebaseLocalStorageDb",Co="firebaseLocalStorage",zn="fbase_key";class ys{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function oa(_,f){return _.transaction([Co],f?"readwrite":"readonly").objectStore(Co)}function Qs(){const _=indexedDB.open(Zl,1);return new Promise((f,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(Co,{keyPath:zn})}catch(T){m(T)}}),_.addEventListener("success",(0,h.Z)(function*(){const E=_.result;E.objectStoreNames.contains(Co)?f(E):(E.close(),yield function mi(){const _=indexedDB.deleteDatabase(Zl);return new ys(_).toPromise()}(),f(yield Qs()))}))})}function yi(_,f,m){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(_,f,m){const E=oa(_,!0).put({[zn]:f,value:m});return new ys(E).toPromise()})).apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(_,f){const m=oa(_,!1).get(f),E=yield new ys(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ki(_,f){const m=oa(_,!0).delete(f);return new ys(m).toPromise()}const Ri=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Qs()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(T++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return xi()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=zr._getInstance(function Cd(){return xi()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(T,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(T,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(T,N){return["keyChanged"]});return function(T,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,T;if(m.activeServiceWorker=yield function $u(){return gi.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Dd(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=N[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function kt(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Qs();return yield yi(m,Kl,"1"),yield Ki(m,Kl),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(N=>yi(N,m,E)),T.localCache[m]=E,T.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const T=yield E._withRetries(N=>function Ql(_,f){return Js.apply(this,arguments)}(N,m));return E.localCache[m]=T,T})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(T=>Ki(T,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries(z=>{const oe=oa(z,!1).getAll();return new ys(oe).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const T=[],N=new Set;for(const{fbase_key:z,value:oe}of E)N.add(z),JSON.stringify(m.localCache[z])!==JSON.stringify(oe)&&(m.notifyListeners(z,oe),T.push(z));for(const z of Object.keys(m.localCache))m.localCache[z]&&!N.has(z)&&(m.notifyListeners(z,null),T.push(z));return T})()}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const N of Array.from(T))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function aa(_,f){return Gt(_,"POST","/v2/accounts/mfaSignIn:start",tn(_,f))}function Ni(){return(Ni=(0,h.Z)(function*(_){return(yield Gt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Un(_){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=f,E.onerror=T=>{const N=_e("internal-error");N.customData=T,m(N)},E.type="text/javascript",E.charset="UTF-8",function Td(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(E)})}function To(_){return`__${_}${Math.floor(1e6*Math.random())}`}const kr=1e12;class Zi{constructor(f){this.auth=f,this.counter=kr,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new Yi(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||kr;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||kr))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(f||kr))||void 0===E||E.execute(),""})()}}class Yi{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;te(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Dn(_){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xs=To("rcb"),Sd=new cn(3e4,6e4);class lg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!mn().grecaptcha}load(f,m=""){return te(function cg(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(mn().grecaptcha):new Promise((E,T)=>{const N=mn().setTimeout(()=>{T(_e(f,"network-request-failed"))},Sd.get());mn()[Xs]=()=>{mn().clearTimeout(N),delete mn()[Xs];const oe=mn().grecaptcha;if(!oe)return void T(_e(f,"internal-error"));const Ue=oe.render;oe.render=(tt,bt)=>{const at=Ue(tt,bt);return this.counter++,at},this.hostLanguage=m,E(oe)},Un(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Xs,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),T(_e(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!mn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class dg{load(f){return(0,h.Z)(function*(){return new Zi(f)})()}clearedOneInstance(){}}const eo="recaptcha",Kr={theme:"light",type:"image"};class hg{constructor(f,m=Object.assign({},Kr),E){this.parameters=m,this.type=eo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ke(E),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dg:new lg,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const z=oe=>{!oe||(f.tokenChangeListeners.delete(z),N(oe))};f.tokenChangeListeners.add(z),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=mn()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){te(en()&&!xi(),f.auth,"internal-error"),yield function to(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Wr(_){return Ni.apply(this,arguments)}(f.auth);te(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _s{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Jo._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Cn(){return(Cn=(0,h.Z)(function*(_,f,m){const E=ke(_),T=yield Pr(E,f,(0,k.m9)(m));return new _s(T,N=>Ln(E,N))})).apply(this,arguments)}function ca(){return(ca=(0,h.Z)(function*(_,f,m){const E=(0,k.m9)(_);yield Hs(!1,E,"phone");const T=yield Pr(E.auth,f,(0,k.m9)(m));return new _s(T,N=>Ai(E,N))})).apply(this,arguments)}function ec(){return(ec=(0,h.Z)(function*(_,f,m){const E=(0,k.m9)(_),T=yield Pr(E.auth,f,(0,k.m9)(m));return new _s(T,N=>Gs(E,N))})).apply(this,arguments)}function Pr(_,f,m){return _i.apply(this,arguments)}function _i(){return(_i=(0,h.Z)(function*(_,f,m){var E;const T=yield m.verify();try{let N;if(te("string"==typeof T,_,"argument-error"),te(m.type===eo,_,"argument-error"),N="string"==typeof f?{phoneNumber:f}:f,"session"in N){const z=N.session;if("phoneNumber"in N)return te("enroll"===z.type,_,"internal-error"),(yield qn(_,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{te("signin"===z.type,_,"internal-error");const oe=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return te(oe,_,"missing-multi-factor-info"),(yield aa(_,{mfaPendingCredential:z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield rg(_,{phoneNumber:N.phoneNumber,recaptchaToken:T});return z}}finally{m._reset()}})).apply(this,arguments)}function vs(){return(vs=(0,h.Z)(function*(_,f){yield yn((0,k.m9)(_),f)})).apply(this,arguments)}let ki=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=ke(m)}verifyPhoneNumber(m,E){return Pr(this.auth,m,(0,k.m9)(E))}static credential(m,E){return Jo._fromVerification(m,E)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:T}=m;return E&&T?Jo._fromTokenResponse(E,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Qi(_,f){return f?se(f):(te(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Ga extends on{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Gn(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Gn(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Gn(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function nc(_){return vo(_.auth,new Ga(_),_.bypassAuthState)}function rc(_){const{auth:f,user:m}=_;return te(m,f,"internal-error"),pd(m,new Ga(_),_.bypassAuthState)}function Lt(_){return ic.apply(this,arguments)}function ic(){return(ic=(0,h.Z)(function*(_){const{auth:f,user:m}=_;return te(m,f,"internal-error"),yn(m,new Ga(_),_.bypassAuthState)})).apply(this,arguments)}class Qn{constructor(f,m,E,T,N=!1){this.auth=f,this.resolver=E,this.user=T,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,h.Z)(function*(E,T){f.pendingPromise={resolve:E,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(N){f.reject(N)}});return function(E,T){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:N,tenantId:z,error:oe,type:Ue}=f;if(oe)return void m.reject(oe);const tt={auth:m.auth,requestUri:E,sessionId:T,tenantId:z||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ue)(tt))}catch(bt){m.reject(bt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return nc;case"linkViaPopup":case"linkViaRedirect":return Lt;case"reauthViaPopup":case"reauthViaRedirect":return rc;default:Ie(this.auth,"internal-error")}}resolve(f){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sc=new cn(2e3,1e4);function Ad(){return(Ad=(0,h.Z)(function*(_,f,m){const E=ke(_);Ge(_,f,js);const T=Qi(E,m);return new Xi(E,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Gu(){return(Gu=(0,h.Z)(function*(_,f,m){const E=(0,k.m9)(_);Ge(E.auth,f,js);const T=Qi(E.auth,m);return new Xi(E.auth,"reauthViaPopup",f,T,E).executeNotNull()})).apply(this,arguments)}function qu(){return(qu=(0,h.Z)(function*(_,f,m){const E=(0,k.m9)(_);Ge(E.auth,f,js);const T=Qi(E.auth,m);return new Xi(E.auth,"linkViaPopup",f,T,E).executeNotNull()})).apply(this,arguments)}let Xi=(()=>{class _ extends Qn{constructor(m,E,T,N,z){super(m,E,N,z),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return te(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){ie(1===m.filter.length,"Popup operations only handle one event");const E=sa();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(_e(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,sc.get())};m()}}return _.currentPopupAction=null,_})();const es=new Map;class Jn extends Qn{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=es.get(m.auth._key());if(!E){try{const N=(yield function vi(_,f){return oc.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(N)}catch(T){E=()=>Promise.reject(T)}es.set(m.auth._key(),E)}return m.bypassAuthState||es.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const T=yield E.auth._redirectUserForId(f.eventId);if(T)return E.user=T,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function oc(){return(oc=(0,h.Z)(function*(_,f){const m=I(f),E=C(_);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(m));return yield E._remove(m),T})).apply(this,arguments)}function Ao(_,f){return da.apply(this,arguments)}function da(){return(da=(0,h.Z)(function*(_,f){return C(_)._set(I(f),"true")})).apply(this,arguments)}function C(_){return se(_._redirectPersistence)}function I(_){return de("pendingRedirect",_.config.apiKey,_.name)}function Z(){return(Z=(0,h.Z)(function*(_,f,m){const E=ke(_);Ge(_,f,js);const T=Qi(E,m);return yield Ao(T,E),T._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function xe(){return(xe=(0,h.Z)(function*(_,f,m){const E=(0,k.m9)(_);Ge(E.auth,f,js);const T=Qi(E.auth,m);yield Ao(T,E.auth);const N=yield Mo(E);return T._openRedirect(E.auth,f,"reauthViaRedirect",N)})).apply(this,arguments)}function Pt(){return(Pt=(0,h.Z)(function*(_,f,m){const E=(0,k.m9)(_);Ge(E.auth,f,js);const T=Qi(E.auth,m);yield Hs(!1,E,f.providerId),yield Ao(T,E.auth);const N=yield Mo(E);return T._openRedirect(E.auth,f,"linkViaRedirect",N)})).apply(this,arguments)}function Wn(){return(Wn=(0,h.Z)(function*(_,f){return yield ke(_)._initializationPromise,xn(_,f,!1)})).apply(this,arguments)}function xn(_,f){return ha.apply(this,arguments)}function ha(){return(ha=(0,h.Z)(function*(_,f,m=!1){const E=ke(_),T=Qi(E,f),z=yield new Jn(E,T,m).execute();return z&&!m&&(delete z.user._redirectEventId,yield E._persistUserIfCurrent(z.user),yield E._setRedirectUser(null,f)),z})).apply(this,arguments)}function Mo(_){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,h.Z)(function*(_){const f=sa(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Pi{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function ac(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xd(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!xd(f)){const T=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(_e(this.auth,T))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xo(f))}saveEventToCache(f){this.cachedEventUids.add(xo(f)),this.lastProcessedEventTime=Date.now()}}function xo(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function xd({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function uc(_){return qa.apply(this,arguments)}function qa(){return(qa=(0,h.Z)(function*(_,f={}){return Gt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const pg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ry=/^https?/;function Es(){return(Es=(0,h.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield uc(_);for(const m of f)try{if(lc(m))return}catch(E){}Ie(_,"unauthorized-domain")})).apply(this,arguments)}function lc(_){const f=St(),{protocol:m,hostname:E}=new URL(f);if(_.startsWith("chrome-extension://")){const z=new URL(_);return""===z.hostname&&""===E?"chrome-extension:"===m&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&z.hostname===E}if(!Ry.test(m))return!1;if(pg.test(_))return E===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const Oy=new cn(3e4,6e4);function ky(){const _=mn().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let Rd=null;function Py(_){return Rd=Rd||function gg(_){return new Promise((f,m)=>{var E,T,N;function z(){ky(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ky(),m(_e(_,"network-request-failed"))},timeout:Oy.get()})}if(null===(T=null===(E=mn().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(N=mn().gapi)||void 0===N?void 0:N.load)){const oe=To("iframefcb");return mn()[oe]=()=>{gapi.load?z():m(_e(_,"network-request-failed"))},Un(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Ue=>m(Ue))}z()}}).catch(f=>{throw Rd=null,f})}(_),Rd}const Qh=new cn(5e3,15e3),No={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function za(_){const f=_.config;te(f.authDomain,_,"auth-domain-config-required");const m=f.emulator?dn(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:_.name,v:ue.SDK_VERSION},T=Nd.get(_.config.apiHost);T&&(E.eid=T);const N=_._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,k.xO)(E).slice(1)}`}function fa(){return fa=(0,h.Z)(function*(_){const f=yield Py(_),m=mn().gapi;return te(m,_,"internal-error"),f.open({where:document.body,url:za(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:No,dontclear:!0},E=>new Promise(function(){var T=(0,h.Z)(function*(N,z){yield E.restyle({setHideOnLeave:!1});const oe=_e(_,"network-request-failed"),Ue=mn().setTimeout(()=>{z(oe)},Qh.get());function tt(){mn().clearTimeout(Ue),N(E)}E.ping(tt).then(tt,()=>{z(oe)})});return function(N,z){return T.apply(this,arguments)}}()))}),fa.apply(this,arguments)}const Ly={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pd{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function tf(_,f,m,E,T,N){te(_.config.authDomain,_,"auth-domain-config-required"),te(_.config.apiKey,_,"invalid-api-key");const z={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:E,v:ue.SDK_VERSION,eventId:T};if(f instanceof js){f.setDefaultLanguage(_.languageCode),z.providerId=f.providerId||"",(0,k.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ue,tt]of Object.entries(N||{}))z[Ue]=tt}if(f instanceof ni){const Ue=f.getScopes().filter(tt=>""!==tt);Ue.length>0&&(z.scopes=Ue.join(","))}_.tenantId&&(z.tid=_.tenantId);const oe=z;for(const Ue of Object.keys(oe))void 0===oe[Ue]&&delete oe[Ue];return`${function By({config:_}){return _.emulator?dn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,k.xO)(oe).slice(1)}`}const ro="webStorageSupport";class nf extends class mg{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return K("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new nf(f)}_finalizeEnroll(f,m,E){return function Ed(_,f){return Gt(_,"POST","/v2/accounts/mfaEnrollment:finalize",tn(_,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function ua(_,f){return Gt(_,"POST","/v2/accounts/mfaSignIn:finalize",tn(_,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Uy=(()=>{class _{constructor(){}static assertion(m){return nf._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var jy="@firebase/auth",rf="0.19.11";class yg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{var T;f((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function io(){return window}function Zu(){return(Zu=(0,h.Z)(function*(_,f,m){var E;const{BuildInfo:T}=io();ie(f.sessionId,"AuthEvent did not contain a session ID");const N=yield Wa(f.sessionId),z={};return or()?z.ibi=T.packageName:Sn()?z.apn=T.packageName:Ie(_,"operation-not-supported-in-this-environment"),T.displayName&&(z.appDisplayName=T.displayName),z.sessionId=N,tf(_,m,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,z)})).apply(this,arguments)}function Fi(){return(Fi=(0,h.Z)(function*(_){const{BuildInfo:f}=io(),m={};or()?m.iosBundleId=f.packageName:Sn()?m.androidPackageName=f.packageName:Ie(_,"operation-not-supported-in-this-environment"),yield uc(_,m)})).apply(this,arguments)}function Ld(){return(Ld=(0,h.Z)(function*(_,f,m){const{cordova:E}=io();let T=()=>{};try{yield new Promise((N,z)=>{let oe=null;function Ue(){var at;N();const Rn=null===(at=E.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof Rn&&Rn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function tt(){oe||(oe=window.setTimeout(()=>{z(_e(_,"redirect-cancelled-by-user"))},2e3))}function bt(){"visible"===(null==document?void 0:document.visibilityState)&&tt()}f.addPassiveListener(Ue),document.addEventListener("resume",tt,!1),Sn()&&document.addEventListener("visibilitychange",bt,!1),T=()=>{f.removePassiveListener(Ue),document.removeEventListener("resume",tt,!1),document.removeEventListener("visibilitychange",bt,!1),oe&&window.clearTimeout(oe)}})}finally{T()}})).apply(this,arguments)}function Wa(_){return vg.apply(this,arguments)}function vg(){return(vg=(0,h.Z)(function*(_){const f=Yu(_),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Yu(_){if(ie(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),m=new Uint8Array(f);for(let E=0;E<_.length;E++)m[E]=_.charCodeAt(E);return m}!function Hy(_){(0,ue._registerComponent)(new re.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:N,authDomain:z}=E.options;return((oe,Ue)=>{te(N&&!N.includes(":"),"invalid-api-key",{appName:oe.name}),te(!(null==z?void 0:z.includes(":")),"argument-error",{appName:oe.name});const tt={apiKey:N,authDomain:z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fa(_)},bt=new di(oe,Ue,tt);return function ae(_,f){const m=(null==f?void 0:f.persistence)||[],E=(Array.isArray(m)?m:[m]).map(se);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(bt,m),bt})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new re.wA("auth-internal",f=>{const m=ke(f.getProvider("auth").getImmediate());return new yg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(jy,rf,function $y(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ue.registerVersion)(jy,rf,"esm2017")}("Browser");class uf extends Pi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function hc(_){return ga.apply(this,arguments)}function ga(){return(ga=(0,h.Z)(function*(_){const f=yield pc()._get(cf(_));return f&&(yield pc()._remove(cf(_))),f})).apply(this,arguments)}function fc(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*f.length);_.push(f.charAt(E))}return _.join("")}function pc(){return se(Bn)}function cf(_){return de("authEvent",_.config.apiKey,_.name)}function Bd(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...m]=_.split("?");return(0,k.zd)(m.join("?"))}function pf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Ud(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function wg(_=(0,k.z$)()){return!("file:"!==Ud()&&"ionic:"!==Ud()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Fr(){try{const _=self.localStorage,f=sa();if(_)return _.setItem(f,"1"),_.removeItem(f),!function ma(_=(0,k.z$)()){return function Ky(){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Zy(_=(0,k.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,k.hl)()}catch(_){return Oo()&&(0,k.hl)()}return!1}function Oo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function yc(){return(function Wy(){return"http:"===Ud()||"https:"===Ud()}()||(0,k.ru)()||wg())&&!function jd(){return(0,k.b$)()||(0,k.UG)()}()&&Fr()&&!Oo()}function gf(){return wg()&&"undefined"!=typeof document}function Ka(){return(Ka=(0,h.Z)(function*(){return!!gf()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const Li={LOCAL:"local",NONE:"none",SESSION:"session"},Za=te,yf="persistence";function Ya(_){return _f.apply(this,arguments)}function _f(){return(_f=(0,h.Z)(function*(_){yield _._initializationPromise;const f=_c(),m=de(yf,_.config.apiKey,_.name);f&&f.setItem(m,_._getPersistence())})).apply(this,arguments)}function _c(){var _;try{return(null===(_=function mf(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const Yy=te;class wi{constructor(){this.browserResolver=se(class pa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ar,this._completeRedirectFn=xn}_openPopup(f,m,E,T){var N=this;return(0,h.Z)(function*(){var z;ie(null===(z=N.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const oe=tf(f,m,E,St(),T);return function Fd(_,f,m,E=500,T=600){const N=Math.max((window.screen.availHeight-T)/2,0).toString(),z=Math.max((window.screen.availWidth-E)/2,0).toString();let oe="";const Ue=Object.assign(Object.assign({},Ly),{width:E.toString(),height:T.toString(),top:N,left:z}),tt=(0,k.z$)().toLowerCase();m&&(oe=Ar(tt)?"_blank":m),wt(tt)&&(f=f||"http://localhost",Ue.scrollbars="yes");const bt=Object.entries(Ue).reduce((Rn,[ts,Ec])=>`${Rn}${ts}=${Ec},`,"");if(function wu(_=(0,k.z$)()){var f;return or(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(tt)&&"_self"!==oe)return function ef(_,f){const m=document.createElement("a");m.href=_,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",oe),new Pd(null);const at=window.open(f||"",oe,bt);te(at,_,"popup-blocked");try{at.focus()}catch(Rn){}return new Pd(at)}(f,oe,sa())})()}_openRedirect(f,m,E,T){var N=this;return(0,h.Z)(function*(){return yield N._originValidation(f),function Yh(_){mn().location.href=_}(tf(f,m,E,St(),T)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:T,promise:N}=this.eventManagers[m];return T?Promise.resolve(T):(ie(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,h.Z)(function*(){const E=yield function Fy(_){return fa.apply(this,arguments)}(f),T=new Pi(f);return E.register("authEvent",N=>(te(null==N?void 0:N.authEvent,f,"invalid-auth-event"),{status:T.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:T},m.iframes[f._key()]=E,T})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(ro,{type:ro},T=>{var N;const z=null===(N=null==T?void 0:T[0])||void 0===N?void 0:N[ro];void 0!==z&&m(!!z),Ie(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ny(_){return Es.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return us()||Qt()||or()}}),this.cordovaResolver=se(class ff{constructor(){this._redirectPersistence=ar,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=xn}_initialize(f){var m=this;return(0,h.Z)(function*(){const E=f._key();let T=m.eventManagers.get(E);return T||(T=new uf(f),m.eventManagers.set(E,T),m.attachCallbackListeners(f,T)),T})()}_openPopup(f){Ie(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,E,T){var N=this;return(0,h.Z)(function*(){!function Vd(_){var f,m,E,T,N,z,oe,Ue,tt,bt;const at=io();te("function"==typeof(null===(f=null==at?void 0:at.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(m=null==at?void 0:at.BuildInfo)||void 0===m?void 0:m.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(N=null===(T=null===(E=null==at?void 0:at.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===N?void 0:N.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Ue=null===(oe=null===(z=null==at?void 0:at.cordova)||void 0===z?void 0:z.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Ue?void 0:Ue.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(bt=null===(tt=null==at?void 0:at.cordova)||void 0===tt?void 0:tt.InAppBrowser)||void 0===bt?void 0:bt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield N._initialize(f);yield z.initialized(),z.resetRedirect(),function zu(){es.clear()}(),yield N._originValidation(f);const oe=function lf(_,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:fc(),postBody:null,tenantId:_.tenantId,error:_e(_,"no-auth-event")}}(f,E,T);yield function EE(_,f){return pc()._set(cf(_),f)}(f,oe);const Ue=yield function sf(_,f,m){return Zu.apply(this,arguments)}(f,oe,m),tt=yield function dc(_){const{cordova:f}=io();return new Promise(m=>{f.plugins.browsertab.isAvailable(E=>{let T=null;E?f.plugins.browsertab.openUrl(_):T=f.InAppBrowser.open(_,function go(_=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),m(T)})})}(Ue);return function _g(_,f,m){return Ld.apply(this,arguments)}(f,z,tt)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function of(_){return Fi.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:E,handleOpenURL:T,BuildInfo:N}=io(),z=setTimeout((0,h.Z)(function*(){yield hc(f),m.onEvent(pf())}),500),oe=function(){var bt=(0,h.Z)(function*(at){clearTimeout(z);const Rn=yield hc(f);let ts=null;Rn&&(null==at?void 0:at.url)&&(ts=function qy(_,f){var m,E;const T=function gc(_){const f=Bd(_),m=f.link?decodeURIComponent(f.link):void 0,E=Bd(m).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Bd(T).link||T||E||m||_}(f);if(T.includes("/__/auth/callback")){const N=Bd(T),z=N.firebaseError?function df(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(N.firebaseError)):null,oe=null===(E=null===(m=null==z?void 0:z.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Ue=oe?_e(oe):null;return Ue?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(Rn,at.url)),m.onEvent(ts||pf())});return function(Rn){return bt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,oe);const Ue=T,tt=`${N.packageName.toLowerCase()}://`;io().handleOpenURL=function(){var bt=(0,h.Z)(function*(at){if(at.toLowerCase().startsWith(tt)&&oe({url:at}),"function"==typeof Ue)try{Ue(at)}catch(Rn){console.error(Rn)}});return function(at){return bt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ar,this._completeRedirectFn=xn}_initialize(f){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,E,T){var N=this;return(0,h.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(f,m,E,T)})()}_openRedirect(f,m,E,T){var N=this;return(0,h.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(f,m,E,T)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return gf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const m=yield function Yr(){return Ka.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Cg(_){return _.unwrap()}function Qa(_){return Ig(_)}function Ig(_){const{_tokenResponse:f}=_ instanceof k.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof k.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return ki.credentialFromResult(_);const m=f.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Va;break;case"facebook.com":E=yo;break;case"github.com":E=hd;break;case"twitter.com":E=Su;break;default:const{oauthIdToken:T,oauthAccessToken:N,oauthTokenSecret:z,pendingToken:oe,nonce:Ue}=f;return N||z||T||oe?oe?m.startsWith("saml.")?Fn._create(m,oe):ds._fromParams({providerId:m,signInMethod:m,pendingToken:oe,idToken:T,accessToken:N}):new Xo(m).credential({idToken:T,accessToken:N,rawNonce:Ue}):null}return _ instanceof k.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function Lr(_,f){return f.catch(m=>{throw m instanceof k.ZR&&function Jy(_,f){var m;const E=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Xy(_,function ju(_,f){var m;const E=(0,k.m9)(_),T=f;return te(f.customData.operationType,E,"argument-error"),te(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Ha._fromError(E,T)}(_,f));else if(E){const T=Ig(f),N=f;T&&(N.credential=T,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(_,m),m}).then(m=>{const T=m.user;return{operationType:m.operationType,credential:Qa(m),additionalUserInfo:Or(m),user:ko.getOrCreate(T)}})}function vf(_,f){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,h.Z)(function*(_,f){const m=yield f;return{verificationId:m.verificationId,confirm:E=>Lr(_,m.confirm(E))}})).apply(this,arguments)}class Xy{constructor(f,m){this.resolver=m,this.auth=function Qy(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Lr(Cg(this.auth),this.resolver.resolveSignIn(f))}}class ko{constructor(f){this._delegate=f,this.multiFactor=function wd(_){const f=(0,k.m9)(_);return ia.has(f)||ia.set(f,ms._fromUser(f)),ia.get(f)}(f)}static getOrCreate(f){return ko.USER_MAP.has(f)||ko.USER_MAP.set(f,new ko(f)),ko.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,h.Z)(function*(){return Lr(m.auth,Ai(m._delegate,f))})()}linkWithPhoneNumber(f,m){var E=this;return(0,h.Z)(function*(){return vf(E.auth,function Xl(_,f,m){return ca.apply(this,arguments)}(E._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,h.Z)(function*(){return Lr(m.auth,function Ji(_,f,m){return qu.apply(this,arguments)}(m._delegate,f,wi))})()}linkWithRedirect(f){var m=this;return(0,h.Z)(function*(){return yield Ya(ke(m.auth)),function Je(_,f,m){return function Tt(_,f,m){return Pt.apply(this,arguments)}(_,f,m)}(m._delegate,f,wi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,h.Z)(function*(){return Lr(m.auth,Gs(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return vf(this.auth,function fg(_,f,m){return ec.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return Lr(this.auth,function So(_,f,m){return Gu.apply(this,arguments)}(this._delegate,f,wi))}reauthenticateWithRedirect(f){var m=this;return(0,h.Z)(function*(){return yield Ya(ke(m.auth)),function ee(_,f,m){return function Me(_,f,m){return xe.apply(this,arguments)}(_,f,m)}(m._delegate,f,wi)})()}sendEmailVerification(f){return function Mi(_,f){return Ul.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,h.Z)(function*(){return yield function Ba(_,f){return Ol.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Hl(_,f){return Gl((0,k.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function md(_,f){return Gl((0,k.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function tc(_,f){return vs.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ra(_,f){return $l.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Bu(_,f,m){return Uu.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ko.USER_MAP=new WeakMap;const vc=te;let wf=(()=>{class _{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=m.options;vc(T,"invalid-api-key",{appName:m.name}),vc(T,"invalid-api-key",{appName:m.name});const N="undefined"!=typeof window?wi:void 0;this._delegate=E.initialize({options:{persistence:e_(T,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ko.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function gn(_,f,m){const E=ke(_);te(E._canInitEmulator,E,"emulator-config-failed"),te(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const T=!!(null==m?void 0:m.disableWarnings),N=_r(f),{host:z,port:oe}=function Fs(_){const f=_r(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const N=T[1];return{host:N,port:$n(E.substr(N.length+1))}}{const[N,z]=E.split(":");return{host:N,port:$n(z)}}}(f);E.config.emulator={url:`${N}//${z}${null===oe?"":`:${oe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:z,port:oe,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function qi(){function _(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,m,E)}applyActionCode(m){return function Pl(_,f){return De.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Bt(this._delegate,m)}confirmPasswordReset(m,E){return function Fu(_,f,m){return kl.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var T=this;return(0,h.Z)(function*(){return Lr(T._delegate,function na(_,f,m){return ii.apply(this,arguments)}(T._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Vu(_,f){return Ks.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Bl(_,f){const m=mo.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){vc(yc(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Mt(_,f){return Wn.apply(this,arguments)}(m._delegate,wi);return E?Lr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Eg(_,f){ke(_)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,E,T){const{next:N,error:z,complete:oe}=bf(m,E,T);return this._delegate.onAuthStateChanged(N,z,oe)}onIdTokenChanged(m,E,T){const{next:N,error:z,complete:oe}=bf(m,E,T);return this._delegate.onIdTokenChanged(N,z,oe)}sendSignInLinkToEmail(m,E){return function Vl(_,f,m){return gd.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function ku(_,f,m){return Pu.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,h.Z)(function*(){let T;switch(function bg(_,f){Za(Object.values(Li).includes(f),_,"invalid-persistence-type"),(0,k.b$)()?Za(f!==Li.SESSION,_,"unsupported-persistence-type"):(0,k.UG)()?Za(f===Li.NONE,_,"unsupported-persistence-type"):Oo()?Za(f===Li.NONE||f===Li.LOCAL&&(0,k.hl)(),_,"unsupported-persistence-type"):Za(f===Li.NONE||Fr(),_,"unsupported-persistence-type")}(E._delegate,m),m){case Li.SESSION:T=ar;break;case Li.LOCAL:T=(yield se(Ri)._isAvailable())?Ri:Bn;break;case Li.NONE:T=q;break;default:return Ie("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Lr(this._delegate,function Mu(_){return fd.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Lr(this._delegate,Ln(this._delegate,m))}signInWithCustomToken(m){return Lr(this._delegate,function qs(_,f){return zs.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return Lr(this._delegate,function Ll(_,f,m){return Ln((0,k.m9)(_),Nl.credential(f,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return Lr(this._delegate,function Lu(_,f,m){return Ws.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return vf(this._delegate,function Hu(_,f,m){return Cn.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,h.Z)(function*(){return vc(yc(),E._delegate,"operation-not-supported-in-this-environment"),Lr(E._delegate,function no(_,f,m){return Ad.apply(this,arguments)}(E._delegate,m,wi))})()}signInWithRedirect(m){var E=this;return(0,h.Z)(function*(){return vc(yc(),E._delegate,"operation-not-supported-in-this-environment"),yield Ya(E._delegate),function R(_,f,m){return function L(_,f,m){return Z.apply(this,arguments)}(_,f,m)}(E._delegate,m,wi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function En(_,f){return ta.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Li,_})();function bf(_,f,m){let E=_;"function"!=typeof _&&({next:E,error:f,complete:m}=_);const T=E;return{next:z=>T(z&&ko.getOrCreate(z)),error:f,complete:m}}function e_(_,f){const m=function Dg(_,f){const m=_c();if(!m)return[];const E=de(yf,_,f);switch(m.getItem(E)){case Li.NONE:return[q];case Li.LOCAL:return[Ri,ar];case Li.SESSION:return[ar];default:return[]}}(_,f);if("undefined"!=typeof self&&!m.includes(Ri)&&m.push(Ri),"undefined"!=typeof window)for(const E of[Bn,ar])m.includes(E)||m.push(E);return m.includes(q)||m.push(q),m}class Df{constructor(){this.providerId="phone",this._delegate=new ki(Cg(Y.Z.auth()))}static credential(f,m){return ki.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}Df.PHONE_SIGN_IN_METHOD=ki.PHONE_SIGN_IN_METHOD,Df.PROVIDER_ID=ki.PROVIDER_ID;const t_=te;class n_{constructor(f,m,E=Y.Z.app()){var T;t_(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new hg(f,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Sg(_){_.INTERNAL.registerComponent(new re.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new wf(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Nl,FacebookAuthProvider:yo,GithubAuthProvider:hd,GoogleAuthProvider:Va,OAuthProvider:Xo,SAMLAuthProvider:fi,PhoneAuthProvider:Df,PhoneMultiFactorGenerator:Uy,RecaptchaVerifier:n_,TwitterAuthProvider:Su,Auth:wf,AuthCredential:on,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.11")}(Y.Z)},8306:(ut,Se,O)=>{O.d(Se,{y:()=>$});var h=O(2961),Y=O(727),k=O(8822),ue=O(4671);var re=O(2416),fe=O(576),ce=O(2806);let $=(()=>{class Ae{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const pe=new Ae;return pe.source=this,pe.operator=Ve,pe}subscribe(Ve,pe,be){const nt=function We(Ae){return Ae&&Ae instanceof h.Lv||function J(Ae){return Ae&&(0,fe.m)(Ae.next)&&(0,fe.m)(Ae.error)&&(0,fe.m)(Ae.complete)}(Ae)&&(0,Y.Nn)(Ae)}(Ve)?Ve:new h.Hp(Ve,pe,be);return(0,ce.x)(()=>{const{operator:Ye,source:Ie}=this;nt.add(Ye?Ye.call(nt,Ie):Ie?this._subscribe(nt):this._trySubscribe(nt))}),nt}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(pe){Ve.error(pe)}}forEach(Ve,pe){return new(pe=H(pe))((be,nt)=>{const Ye=new h.Hp({next:Ie=>{try{Ve(Ie)}catch(_e){nt(_e),Ye.unsubscribe()}},error:nt,complete:be});this.subscribe(Ye)})}_subscribe(Ve){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Ve)}[k.L](){return this}pipe(...Ve){return function me(Ae){return 0===Ae.length?ue.y:1===Ae.length?Ae[0]:function(Ve){return Ae.reduce((pe,be)=>be(pe),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=H(Ve))((pe,be)=>{let nt;this.subscribe(Ye=>nt=Ye,Ye=>be(Ye),()=>pe(nt))})}}return Ae.create=Oe=>new Ae(Oe),Ae})();function H(Ae){var Oe;return null!==(Oe=null!=Ae?Ae:re.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(ut,Se,O)=>{O.d(Se,{x:()=>re});var h=O(8306),Y=O(727);const ue=(0,O(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=O(8737),me=O(2806);let re=(()=>{class ce extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const J=new fe(this,this);return J.operator=H,J}_throwIfClosed(){if(this.closed)throw new ue}next(H){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(H)}})}error(H){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:J}=this;for(;J.length;)J.shift().error(H)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:J,isStopped:We,observers:Ae}=this;return J||We?Y.Lc:(this.currentObservers=null,Ae.push(H),new Y.w0(()=>{this.currentObservers=null,(0,X.P)(Ae,H)}))}_checkFinalizedStatuses(H){const{hasError:J,thrownError:We,isStopped:Ae}=this;J?H.error(We):Ae&&H.complete()}asObservable(){const H=new h.y;return H.source=this,H}}return ce.create=($,H)=>new fe($,H),ce})();class fe extends re{constructor($,H){super(),this.destination=$,this.source=H}next($){var H,J;null===(J=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===J||J.call(H,$)}error($){var H,J;null===(J=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===J||J.call(H,$)}complete(){var $,H;null===(H=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===H||H.call($)}_subscribe($){var H,J;return null!==(J=null===(H=this.source)||void 0===H?void 0:H.subscribe($))&&void 0!==J?J:Y.Lc}}},2961:(ut,Se,O)=>{O.d(Se,{Hp:()=>Ve,Lv:()=>J});var h=O(576),Y=O(727),k=O(2416),ue=O(7849);function X(){}const me=ce("C",void 0,void 0);function ce(Ie,_e,Ee){return{kind:Ie,value:_e,error:Ee}}var $=O(3410),H=O(2806);class J extends Y.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Y.Nn)(_e)&&_e.add(this)):this.destination=Ye}static create(_e,Ee,Ge){return new Ve(_e,Ee,Ge)}next(_e){this.isStopped?nt(function fe(Ie){return ce("N",Ie,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?nt(function re(Ie){return ce("E",void 0,Ie)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?nt(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Ae(Ie,_e){return We.call(Ie,_e)}class Oe{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(_e)}catch(Ge){pe(Ge)}}error(_e){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(_e)}catch(Ge){pe(Ge)}else pe(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ee){pe(Ee)}}}class Ve extends J{constructor(_e,Ee,Ge){let $e;if(super(),(0,h.m)(_e)||!_e)$e={next:null!=_e?_e:void 0,error:null!=Ee?Ee:void 0,complete:null!=Ge?Ge:void 0};else{let te;this&&k.v.useDeprecatedNextContext?(te=Object.create(_e),te.unsubscribe=()=>this.unsubscribe(),$e={next:_e.next&&Ae(_e.next,te),error:_e.error&&Ae(_e.error,te),complete:_e.complete&&Ae(_e.complete,te)}):$e=_e}this.destination=new Oe($e)}}function pe(Ie){k.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ie):(0,ue.h)(Ie)}function nt(Ie,_e){const{onStoppedNotification:Ee}=k.v;Ee&&$.z.setTimeout(()=>Ee(Ie,_e))}const Ye={closed:!0,next:X,error:function be(Ie){throw Ie},complete:X}},727:(ut,Se,O)=>{O.d(Se,{Lc:()=>me,w0:()=>X,Nn:()=>re});var h=O(576);const k=(0,O(3888).d)(ce=>function(H){ce(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((J,We)=>`${We+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ue=O(8737);class X{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Ae of H)Ae.remove(this);else H.remove(this);const{initialTeardown:J}=this;if((0,h.m)(J))try{J()}catch(Ae){$=Ae instanceof k?Ae.errors:[Ae]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Ae of We)try{fe(Ae)}catch(Oe){$=null!=$?$:[],Oe instanceof k?$=[...$,...Oe.errors]:$.push(Oe)}}if($)throw new k($)}}add($){var H;if($&&$!==this)if(this.closed)fe($);else{if($ instanceof X){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push($)}}_hasParent($){const{_parentage:H}=this;return H===$||Array.isArray(H)&&H.includes($)}_addParent($){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push($),H):H?[H,$]:$}_removeParent($){const{_parentage:H}=this;H===$?this._parentage=null:Array.isArray(H)&&(0,ue.P)(H,$)}remove($){const{_finalizers:H}=this;H&&(0,ue.P)(H,$),$ instanceof X&&$._removeParent(this)}}X.EMPTY=(()=>{const ce=new X;return ce.closed=!0,ce})();const me=X.EMPTY;function re(ce){return ce instanceof X||ce&&"closed"in ce&&(0,h.m)(ce.remove)&&(0,h.m)(ce.add)&&(0,h.m)(ce.unsubscribe)}function fe(ce){(0,h.m)(ce)?ce():ce.unsubscribe()}},2416:(ut,Se,O)=>{O.d(Se,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Se,O)=>{O.d(Se,{E:()=>Y});const Y=new(O(8306).y)(X=>X.complete())},8996:(ut,Se,O)=>{O.d(Se,{D:()=>_e});var h=O(8421),Y=O(5363),k=O(9468),me=O(8306),fe=O(2202),ce=O(576),$=O(9672);function J(Ee,Ge){if(!Ee)throw new Error("Iterable cannot be null");return new me.y($e=>{(0,$.f)($e,Ge,()=>{const te=Ee[Symbol.asyncIterator]();(0,$.f)($e,Ge,()=>{te.next().then(K=>{K.done?$e.complete():$e.next(K.value)})},0,!0)})})}var We=O(3670),Ae=O(8239),Oe=O(1144),Ve=O(6495),pe=O(2206),be=O(4532),nt=O(3260);function _e(Ee,Ge){return Ge?function Ie(Ee,Ge){if(null!=Ee){if((0,We.c)(Ee))return function ue(Ee,Ge){return(0,h.Xf)(Ee).pipe((0,k.R)(Ge),(0,Y.Q)(Ge))}(Ee,Ge);if((0,Oe.z)(Ee))return function re(Ee,Ge){return new me.y($e=>{let te=0;return Ge.schedule(function(){te===Ee.length?$e.complete():($e.next(Ee[te++]),$e.closed||this.schedule())})})}(Ee,Ge);if((0,Ae.t)(Ee))return function X(Ee,Ge){return(0,h.Xf)(Ee).pipe((0,k.R)(Ge),(0,Y.Q)(Ge))}(Ee,Ge);if((0,pe.D)(Ee))return J(Ee,Ge);if((0,Ve.T)(Ee))return function H(Ee,Ge){return new me.y($e=>{let te;return(0,$.f)($e,Ge,()=>{te=Ee[fe.h](),(0,$.f)($e,Ge,()=>{let K,ie;try{({value:K,done:ie}=te.next())}catch(ye){return void $e.error(ye)}ie?$e.complete():$e.next(K)},0,!0)}),()=>(0,ce.m)(null==te?void 0:te.return)&&te.return()})}(Ee,Ge);if((0,nt.L)(Ee))return function Ye(Ee,Ge){return J((0,nt.Q)(Ee),Ge)}(Ee,Ge)}throw(0,be.z)(Ee)}(Ee,Ge):(0,h.Xf)(Ee)}},8421:(ut,Se,O)=>{O.d(Se,{Xf:()=>We});var h=O(655),Y=O(1144),k=O(8239),ue=O(8306),X=O(3670),me=O(2206),re=O(4532),fe=O(6495),ce=O(3260),$=O(576),H=O(7849),J=O(8822);function We(Ie){if(Ie instanceof ue.y)return Ie;if(null!=Ie){if((0,X.c)(Ie))return function Ae(Ie){return new ue.y(_e=>{const Ee=Ie[J.L]();if((0,$.m)(Ee.subscribe))return Ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,Y.z)(Ie))return function Oe(Ie){return new ue.y(_e=>{for(let Ee=0;Ee<Ie.length&&!_e.closed;Ee++)_e.next(Ie[Ee]);_e.complete()})}(Ie);if((0,k.t)(Ie))return function Ve(Ie){return new ue.y(_e=>{Ie.then(Ee=>{_e.closed||(_e.next(Ee),_e.complete())},Ee=>_e.error(Ee)).then(null,H.h)})}(Ie);if((0,me.D)(Ie))return be(Ie);if((0,fe.T)(Ie))return function pe(Ie){return new ue.y(_e=>{for(const Ee of Ie)if(_e.next(Ee),_e.closed)return;_e.complete()})}(Ie);if((0,ce.L)(Ie))return function nt(Ie){return be((0,ce.Q)(Ie))}(Ie)}throw(0,re.z)(Ie)}function be(Ie){return new ue.y(_e=>{(function Ye(Ie,_e){var Ee,Ge,$e,te;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,h.KL)(Ie);!(Ge=yield Ee.next()).done;)if(_e.next(Ge.value),_e.closed)return}catch(K){$e={error:K}}finally{try{Ge&&!Ge.done&&(te=Ee.return)&&(yield te.call(Ee))}finally{if($e)throw $e.error}}_e.complete()})})(Ie,_e).catch(Ee=>_e.error(Ee))})}},6451:(ut,Se,O)=>{O.d(Se,{T:()=>me});var h=O(8189),Y=O(8421),k=O(515),ue=O(7669),X=O(8996);function me(...re){const fe=(0,ue.yG)(re),ce=(0,ue._6)(re,1/0),$=re;return $.length?1===$.length?(0,Y.Xf)($[0]):(0,h.J)(ce)((0,X.D)($,fe)):k.E}},5403:(ut,Se,O)=>{O.d(Se,{x:()=>Y});var h=O(2961);function Y(ue,X,me,re,fe){return new k(ue,X,me,re,fe)}class k extends h.Lv{constructor(X,me,re,fe,ce,$){super(X),this.onFinalize=ce,this.shouldUnsubscribe=$,this._next=me?function(H){try{me(H)}catch(J){X.error(J)}}:super._next,this._error=fe?function(H){try{fe(H)}catch(J){X.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(H){X.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(ut,Se,O)=>{O.d(Se,{U:()=>k});var h=O(4482),Y=O(5403);function k(ue,X){return(0,h.e)((me,re)=>{let fe=0;me.subscribe((0,Y.x)(re,ce=>{re.next(ue.call(X,ce,fe++))}))})}},8189:(ut,Se,O)=>{O.d(Se,{J:()=>k});var h=O(5577),Y=O(4671);function k(ue=1/0){return(0,h.z)(Y.y,ue)}},5577:(ut,Se,O)=>{O.d(Se,{z:()=>fe});var h=O(4004),Y=O(8421),k=O(4482),ue=O(9672),X=O(5403),re=O(576);function fe(ce,$,H=1/0){return(0,re.m)($)?fe((J,We)=>(0,h.U)((Ae,Oe)=>$(J,Ae,We,Oe))((0,Y.Xf)(ce(J,We))),H):("number"==typeof $&&(H=$),(0,k.e)((J,We)=>function me(ce,$,H,J,We,Ae,Oe,Ve){const pe=[];let be=0,nt=0,Ye=!1;const Ie=()=>{Ye&&!pe.length&&!be&&$.complete()},_e=Ge=>be<J?Ee(Ge):pe.push(Ge),Ee=Ge=>{Ae&&$.next(Ge),be++;let $e=!1;(0,Y.Xf)(H(Ge,nt++)).subscribe((0,X.x)($,te=>{null==We||We(te),Ae?_e(te):$.next(te)},()=>{$e=!0},void 0,()=>{if($e)try{for(be--;pe.length&&be<J;){const te=pe.shift();Oe?(0,ue.f)($,Oe,()=>Ee(te)):Ee(te)}Ie()}catch(te){$.error(te)}}))};return ce.subscribe((0,X.x)($,_e,()=>{Ye=!0,Ie()})),()=>{null==Ve||Ve()}}(J,We,ce,H)))}},5363:(ut,Se,O)=>{O.d(Se,{Q:()=>ue});var h=O(9672),Y=O(4482),k=O(5403);function ue(X,me=0){return(0,Y.e)((re,fe)=>{re.subscribe((0,k.x)(fe,ce=>(0,h.f)(fe,X,()=>fe.next(ce),me),()=>(0,h.f)(fe,X,()=>fe.complete(),me),ce=>(0,h.f)(fe,X,()=>fe.error(ce),me)))})}},3099:(ut,Se,O)=>{O.d(Se,{B:()=>me});var h=O(8996),Y=O(5698),k=O(7579),ue=O(2961),X=O(4482);function me(fe={}){const{connector:ce=(()=>new k.x),resetOnError:$=!0,resetOnComplete:H=!0,resetOnRefCountZero:J=!0}=fe;return We=>{let Ae=null,Oe=null,Ve=null,pe=0,be=!1,nt=!1;const Ye=()=>{null==Oe||Oe.unsubscribe(),Oe=null},Ie=()=>{Ye(),Ae=Ve=null,be=nt=!1},_e=()=>{const Ee=Ae;Ie(),null==Ee||Ee.unsubscribe()};return(0,X.e)((Ee,Ge)=>{pe++,!nt&&!be&&Ye();const $e=Ve=null!=Ve?Ve:ce();Ge.add(()=>{pe--,0===pe&&!nt&&!be&&(Oe=re(_e,J))}),$e.subscribe(Ge),Ae||(Ae=new ue.Hp({next:te=>$e.next(te),error:te=>{nt=!0,Ye(),Oe=re(Ie,$,te),$e.error(te)},complete:()=>{be=!0,Ye(),Oe=re(Ie,H),$e.complete()}}),(0,h.D)(Ee).subscribe(Ae))})(We)}}function re(fe,ce,...$){return!0===ce?(fe(),null):!1===ce?null:ce(...$).pipe((0,Y.q)(1)).subscribe(()=>fe())}},9468:(ut,Se,O)=>{O.d(Se,{R:()=>Y});var h=O(4482);function Y(k,ue=0){return(0,h.e)((X,me)=>{me.add(k.schedule(()=>X.subscribe(me),ue))})}},5698:(ut,Se,O)=>{O.d(Se,{q:()=>ue});var h=O(515),Y=O(4482),k=O(5403);function ue(X){return X<=0?()=>h.E:(0,Y.e)((me,re)=>{let fe=0;me.subscribe((0,k.x)(re,ce=>{++fe<=X&&(re.next(ce),X<=fe&&re.complete())}))})}},8505:(ut,Se,O)=>{O.d(Se,{b:()=>X});var h=O(576),Y=O(4482),k=O(5403),ue=O(4671);function X(me,re,fe){const ce=(0,h.m)(me)||re||fe?{next:me,error:re,complete:fe}:me;return ce?(0,Y.e)(($,H)=>{var J;null===(J=ce.subscribe)||void 0===J||J.call(ce);let We=!0;$.subscribe((0,k.x)(H,Ae=>{var Oe;null===(Oe=ce.next)||void 0===Oe||Oe.call(ce,Ae),H.next(Ae)},()=>{var Ae;We=!1,null===(Ae=ce.complete)||void 0===Ae||Ae.call(ce),H.complete()},Ae=>{var Oe;We=!1,null===(Oe=ce.error)||void 0===Oe||Oe.call(ce,Ae),H.error(Ae)},()=>{var Ae,Oe;We&&(null===(Ae=ce.unsubscribe)||void 0===Ae||Ae.call(ce)),null===(Oe=ce.finalize)||void 0===Oe||Oe.call(ce)}))}):ue.y}},4408:(ut,Se,O)=>{O.d(Se,{o:()=>X});var h=O(727);class Y extends h.w0{constructor(re,fe){super()}schedule(re,fe=0){return this}}const k={setInterval(me,re,...fe){const{delegate:ce}=k;return(null==ce?void 0:ce.setInterval)?ce.setInterval(me,re,...fe):setInterval(me,re,...fe)},clearInterval(me){const{delegate:re}=k;return((null==re?void 0:re.clearInterval)||clearInterval)(me)},delegate:void 0};var ue=O(8737);class X extends Y{constructor(re,fe){super(re,fe),this.scheduler=re,this.work=fe,this.pending=!1}schedule(re,fe=0){if(this.closed)return this;this.state=re;const ce=this.id,$=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId($,ce,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId($,this.id,fe),this}requestAsyncId(re,fe,ce=0){return k.setInterval(re.flush.bind(re,this),ce)}recycleAsyncId(re,fe,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return fe;k.clearInterval(fe)}execute(re,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(re,fe);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,fe){let $,ce=!1;try{this.work(re)}catch(H){ce=!0,$=H||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:re,scheduler:fe}=this,{actions:ce}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(ce,this),null!=re&&(this.id=this.recycleAsyncId(fe,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Se,O)=>{O.d(Se,{v:()=>k});var h=O(6063);class Y{constructor(X,me=Y.now){this.schedulerActionCtor=X,this.now=me}schedule(X,me=0,re){return new this.schedulerActionCtor(this,X).schedule(re,me)}}Y.now=h.l.now;class k extends Y{constructor(X,me=Y.now){super(X,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:me}=this;if(this._active)return void me.push(X);let re;this._active=!0;do{if(re=X.execute(X.state,X.delay))break}while(X=me.shift());if(this._active=!1,re){for(;X=me.shift();)X.unsubscribe();throw re}}}},4986:(ut,Se,O)=>{O.d(Se,{z:()=>k});var h=O(4408);const k=new(O(7565).v)(h.o)},6063:(ut,Se,O)=>{O.d(Se,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(ut,Se,O)=>{O.d(Se,{z:()=>h});const h={setTimeout(Y,k,...ue){const{delegate:X}=h;return(null==X?void 0:X.setTimeout)?X.setTimeout(Y,k,...ue):setTimeout(Y,k,...ue)},clearTimeout(Y){const{delegate:k}=h;return((null==k?void 0:k.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(ut,Se,O)=>{O.d(Se,{h:()=>Y});const Y=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Se,O)=>{O.d(Se,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,Se,O)=>{O.d(Se,{_6:()=>me,jO:()=>ue,yG:()=>X});var h=O(576);function k(re){return re[re.length-1]}function ue(re){return(0,h.m)(k(re))?re.pop():void 0}function X(re){return function Y(re){return re&&(0,h.m)(re.schedule)}(k(re))?re.pop():void 0}function me(re,fe){return"number"==typeof k(re)?re.pop():fe}},8737:(ut,Se,O)=>{function h(Y,k){if(Y){const ue=Y.indexOf(k);0<=ue&&Y.splice(ue,1)}}O.d(Se,{P:()=>h})},3888:(ut,Se,O)=>{function h(Y){const ue=Y(X=>{Error.call(X),X.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}O.d(Se,{d:()=>h})},2806:(ut,Se,O)=>{O.d(Se,{O:()=>ue,x:()=>k});var h=O(2416);let Y=null;function k(X){if(h.v.useDeprecatedSynchronousErrorHandling){const me=!Y;if(me&&(Y={errorThrown:!1,error:null}),X(),me){const{errorThrown:re,error:fe}=Y;if(Y=null,re)throw fe}}else X()}function ue(X){h.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=X)}},9672:(ut,Se,O)=>{function h(Y,k,ue,X=0,me=!1){const re=k.schedule(function(){ue(),me?Y.add(this.schedule(null,X)):this.unsubscribe()},X);if(Y.add(re),!me)return re}O.d(Se,{f:()=>h})},4671:(ut,Se,O)=>{function h(Y){return Y}O.d(Se,{y:()=>h})},1144:(ut,Se,O)=>{O.d(Se,{z:()=>h});const h=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(ut,Se,O)=>{O.d(Se,{D:()=>Y});var h=O(576);function Y(k){return Symbol.asyncIterator&&(0,h.m)(null==k?void 0:k[Symbol.asyncIterator])}},576:(ut,Se,O)=>{function h(Y){return"function"==typeof Y}O.d(Se,{m:()=>h})},3670:(ut,Se,O)=>{O.d(Se,{c:()=>k});var h=O(8822),Y=O(576);function k(ue){return(0,Y.m)(ue[h.L])}},6495:(ut,Se,O)=>{O.d(Se,{T:()=>k});var h=O(2202),Y=O(576);function k(ue){return(0,Y.m)(null==ue?void 0:ue[h.h])}},8239:(ut,Se,O)=>{O.d(Se,{t:()=>Y});var h=O(576);function Y(k){return(0,h.m)(null==k?void 0:k.then)}},3260:(ut,Se,O)=>{O.d(Se,{L:()=>ue,Q:()=>k});var h=O(655),Y=O(576);function k(X){return(0,h.FC)(this,arguments,function*(){const re=X.getReader();try{for(;;){const{value:fe,done:ce}=yield(0,h.qq)(re.read());if(ce)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(fe)}}finally{re.releaseLock()}})}function ue(X){return(0,Y.m)(null==X?void 0:X.getReader)}},4482:(ut,Se,O)=>{O.d(Se,{A:()=>Y,e:()=>k});var h=O(576);function Y(ue){return(0,h.m)(null==ue?void 0:ue.lift)}function k(ue){return X=>{if(Y(X))return X.lift(function(me){try{return ue(me,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ut,Se,O)=>{O.d(Se,{h:()=>k});var h=O(2416),Y=O(3410);function k(ue){Y.z.setTimeout(()=>{const{onUnhandledError:X}=h.v;if(!X)throw ue;X(ue)})}},4532:(ut,Se,O)=>{function h(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Se,{z:()=>h})},655:(ut,Se,O)=>{function ue(K,ie){var ye={};for(var se in K)Object.prototype.hasOwnProperty.call(K,se)&&ie.indexOf(se)<0&&(ye[se]=K[se]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(se=Object.getOwnPropertySymbols(K);Ne<se.length;Ne++)ie.indexOf(se[Ne])<0&&Object.prototype.propertyIsEnumerable.call(K,se[Ne])&&(ye[se[Ne]]=K[se[Ne]])}return ye}function X(K,ie,ye,se){var St,Ne=arguments.length,ae=Ne<3?ie:null===se?se=Object.getOwnPropertyDescriptor(ie,ye):se;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ae=Reflect.decorate(K,ie,ye,se);else for(var en=K.length-1;en>=0;en--)(St=K[en])&&(ae=(Ne<3?St(ae):Ne>3?St(ie,ye,ae):St(ie,ye))||ae);return Ne>3&&ae&&Object.defineProperty(ie,ye,ae),ae}function re(K,ie){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(K,ie)}function fe(K,ie,ye,se){return new(ye||(ye=Promise))(function(ae,St){function en(Et){try{lt(se.next(Et))}catch(cn){St(cn)}}function kn(Et){try{lt(se.throw(Et))}catch(cn){St(cn)}}function lt(Et){Et.done?ae(Et.value):function Ne(ae){return ae instanceof ye?ae:new ye(function(St){St(ae)})}(Et.value).then(en,kn)}lt((se=se.apply(K,ie||[])).next())})}function pe(K){return this instanceof pe?(this.v=K,this):new pe(K)}function be(K,ie,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,se=ye.apply(K,ie||[]),ae=[];return Ne={},St("next"),St("throw"),St("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function St(dn){se[dn]&&(Ne[dn]=function(Ti){return new Promise(function(sn,ss){ae.push([dn,Ti,sn,ss])>1||en(dn,Ti)})})}function en(dn,Ti){try{!function kn(dn){dn.value instanceof pe?Promise.resolve(dn.value.v).then(lt,Et):cn(ae[0][2],dn)}(se[dn](Ti))}catch(sn){cn(ae[0][3],sn)}}function lt(dn){en("next",dn)}function Et(dn){en("throw",dn)}function cn(dn,Ti){dn(Ti),ae.shift(),ae.length&&en(ae[0][0],ae[0][1])}}function Ye(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,ie=K[Symbol.asyncIterator];return ie?ie.call(K):(K=function J(K){var ie="function"==typeof Symbol&&Symbol.iterator,ye=ie&&K[ie],se=0;if(ye)return ye.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&se>=K.length&&(K=void 0),{value:K&&K[se++],done:!K}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ye={},se("next"),se("throw"),se("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function se(ae){ye[ae]=K[ae]&&function(St){return new Promise(function(en,kn){!function Ne(ae,St,en,kn){Promise.resolve(kn).then(function(lt){ae({value:lt,done:en})},St)}(en,kn,(St=K[ae](St)).done,St.value)})}}}O.d(Se,{FC:()=>be,KL:()=>Ye,_T:()=>ue,gn:()=>X,mG:()=>fe,qq:()=>pe,w6:()=>re})},5e3:(ut,Se,O)=>{O.d(Se,{$8M:()=>To,$Z:()=>uv,AFp:()=>ry,ALo:()=>Tb,AaK:()=>fe,CHM:()=>Fl,CRH:()=>Vb,CZH:()=>m0,CqO:()=>cv,EJc:()=>v0,EpF:()=>Kn,F$t:()=>dv,F4k:()=>cm,FYo:()=>Bv,FiY:()=>Ei,G48:()=>sD,GfV:()=>$v,Gpc:()=>H,Hsn:()=>pl,JOm:()=>oe,Jf7:()=>Tg,LFG:()=>Je,LSH:()=>Qu,Lbi:()=>_0,NdJ:()=>Vc,OlP:()=>Mn,PXZ:()=>M0,Q6J:()=>uu,QGY:()=>cu,Qsj:()=>Uv,R0b:()=>qo,RDi:()=>fs,Rgc:()=>Qc,SBq:()=>$o,Sil:()=>DT,Suo:()=>Lb,TTD:()=>yo,TgZ:()=>Kt,Tol:()=>sp,VKq:()=>Fm,VLi:()=>AT,X6Q:()=>Rh,XFs:()=>dt,Xpm:()=>Vt,Y36:()=>vt,YKP:()=>Om,YNc:()=>sv,Yjl:()=>Ar,Yz7:()=>sn,ZZ4:()=>vy,_Bn:()=>$r,_UZ:()=>Dr,_Vd:()=>_p,_c5:()=>$0,_uU:()=>ym,aQg:()=>Lp,c2e:()=>oy,cJS:()=>tn,cg1:()=>cp,dDg:()=>C0,deG:()=>lg,dqk:()=>$t,eFA:()=>uy,ekj:()=>mv,g9A:()=>iy,h0i:()=>wh,hGG:()=>Oh,hij:()=>uh,iGM:()=>Fb,ifc:()=>qt,ip1:()=>ny,kL8:()=>hr,lG2:()=>Qt,lcZ:()=>bp,n5z:()=>Td,oAB:()=>Q,oxw:()=>je,q4F:()=>Hv,qLn:()=>Lr,qOj:()=>Rc,qZA:()=>lm,sBO:()=>vu,sIi:()=>nh,s_b:()=>jm,soG:()=>xa,tBr:()=>Zr,tb:()=>sy,tp0:()=>xo,uIk:()=>Qf,vHH:()=>Oe,vpe:()=>Go,wAp:()=>Dt,xp6:()=>Rt,z2F:()=>N0,zSh:()=>$f,zs3:()=>oo});var h=O(7579),Y=O(727),k=O(8306),ue=O(6451),X=O(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function re(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ce(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=me({__forward_ref__:me});function H(s){return s.__forward_ref__=H,s.toString=function(){return fe(this())},s}function J(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===H}class Oe extends Error{constructor(o,a){super(function Ve(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}function _e(s,o){const a=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${be(s)} found${a}`)}function lt(s,o){null==s&&function Et(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function sn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function tn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Gt(s){return gr(s,Hi)||gr(s,os)}function gr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Gr(s){return s&&(s.hasOwnProperty(qr)||s.hasOwnProperty(as))?s[qr]:null}const Hi=me({\u0275prov:me}),qr=me({\u0275inj:me}),os=me({ngInjectableDef:me}),as=me({ngInjectorDef:me});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let ei;function Zn(s){const o=ei;return ei=s,o}function ci(s,o,a){const l=Gt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&dt.Optional?null:void 0!==o?o:void _e(fe(s),"Injector")}function vn(s){return{toString:s}.toString()}var sr=(()=>((sr=sr||{})[sr.OnPush=0]="OnPush",sr[sr.Default=1]="Default",sr))(),qt=(()=>{return(s=qt||(qt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",qt;var s})();const ot="undefined"!=typeof globalThis&&globalThis,It="undefined"!=typeof window&&window,mr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$t=ot||"undefined"!=typeof global&&global||It||mr,yr={},ht=[],Sr=me({\u0275cmp:me}),Ut=me({\u0275dir:me}),Qe=me({\u0275pipe:me}),Te=me({\u0275mod:me}),et=me({\u0275fac:me}),ft=me({__NG_ELEMENT_ID__:me});let jt=0;function Vt(s){return vn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===sr.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||ht,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||qt.Emulated,id:"c",styles:s.styles||ht,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,g=s.features,v=s.pipes;return l.id+=jt++,l.inputs=wt(s.inputs,a),l.outputs=wt(s.outputs),g&&g.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(V):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(q):null,l})}function V(s){return zt(s)||function Sn(s){return s[Ut]||null}(s)}function q(s){return function Ot(s){return s[Qe]||null}(s)}const de={};function Q(s){return vn(()=>{const o={type:s.type,bootstrap:s.bootstrap||ht,declarations:s.declarations||ht,imports:s.imports||ht,exports:s.exports||ht,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(de[s.id]=s.type),o})}function wt(s,o){if(null==s)return yr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}const Qt=Vt;function Ar(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function zt(s){return s[Sr]||null}function pn(s,o){const a=s[Te]||null;if(!a&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return a}function Si(s){return Array.isArray(s)&&"object"==typeof s[1]}function hi(s){return Array.isArray(s)&&!0===s[1]}function ad(s){return 0!=(8&s.flags)}function Bs(s){return 2==(2&s.flags)}function Cu(s){return 1==(1&s.flags)}function ti(s){return null!==s.template}function Gh(s){return 0!=(512&s[2])}function ni(s,o){return s.hasOwnProperty(et)?s[et]:null}class Xo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function yo(){return Va}function Va(s){return s.type.prototype.ngOnChanges&&(s.setInput=og),hd}function hd(){const s=$s(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===yr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function og(s,o,a,l){const d=$s(s)||function fi(s,o){return s[Fn]=o}(s,{previous:yr,current:null}),g=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[a],D=v[w];g[w]=new Xo(D&&D.currentValue,o,v===yr),s[l]=o}yo.ngInherit=!0;const Fn="__ngSimpleChanges__";function $s(s){return s[Fn]||null}let Ru;function fs(s){Ru=s}function yn(s){return!!s.listen}const ea={createRenderer:(s,o)=>function Ba(){return void 0!==Ru?Ru:"undefined"!=typeof document?document:void 0}()};function un(s){for(;Array.isArray(s);)s=s[0];return s}function vo(s,o){return un(o[s])}function Rr(s,o){return un(o[s.index])}function Ua(s,o){return s.data[o]}function Nr(s,o){const a=o[s];return Si(a)?a:a[0]}function Gs(s){return 4==(4&s[2])}function ps(s){return 128==(128&s[2])}function ri(s,o){return null==o?null:s[o]}function qs(s){s[18]=0}function zs(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const pt={lFrame:wo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Fu(){return pt.bindingsEnabled}function De(){return pt.lFrame.lView}function Bt(){return pt.lFrame.tView}function Fl(s){return pt.lFrame.contextLView=s,s[8]}function En(){let s=ta();for(;null!==s&&64===s.type;)s=s.parent;return s}function ta(){return pt.lFrame.currentTNode}function ii(s,o){const a=pt.lFrame;a.currentTNode=s,a.isParent=o}function Ll(){return pt.lFrame.isParent}function Vl(){pt.lFrame.isParent=!1}function Lu(){return pt.isInCheckNoChangesMode}function Ws(s){pt.isInCheckNoChangesMode=s}function Er(){const s=pt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ks(){return pt.lFrame.bindingIndex++}function Mi(s){const o=pt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Uu(s,o){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=s,$a(o)}function $a(s){pt.lFrame.currentDirectiveIndex=s}function $l(){return pt.lFrame.currentQueryIndex}function Hl(s){pt.lFrame.currentQueryIndex=s}function md(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Gl(s,o,a){if(a&dt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&dt.Host||(d=md(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const l=pt.lFrame=yd();return l.currentTNode=o,l.lView=s,!0}function Eo(s){const o=yd(),a=s[1];pt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function yd(){const s=pt.lFrame,o=null===s?null:s.child;return null===o?wo(s):o}function wo(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function _d(){const s=pt.lFrame;return pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const vd=_d;function bo(){const s=_d();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Or(){return pt.lFrame.selectedIndex}function Ys(s){pt.lFrame.selectedIndex=s}function An(){const s=pt.lFrame;return Ua(s.tView,s.selectedIndex)}function gs(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:x}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),D&&(s.viewHooks||(s.viewHooks=[])).push(-a,D),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function Ha(s,o,a){Ed(s,o,3,a)}function ju(s,o,a,l){(3&s[2])===a&&Ed(s,o,a,l)}function qn(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Ed(s,o,a,l){const g=null!=l?l:-1,v=o.length-1;let w=0;for(let D=void 0!==l?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(w=o[D],null!=l&&w>=l)break}else o[D]<0&&(s[18]+=65536),(w<g||-1==g)&&(ag(s,a,o,D),s[18]=(4294901760&s[18])+D+2),D++}function ag(s,o,a,l){const d=a[l]<0,g=a[l+1],w=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class ia{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function gt(s,o,a){const l=yn(s);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const v=a[d++],w=a[d++],D=a[d++];l?s.setAttribute(o,w,D,v):o.setAttributeNS(v,w,D)}else{const v=g,w=a[++d];si(v)?l&&s.setProperty(o,v,w):l?s.setAttribute(o,v,w):o.setAttribute(v,w),d++}}return d}function ar(s){return 3===s||4===s||6===s}function si(s){return 64===s.charCodeAt(0)}function zr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||sa(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function sa(s,o,a,l,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function Dd(s){return-1!==s}function mn(s){return 32767&s}function xi(s,o){let a=function Yh(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let $u=!0;function gi(s){const o=$u;return $u=s,o}let Yl=0;function zn(s,o){const a=oa(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,ys(l.data,s),ys(o,null),ys(l.blueprint,null));const d=mi(s,o),g=s.injectorIndex;if(Dd(d)){const v=mn(d),w=xi(d,o),D=w[1].data;for(let S=0;S<8;S++)o[g+S]=w[v+S]|D[v+S]}return o[g+8]=d,g}function ys(s,o){s.push(0,0,0,0,0,0,0,0,o)}function oa(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function mi(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const g=d[1],v=g.type;if(l=2===v?g.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Qs(s,o,a){!function Co(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ft)&&(l=a[ft]),null==l&&(l=a[ft]=Yl++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Wi(s,o,a){if(a&dt.Optional)return s;_e(o,"NodeInjector")}function Ql(s,o,a,l){if(a&dt.Optional&&void 0===l&&(l=null),0==(a&(dt.Self|dt.Host))){const d=s[9],g=Zn(void 0);try{return d?d.get(o,l,a&dt.Optional):ci(o,l,a&dt.Optional)}finally{Zn(g)}}return Wi(l,o,a)}function Js(s,o,a,l=dt.Default,d){if(null!==s){const g=function aa(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ft)?s[ft]:void 0;return"number"==typeof o?o>=0?255&o:Jl:o}(a);if("function"==typeof g){if(!Gl(o,s,l))return l&dt.Host?Wi(d,a,l):Ql(o,a,l,d);try{const v=g(l);if(null!=v||l&dt.Optional)return v;_e(a)}finally{vd()}}else if("number"==typeof g){let v=null,w=oa(s,o),D=-1,S=l&dt.Host?o[16][6]:null;for((-1===w||l&dt.SkipSelf)&&(D=-1===w?mi(s,o):o[w+8],-1!==D&&Wr(l,!1)?(v=o[1],w=mn(D),o=xi(D,o)):w=-1);-1!==w;){const x=o[1];if(ua(g,w,x.data)){const P=Id(w,o,a,v,l,S);if(P!==Ki)return P}D=o[w+8],-1!==D&&Wr(l,o[1].data[w+8]===S)&&ua(g,w,o)?(v=x,w=mn(D),o=xi(D,o)):w=-1}}}return Ql(o,a,l,d)}const Ki={};function Jl(){return new Ni(En(),De())}function Id(s,o,a,l,d,g){const v=o[1],w=v.data[s+8],x=Io(w,v,a,null==l?Bs(w)&&$u:l!=v&&0!=(3&w.type),d&dt.Host&&g===w);return null!==x?Ri(o,v,x,w):Ki}function Io(s,o,a,l,d){const g=s.providerIndexes,v=o.data,w=1048575&g,D=s.directiveStart,x=g>>20,B=d?w+x:s.directiveEnd;for(let W=l?w:w+x;W<B;W++){const he=v[W];if(W<D&&a===he||W>=D&&he.type===a)return W}if(d){const W=v[D];if(W&&ti(W)&&W.type===a)return D}return null}function Ri(s,o,a,l){let d=s[a];const g=o.data;if(function wd(s){return s instanceof ia}(d)){const v=d;v.resolving&&function nt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${a}`)}(be(g[a]));const w=gi(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Zn(v.injectImpl):null;Gl(s,l,dt.Default);try{d=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Wl(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const v=Va(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==D&&Zn(D),gi(w),v.resolving=!1,vd()}}return d}function ua(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Wr(s,o){return!(s&dt.Self||s&dt.Host&&o)}class Ni{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Js(this._tNode,this._lView,o,l,a)}}function Td(s){return vn(()=>{const o=s.prototype.constructor,a=o[et]||Un(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[et]||Un(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Un(s){return We(s)?()=>{const o=Un(J(s));return o&&o()}:ni(s)}function To(s){return function yi(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(ar(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(En(),s)}const la="__parameters__";function Dn(s,o,a){return vn(()=>{const l=function Yi(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return w.annotation=v,w;function w(D,S,x){const P=D.hasOwnProperty(la)?D[la]:Object.defineProperty(D,la,{value:[]})[la];for(;P.length<=x;)P.push(null);return(P[x]=P[x]||[]).push(v),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Mn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=sn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const lg=new Mn("AnalyzeForEntryComponents");function Pr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Pr(l,o)):o!==s&&o.push(l)}return o}function _i(s,o){s.forEach(a=>Array.isArray(a)?_i(a,o):o(a))}function tc(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function vs(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ki(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}function Qn(s,o,a){let l=no(s,o);return l>=0?s[1|l]=a:(l=~l,function nc(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function sc(s,o){const a=no(s,o);if(a>=0)return s[1|a]}function no(s,o){return function So(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const g=l+(d-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?d=g:l=g+1}return~(d<<a)}(s,o,1)}const Ao={},da="__NG_DI_FLAG__",zu="ngTempTokenPath",I=/\n/gm,L="__source",Z=me({provide:String,useValue:me});let ee;function Me(s){const o=ee;return ee=s,o}function xe(s,o=dt.Default){if(void 0===ee)throw new Oe(203,"");return null===ee?ci(s,void 0,o):ee.get(s,o&dt.Optional?null:void 0,o)}function Je(s,o=dt.Default){return(function ir(){return ei}()||xe)(J(s),o)}const Pt=Je;function Mt(s){const o=[];for(let a=0;a<s.length;a++){const l=J(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Oe(900,"");let d,g=dt.Default;for(let v=0;v<l.length;v++){const w=l[v],D=xn(w);"number"==typeof D?-1===D?d=w.token:g|=D:d=w}o.push(Je(d,g))}else o.push(Je(l))}return o}function Wn(s,o){return s[da]=o,s.prototype[da]=o,s}function xn(s){return s[da]}const Zr=Wn(Dn("Inject",s=>({token:s})),-1),Ei=Wn(Dn("Optional"),8),xo=Wn(Dn("SkipSelf"),4);class Fd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ro(s){return s instanceof Fd?s.changingThisBreaksApplicationSecurity:s}const io=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,sf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var rn=(()=>((rn=rn||{})[rn.NONE=0]="NONE",rn[rn.HTML=1]="HTML",rn[rn.STYLE=2]="STYLE",rn[rn.SCRIPT=3]="SCRIPT",rn[rn.URL=4]="URL",rn[rn.RESOURCE_URL=5]="RESOURCE_URL",rn))();function Qu(s){const o=function ma(){const s=De();return s&&s[12]}();return o?o.sanitize(rn.URL,s)||"":function pa(s,o){const a=function Ku(s){return s instanceof Fd&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?ro(s):function Zu(s){return(s=String(s)).match(io)||s.match(sf)?s:"unsafe:"+s}(pe(s))}const gf="__ngContext__";function Yr(s,o){s[gf]=o}function mf(s){const o=function Ka(s){return s[gf]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Qa(s){return s.ngOriginalError}function Ig(s,...o){s.error(...o)}class Lr{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function Jy(s){return s&&s.ngErrorLogger||Ig}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Qa(o);for(;a&&Qa(a);)a=Qa(a);return a||null}}const n_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($t))();function Tg(s){return s.ownerDocument.defaultView}function m(s){return s instanceof Function?s():s}var oe=(()=>((oe=oe||{})[oe.Important=1]="Important",oe[oe.DashCase=2]="DashCase",oe))();function tt(s,o){return undefined(s,o)}function Rn(s){const o=s[3];return hi(o)?o[3]:o}function Ju(s){return Cf(s[13])}function Xu(s){return Cf(s[4])}function Cf(s){for(;null!==s&&!hi(s);)s=s[4];return s}function ya(s,o,a,l,d){if(null!=l){let g,v=!1;hi(l)?g=l:Si(l)&&(v=!0,l=l[0]);const w=un(l);0===s&&null!==a?null==d?l_(o,a,w):ws(o,a,w,d||null,!0):1===s&&null!==a?ws(o,a,w,d||null,!0):2===s?function f_(s,o,a){const l=_a(s,o);l&&function MC(s,o,a,l){yn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,w,v):3===s&&o.destroyNode(w),null!=g&&function RC(s,o,a,l,d){const g=a[7];g!==un(a)&&ya(o,s,l,g,d);for(let w=10;w<a.length;w++){const D=a[w];Rg(D[1],D,s,o,l,g)}}(o,s,g,a,d)}}function Gd(s,o,a){if(yn(s))return s.createElement(o,a);{const l=null!==a?function xu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function wE(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,zs(d,-1)),a.splice(l,1)}function o_(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&wE(d,l),o>0&&(s[a-1][4]=l[4]);const g=vs(s,10+o);!function Qr(s,o){Rg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function a_(s,o){if(!(256&o[2])){const a=o[11];yn(a)&&a.destroyNode&&Rg(s,o,a,3,null,null),function i_(s){let o=s[13];if(!o)return u_(s[1],s);for(;o;){let a=null;if(Si(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Si(o)&&u_(o[1],o),o=o[3];null===o&&(o=s),Si(o)&&u_(o[1],o),a=o&&o[4]}o=a}}(o)}}function u_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function DE(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof ia)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=d[g[v]],D=g[v+1];try{D.call(w)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function bE(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],w="function"==typeof v?v(o):un(o[v]),D=l[d=a[g+2]],S=a[g+3];"boolean"==typeof S?w.removeEventListener(a[g],D,S):S>=0?l[d=S]():l[d=-S].unsubscribe(),g+=2}else{const v=l[d=a[g+1]];a[g].call(v)}if(null!==l){for(let g=d+1;g<l.length;g++)l[g]();o[7]=null}}(s,o),1===o[1].type&&yn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&hi(o[3])){a!==o[3]&&wE(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function Mg(s,o,a){return function AC(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===qt.None||d===qt.Emulated)return null}return Rr(l,a)}(s,o.parent,a)}function ws(s,o,a,l,d){yn(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function l_(s,o,a){yn(s)?s.appendChild(o,a):o.appendChild(a)}function CE(s,o,a,l,d){null!==l?ws(s,o,a,l,d):l_(s,o,a)}function _a(s,o){return yn(s)?s.parentNode(o):o.parentNode}function IE(s,o,a){return c_(s,o,a)}let c_=function TE(s,o,a){return 40&s.type?Rr(s,a):null};function xg(s,o,a,l){const d=Mg(s,l,o),g=o[11],w=IE(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)CE(g,d,a[D],w,!1);else CE(g,d,a,w,!1)}function zd(s,o){if(null!==o){const a=o.type;if(3&a)return Rr(o,s);if(4&a)return h_(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return zd(s,l);{const d=s[o.index];return hi(d)?h_(-1,d):un(d)}}if(32&a)return tt(o,s)()||un(s[o.index]);{const l=AE(s,o);return null!==l?Array.isArray(l)?l[0]:zd(Rn(s[16]),l):zd(s,o.next)}}return null}function AE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function h_(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return zd(l,d)}return o[7]}function p_(s,o,a,l,d,g,v){for(;null!=a;){const w=l[a.index],D=a.type;if(v&&0===o&&(w&&Yr(un(w),l),a.flags|=4),64!=(64&a.flags))if(8&D)p_(s,o,a.child,l,d,g,!1),ya(o,s,d,w,g);else if(32&D){const S=tt(a,l);let x;for(;x=S();)ya(o,s,d,x,g);ya(o,s,d,w,g)}else 16&D?ME(s,o,l,a,d,g):ya(o,s,d,w,g);a=v?a.projectionNext:a.next}}function Rg(s,o,a,l,d,g){p_(a,l,s.firstChild,o,d,g,!1)}function ME(s,o,a,l,d,g){const v=a[16],D=v[6].projection[l.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)ya(o,s,d,D[S],g);else p_(s,o,D,v[3],d,g,!0)}function RE(s,o,a){yn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function m_(s,o,a){yn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function Ng(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const NE="ng-template";function oi(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==Ng(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Og(s){return 4===s.type&&s.value!==NE}function NC(s,o,a){return o===(4!==s.type||a?s.value:NE)}function OC(s,o,a){let l=4;const d=s.attrs||[],g=function wc(s){for(let o=0;o<s.length;o++)if(ar(s[o]))return o;return s.length}(d);let v=!1;for(let w=0;w<o.length;w++){const D=o[w];if("number"!=typeof D){if(!v)if(4&l){if(l=2|1&l,""!==D&&!NC(s,D,a)||""===D&&1===o.length){if(ur(l))return!1;v=!0}}else{const S=8&l?D:o[++w];if(8&l&&null!==s.attrs){if(!oi(s.attrs,S,a)){if(ur(l))return!1;v=!0}continue}const P=LA(8&l?"class":D,d,Og(s),a);if(-1===P){if(ur(l))return!1;v=!0;continue}if(""!==S){let B;B=P>g?"":d[P+1].toLowerCase();const W=8&l?B:null;if(W&&-1!==Ng(W,S,0)||2&l&&S!==B){if(ur(l))return!1;v=!0}}}}else{if(!v&&!ur(l)&&!ur(D))return!1;if(v&&ur(D))continue;v=!1,l=D|1&l}}return ur(l)||v}function ur(s){return 0==(1&s)}function LA(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function kg(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function OE(s,o,a=!1){for(let l=0;l<o.length;l++)if(OC(s,o[l],a))return!0;return!1}function el(s,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(s.length===l.length){for(let d=0;d<s.length;d++)if(s[d]!==l[d])continue e;return!0}}return!1}function Ht(s,o){return s?":not("+o.trim()+")":o}function kC(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const w=s[++a];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!ur(v)&&(o+=Ht(g,d),d=""),l=v,g=g||!ur(l);a++}return""!==d&&(o+=Ht(g,d)),o}const xt={};function Rt(s){Sf(Bt(),De(),Or()+s,Lu())}function Sf(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Ha(o,g,a)}else{const g=s.preOrderHooks;null!==g&&ju(o,g,0,a)}Ys(a)}function tl(s,o){return s<<17|o<<2}function Po(s){return s>>17&32767}function y_(s){return 2|s}function Xa(s){return(131068&s)>>2}function Vr(s,o){return-131069&s|o<<2}function Br(s){return 1|s}function kf(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];Hl(d),v.contentQueries(2,o[g],g)}}}function Dc(s,o,a,l,d,g,v,w,D,S){const x=o.blueprint.slice();return x[0]=d,x[2]=140|l,qs(x),x[3]=x[15]=s,x[8]=a,x[10]=v||s&&s[10],x[11]=w||s&&s[11],x[12]=D||s&&s[12]||null,x[9]=S||s&&s[9]||null,x[6]=g,x[16]=2==o.type?s[16]:x,x}function nl(s,o,a,l,d){let g=s.data[o];if(null===g)g=function Pf(s,o,a,l,d){const g=ta(),v=Ll(),D=s.data[o]=function HC(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}(s,o,a,l,d),function Ul(){return pt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const v=function na(){const s=pt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return ii(g,!0),g}function Cc(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function Wd(s,o,a){Eo(o);try{const l=s.viewQuery;null!==l&&Ac(1,l,a);const d=s.template;null!==d&&N_(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&kf(s,o),s.staticViewQueries&&Ac(2,s.viewQuery,a);const g=s.components;null!==g&&function R_(s,o){for(let a=0;a<o.length;a++)Zg(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,bo()}}function Kd(s,o,a,l){const d=o[2];if(256==(256&d))return;Eo(o);const g=Lu();try{qs(o),function Vu(s){return pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&N_(s,o,a,2,l);const v=3==(3&d);if(!g)if(v){const S=s.preOrderCheckHooks;null!==S&&Ha(o,S,null)}else{const S=s.preOrderHooks;null!==S&&ju(o,S,0,null),qn(o,0)}if(function Ui(s){for(let o=Ju(s);null!==o;o=Xu(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(1024&d[2])&&zs(g,1),d[2]|=1024}}}(o),function ZE(s){for(let o=Ju(s);null!==o;o=Xu(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];ps(l)&&Kd(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&kf(s,o),!g)if(v){const S=s.contentCheckHooks;null!==S&&Ha(o,S)}else{const S=s.contentHooks;null!==S&&ju(o,S,1),qn(o,1)}!function $C(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Ys(~d);else{const g=d,v=a[++l],w=a[++l];Uu(v,g),w(2,o[g])}}}finally{Ys(-1)}}(s,o);const w=s.components;null!==w&&function Ug(s,o){for(let a=0;a<o.length;a++)YE(s,o[a])}(o,w);const D=s.viewQuery;if(null!==D&&Ac(2,D,l),!g)if(v){const S=s.viewCheckHooks;null!==S&&Ha(o,S)}else{const S=s.viewHooks;null!==S&&ju(o,S,2),qn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,zs(o[3],-1))}finally{bo()}}function jE(s,o,a,l){const d=o[10],g=!Lu(),v=Gs(o);try{g&&!v&&d.begin&&d.begin(),v&&Wd(s,o,l),Kd(s,o,a,l)}finally{g&&!v&&d.end&&d.end()}}function N_(s,o,a,l,d){const g=Or(),v=2&l;try{Ys(-1),v&&o.length>20&&Sf(s,o,20,Lu()),a(l,d)}finally{Ys(g)}}function $g(s,o,a){!Fu()||(function qC(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||zn(a,o),Yr(l,o);const v=a.initialInputs;for(let w=d;w<g;w++){const D=s.data[w],S=ti(D);S&&WC(o,a,D);const x=Ri(o,s,w,a);Yr(x,o),null!==v&&KE(0,w-d,x,D,0,v),S&&(Nr(a.index,o)[8]=x)}}(s,o,a,Rr(a,o)),128==(128&a.flags)&&function Vf(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,w=function jl(){return pt.lFrame.currentDirectiveIndex}();try{Ys(v);for(let D=l;D<d;D++){const S=s.data[D],x=o[D];$a(D),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&V_(S,x)}}finally{Ys(-1),$a(w)}}(s,o,a))}function O_(s,o,a=Rr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],w=-1===v?a(o,s):s[v];s[d++]=w}}}function Hg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Zd(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Zd(s,o,a,l,d,g,v,w,D,S){const x=20+l,P=x+d,B=function k_(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:xt);return a}(x,P),W="function"==typeof S?S():S;return B[1]={type:s,blueprint:B,template:a,queries:null,viewQuery:w,declTNode:o,data:B.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:W,incompleteFirstPass:!1}}function Gg(s,o,a,l){const d=Xg(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&Uf(s).push(l,d.length-1))}function $E(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Lf(s,o,a,l){let d=!1;if(Fu()){const g=function zE(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];OE(a,v.selectors,!1)&&(d||(d=[]),Qs(zn(a,o),s,v.type),ti(v)?(B_(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==g){d=!0,WE(a,s.data.length,g.length);for(let x=0;x<g.length;x++){const P=g[x];P.providersResolver&&P.providersResolver(P)}let w=!1,D=!1,S=Cc(s,o,g.length,null);for(let x=0;x<g.length;x++){const P=g[x];a.mergedAttrs=zr(a.mergedAttrs,P.hostAttrs),Ic(s,a,o,S,P),zC(S,P,v),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const B=P.type.prototype;!w&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!D&&(B.ngOnChanges||B.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),D=!0),S++}!function HE(s,o){const l=o.directiveEnd,d=s.data,g=o.attrs,v=[];let w=null,D=null;for(let S=o.directiveStart;S<l;S++){const x=d[S],P=x.inputs,B=null===g||Og(o)?null:Kg(P,g);v.push(B),w=$E(P,S,w),D=$E(x.outputs,S,D)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=D}(s,a)}v&&function Wg(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new Oe(-301,!1);l.push(o[d],g)}}}(a,l,v)}return a.mergedAttrs=zr(a.mergedAttrs,a.attrs),d}function zg(s,o,a,l,d,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const D=~o.index;(function qE(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=D&&w.push(D),w.push(l,d,v)}}function V_(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function B_(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function zC(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;ti(o)&&(a[""]=s)}}function WE(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function Ic(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=ni(d.type)),v=new ia(g,ti(d),null);s.blueprint[l]=v,a[l]=v,zg(s,o,0,l,Cc(s,a,d.hostVars,xt),d)}function WC(s,o,a){const l=Rr(o,s),d=Hg(a),g=s[10],v=Qd(s,Dc(s,d,null,a.onPush?64:16,l,o,g,g.createRenderer(l,a),null,null));s[o.index]=v}function Ea(s,o,a,l,d,g){const v=Rr(s,o);!function eu(s,o,a,l,d,g,v){if(null==g)yn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==v?pe(g):v(g,l||"",d);yn(s)?s.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],v,g,s.value,a,l,d)}function KE(s,o,a,l,d,g){const v=g[o];if(null!==v){const w=l.setInput;for(let D=0;D<v.length;){const S=v[D++],x=v[D++],P=v[D++];null!==w?l.setInput(a,P,S,x):a[x]=P}}}function Kg(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function Yd(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function YE(s,o){const a=Nr(o,s);if(ps(a)){const l=a[1];80&a[2]?Kd(l,a,l.template,a[8]):a[5]>0&&Tc(a)}}function Tc(s){for(let l=Ju(s);null!==l;l=Xu(l))for(let d=10;d<l.length;d++){const g=l[d];if(1024&g[2]){const v=g[1];Kd(v,g,v.template,g[8])}else g[5]>0&&Tc(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Nr(a[l],s);ps(d)&&d[5]>0&&Tc(d)}}function Zg(s,o){const a=Nr(o,s),l=a[1];(function QE(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),Wd(l,a,a[8])}function Qd(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Yg(s){for(;s;){s[2]|=64;const o=Rn(s);if(Gh(s)&&!o)return s;s=o}return null}function Bf(s,o,a){const l=o[10];l.begin&&l.begin();try{Kd(s,o,s.template,a)}catch(d){throw j_(o,d),d}finally{l.end&&l.end()}}function Qg(s){!function Sc(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=mf(a),d=l[1];jE(d,l,d.template,a)}}(s[8])}function Ac(s,o,a){Hl(0),o(s,a)}const YC=(()=>Promise.resolve(null))();function Xg(s){return s[7]||(s[7]=[])}function Uf(s){return s.cleanup||(s.cleanup=[])}function j_(s,o){const a=s[9],l=a?a.get(Lr,null):null;l&&l.handleError(o)}function $_(s,o,a,l,d){for(let g=0;g<a.length;){const v=a[g++],w=a[g++],D=o[v],S=s.data[v];null!==S.setInput?S.setInput(D,d,l,w):D[w]=d}}function wa(s,o,a){const l=vo(o,s);!function Hd(s,o,a){yn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function tm(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?d=ce(d,w):2==g&&(l=ce(l,w+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const Mc=new Mn("INJECTOR",-1);class rl{get(o,a=Ao){if(a===Ao){const l=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw l.name="NullInjectorError",l}return a}}const $f=new Mn("Set Injector scope."),Hf={},G_={};let il;function nm(){return void 0===il&&(il=new rl),il}function sl(s,o=null,a=null,l){const d=q_(s,o,a,l);return d._resolveInjectorDefTypes(),d}function q_(s,o=null,a=null,l){return new QC(s,a,o||nm(),l)}class QC{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&_i(a,w=>this.processProvider(w,o,a)),_i([o],w=>this.processInjectorType(w,[],g)),this.records.set(Mc,ru(void 0,this));const v=this.records.get($f);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:fe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Ao,l=dt.Default){this.assertNotDestroyed();const d=Me(this),g=Zn(void 0);try{if(!(l&dt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const D=function XC(s){return"function"==typeof s||"object"==typeof s&&s instanceof Mn}(o)&&Gt(o);w=D&&this.injectableDefInScope(D)?ru(tu(o),Hf):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&dt.Self?nm():this.parent).get(o,a=l&dt.Optional&&a===Ao?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[zu]=v[zu]||[]).unshift(fe(o)),d)throw v;return function ha(s,o,a,l){const d=s[zu];throw o[L]&&d.unshift(o[L]),s.message=function Mo(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=fe(o);if(Array.isArray(o))d=o.map(fe).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):fe(w)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(I,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[zu]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Zn(g),Me(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(fe(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,a,l){if(!(o=J(o)))return!1;let d=Gr(o);const g=null==d&&o.ngModule||void 0,v=void 0===g?o:g,w=-1!==l.indexOf(v);if(void 0!==g&&(d=Gr(g)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(v);try{_i(d.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===x&&(x=[]),x.push(P))})}finally{}if(void 0!==x)for(let P=0;P<x.length;P++){const{ngModule:B,providers:W}=x[P];_i(W,he=>this.processProvider(he,B,W||ht))}}this.injectorDefTypes.add(v);const D=ni(v)||(()=>new v);this.records.set(v,ru(D,Hf));const S=d.providers;if(null!=S&&!w){const x=o;_i(S,P=>this.processProvider(P,x,S))}return void 0!==g&&void 0!==o.providers}processProvider(o,a,l){let d=Jd(o=J(o))?o:J(o&&o.provide);const g=function rm(s,o,a){return z_(s)?ru(void 0,s.useValue):ru(Gf(s),Hf)}(o);if(Jd(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=ru(void 0,Hf,!0),v.factory=()=>Mt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,g)}hydrate(o,a){return a.value===Hf&&(a.value=G_,a.value=a.factory()),"object"==typeof a.value&&a.value&&function zf(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=J(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function tu(s){const o=Gt(s),a=null!==o?o.factory:ni(s);if(null!==a)return a;if(s instanceof Mn)throw new Oe(204,!1);if(s instanceof Function)return function nu(s){const o=s.length;if(o>0)throw ki(o,"?"),new Oe(204,!1);const a=function li(s){const o=s&&(s[Hi]||s[os]);if(o){const a=function ks(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Oe(204,!1)}function Gf(s,o,a){let l;if(Jd(s)){const d=J(s);return ni(d)||tu(d)}if(z_(s))l=()=>J(s.useValue);else if(function im(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Mt(s.deps||[]));else if(function jn(s){return!(!s||!s.useExisting)}(s))l=()=>Je(J(s.useExisting));else{const d=J(s&&(s.useClass||s.provide));if(!function qf(s){return!!s.deps}(s))return ni(d)||tu(d);l=()=>new d(...Mt(s.deps))}return l}function ru(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function z_(s){return null!==s&&"object"==typeof s&&Z in s}function Jd(s){return"function"==typeof s}let oo=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return sl({name:""},l,a,"");{const g=null!==(d=a.name)&&void 0!==d?d:"";return sl({name:g},a.parent,a.providers,g)}}}return s.THROW_IF_NOT_FOUND=Ao,s.NULL=new rl,s.\u0275prov=sn({token:s,providedIn:"any",factory:()=>Je(Mc)}),s.__NG_ELEMENT_ID__=-1,s})();function Q_(s,o){gs(mf(s)[1],En())}function Rc(s){let o=function th(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(ti(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=Xn(s.inputs),v.declaredInputs=Xn(s.declaredInputs),v.outputs=Xn(s.outputs);const w=d.hostBindings;w&&oI(s,w);const D=d.viewQuery,S=d.contentQueries;if(D&&lw(s,D),S&&sI(s,S),re(s.inputs,d.inputs),re(s.declaredInputs,d.declaredInputs),re(s.outputs,d.outputs),ti(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===Rc&&(a=!1)}}o=Object.getPrototypeOf(o)}!function iI(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=zr(d.hostAttrs,a=zr(a,d.hostAttrs))}}(l)}function Xn(s){return s===yr?{}:s===ht?[]:s}function lw(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function sI(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,g)=>{o(l,d,g),a(l,d,g)}:o}function oI(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Yf=null;function Nc(){if(!Yf){const s=$t.Symbol;if(s&&s.iterator)Yf=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Yf=l)}}}return Yf}function nh(s){return!!J_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Nc()in s)}function J_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ai(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Qf(s,o,a,l){const d=De();return ai(d,Ks(),o)&&(Bt(),Ea(An(),d,s,o,a,l)),Qf}function sv(s,o,a,l,d,g,v,w){const D=De(),S=Bt(),x=s+20,P=S.firstCreatePass?function Cs(s,o,a,l,d,g,v,w,D){const S=o.consts,x=nl(o,s,4,v||null,ri(S,w));Lf(o,a,x,ri(S,D)),gs(o,x);const P=x.tViews=Zd(2,x,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,x),P.queries=o.queries.embeddedTView(x)),x}(x,S,D,o,a,l,d,g,v):S.data[x];ii(P,!1);const B=D[11].createComment("");xg(S,D,B,P),Yr(B,D),Qd(D,D[x]=Yd(B,D,B,P)),Cu(P)&&$g(S,D,P),null!=v&&O_(D,P,w)}function vt(s,o=dt.Default){const a=De();return null===a?Je(s,o):Js(En(),a,J(s),o)}function uv(){throw new Error("invalid")}function uu(s,o,a){const l=De();return ai(l,Ks(),o)&&function bs(s,o,a,l,d,g,v,w){const D=Rr(o,a);let x,S=o.inputs;!w&&null!=S&&(x=S[l])?($_(s,a,x,l,d),Bs(o)&&function P_(s,o){const a=Nr(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function GC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,yn(g)?g.setProperty(D,l,d):si(l)||(D.setProperty?D.setProperty(l,d):D[l]=d))}(Bt(),An(),l,s,o,l[11],a,!1),uu}function um(s,o,a,l,d){const v=d?"class":"style";$_(s,a,o.inputs[v],v,l)}function Kt(s,o,a,l){const d=De(),g=Bt(),v=20+s,w=d[11],D=d[v]=Gd(w,o,function xy(){return pt.lFrame.currentNamespace}()),S=g.firstCreatePass?function ep(s,o,a,l,d,g,v){const w=o.consts,S=nl(o,s,2,d,ri(w,g));return Lf(o,a,S,ri(w,v)),null!==S.attrs&&tm(S,S.attrs,!1),null!==S.mergedAttrs&&tm(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,g,d,0,o,a,l):g.data[v];ii(S,!0);const x=S.mergedAttrs;null!==x&&gt(w,D,x);const P=S.classes;null!==P&&m_(w,D,P);const B=S.styles;return null!==B&&RE(w,D,B),64!=(64&S.flags)&&xg(g,d,D,S),0===function ja(){return pt.lFrame.elementDepthCount}()&&Yr(D,d),function ku(){pt.lFrame.elementDepthCount++}(),Cu(S)&&($g(g,d,S),function jg(s,o,a){if(ad(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}(g,S,d)),null!==l&&O_(d,S),Kt}function lm(){let s=En();Ll()?Vl():(s=s.parent,ii(s,!1));const o=s;!function Pu(){pt.lFrame.elementDepthCount--}();const a=Bt();return a.firstCreatePass&&(gs(a,s),ad(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Zh(s){return 0!=(16&s.flags)}(o)&&um(a,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ug(s){return 0!=(32&s.flags)}(o)&&um(a,o,De(),o.stylesWithoutHost,!1),lm}function Dr(s,o,a,l){return Kt(s,o,a,l),lm(),Dr}function Kn(){return De()}function cu(s){return!!s&&"function"==typeof s.then}function cm(s){return!!s&&"function"==typeof s.subscribe}const cv=cm;function Vc(s,o,a,l){const d=De(),g=Bt(),v=En();return function fl(s,o,a,l,d,g,v,w){const D=Cu(l),x=s.firstCreatePass&&Uf(s),P=o[8],B=Xg(o);let W=!0;if(3&l.type||w){const He=Rr(l,o),Xe=w?w(He):He,Ce=B.length,mt=w?Zt=>w(un(Zt[l.index])):l.index;if(yn(a)){let Zt=null;if(!w&&D&&(Zt=function du(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===l){const w=o[7],D=d[g+2];return w.length>D?w[D]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,l.index)),null!==Zt)(Zt.__ngLastListenerFn__||Zt).__ngNextListenerFn__=g,Zt.__ngLastListenerFn__=g,W=!1;else{g=dm(l,o,P,g,!1);const ln=a.listen(Xe,d,g);B.push(g,ln),x&&x.push(d,mt,Ce,Ce+1)}}else g=dm(l,o,P,g,!0),Xe.addEventListener(d,g,v),B.push(g),x&&x.push(d,mt,Ce,v)}else g=dm(l,o,P,g,!1);const he=l.outputs;let Pe;if(W&&null!==he&&(Pe=he[d])){const He=Pe.length;if(He)for(let Xe=0;Xe<He;Xe+=2){const Ss=o[Pe[Xe]][Pe[Xe+1]].subscribe(g),nd=B.length;B.push(g,Ss),x&&x.push(d,l.index,nd,-(nd+1))}}}(g,d,d[11],v,s,o,!!a,l),Vc}function oh(s,o,a,l){try{return!1!==a(l)}catch(d){return j_(s,d),!1}}function dm(s,o,a,l,d){return function g(v){if(v===Function)return l;const w=2&s.flags?Nr(s.index,o):o;0==(32&o[2])&&Yg(w);let D=oh(o,0,l,v),S=g.__ngNextListenerFn__;for(;S;)D=oh(o,0,S,v)&&D,S=S.__ngNextListenerFn__;return d&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function je(s=1){return function Zs(s){return(pt.lFrame.contextLView=function ql(s,o){for(;s>0;)o=o[15],s--;return o}(s,pt.lFrame.contextLView))[8]}(s)}function Iw(s,o){let a=null;const l=function ve(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let d=0;d<o.length;d++){const g=o[d];if("*"!==g){if(null===l?OE(s,g,!0):el(l,g))return d}else a=d}return a}function dv(s){const o=De()[16][6];if(!o.projection){const l=o.projection=ki(s?s.length:1,null),d=l.slice();let g=o.child;for(;null!==g;){const v=s?Iw(g,s):0;null!==v&&(d[v]?d[v].projectionNext=g:l[v]=g,d[v]=g),g=g.next}}}function pl(s,o=0,a){const l=De(),d=Bt(),g=nl(d,20+s,16,null,a||null);null===g.projection&&(g.projection=o),Vl(),64!=(64&g.flags)&&function g_(s,o,a){ME(o[11],0,o,a,Mg(s,a,o),IE(a.parent||o[6],a,o))}(d,l,g)}function pv(s,o,a,l,d){const g=s[a+1],v=null===o;let w=l?Po(g):Xa(g),D=!1;for(;0!==w&&(!1===D||v);){const x=s[w+1];Tw(s[w],o)&&(D=!0,s[w+1]=l?Br(x):y_(x)),w=l?Po(x):Xa(x)}D&&(s[a+1]=l?y_(g):Br(g))}function Tw(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&no(s,o)>=0}const Cr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ui(s){return s.substring(Cr.key,Cr.keyEnd)}function rp(s,o){const a=Cr.textEnd;return a===o?-1:(o=Cr.keyEnd=function Aw(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,Cr.key=o,a),Da(s,o,a))}function Da(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function mv(s,o){return function Vo(s,o,a,l){const d=De(),g=Bt(),v=Mi(2);g.firstUpdatePass&&yv(g,s,v,l),o!==xt&&ai(d,v,o)&&Sa(g,g.data[Or()],d,d[11],s,d[v+1]=function mm(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(ro(s)))),s}(o,a),l,v)}(s,o,null,!0),mv}function sp(s){!function Bo(s,o,a,l){const d=Bt(),g=Mi(2);d.firstUpdatePass&&yv(d,null,g,l);const v=De();if(a!==xt&&ai(v,g,a)){const w=d.data[Or()];if(op(w,l)&&!xw(d,g)){let D=l?w.classesWithoutHost:w.stylesWithoutHost;null!==D&&(a=ce(D,a||"")),um(d,w,v,a,l)}else!function Rw(s,o,a,l,d,g,v,w){d===xt&&(d=ht);let D=0,S=0,x=0<d.length?d[0]:null,P=0<g.length?g[0]:null;for(;null!==x||null!==P;){const B=D<d.length?d[D+1]:void 0,W=S<g.length?g[S+1]:void 0;let Pe,he=null;x===P?(D+=2,S+=2,B!==W&&(he=P,Pe=W)):null===P||null!==x&&x<P?(D+=2,he=x):(S+=2,he=P,Pe=W),null!==he&&Sa(s,o,a,l,he,Pe,v,w),x=D<d.length?d[D]:null,P=S<g.length?g[S]:null}}(d,w,v,v[11],v[g+1],v[g+1]=function TI(s,o,a){if(null==a||""===a)return ht;const l=[],d=ro(a);if(Array.isArray(d))for(let g=0;g<d.length;g++)s(l,d[g],!0);else if("object"==typeof d)for(const g in d)d.hasOwnProperty(g)&&s(l,g,d[g]);else"string"==typeof d&&o(l,d);return l}(s,o,a),l,g)}}(Qn,In,s,!0)}function In(s,o){for(let a=function Nn(s){return function ip(s){Cr.key=0,Cr.keyEnd=0,Cr.value=0,Cr.valueEnd=0,Cr.textEnd=s.length}(s),rp(s,Da(s,0,Cr.textEnd))}(o);a>=0;a=rp(o,a))Qn(s,ui(o),!0)}function xw(s,o){return o>=s.expandoStartIndex}function yv(s,o,a,l){const d=s.data;if(null===d[a+1]){const g=d[Or()],v=xw(s,a);op(g,l)&&null===o&&!v&&(o=!1),o=function bI(s,o,a,l){const d=function ra(s){const o=pt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Ta(a=Ia(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=Ia(d,s,o,a,l),null===g){let D=function DI(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Xa(l))return s[Po(l)]}(s,o,l);void 0!==D&&Array.isArray(D)&&(D=Ia(null,s,o,D[1],l),D=Ta(D,o.attrs,l),function CI(s,o,a,l){s[Po(a?o.classBindings:o.styleBindings)]=l}(s,o,l,D))}else g=function II(s,o,a){let l;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)l=Ta(l,s[g].hostAttrs,a);return Ta(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,l),function pm(s,o,a,l,d,g){let v=g?o.classBindings:o.styleBindings,w=Po(v),D=Xa(v);s[l]=a;let x,S=!1;if(Array.isArray(a)){const P=a;x=P[1],(null===x||no(P,x)>0)&&(S=!0)}else x=a;if(d)if(0!==D){const B=Po(s[w+1]);s[l+1]=tl(B,w),0!==B&&(s[B+1]=Vr(s[B+1],l)),s[w+1]=function PC(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=tl(w,0),0!==w&&(s[w+1]=Vr(s[w+1],l)),w=l;else s[l+1]=tl(D,0),0===w?w=l:s[D+1]=Vr(s[D+1],l),D=l;S&&(s[l+1]=y_(s[l+1])),pv(s,x,l,!0),pv(s,x,l,!1),function np(s,o,a,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&no(g,o)>=0&&(a[l+1]=Br(a[l+1]))}(o,x,s,l,g),v=tl(w,D),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,l)}}function Ia(s,o,a,l,d){let g=null;const v=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<v&&(g=o[w],l=Ta(l,g.hostAttrs,d),g!==s);)w++;return null!==s&&(a.directiveStylingLast=w),l}function Ta(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Qn(s,v,!!a||o[++g]))}return void 0===s?null:s}function Sa(s,o,a,l,d,g,v,w){if(!(3&o.type))return;const D=s.data,S=D[w+1];fu(function Af(s){return 1==(1&s)}(S)?vv(D,o,a,d,Xa(S),v):void 0)||(fu(g)||function Fg(s){return 2==(2&s)}(S)&&(g=vv(D,null,a,d,w,v)),function xE(s,o,a,l,d){const g=yn(s);if(o)d?g?s.addClass(a,l):a.classList.add(l):g?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:oe.DashCase;if(null==d)g?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=oe.Important),g?s.setStyle(a,l,d,v):a.style.setProperty(l,d,w?"important":"")}}}(l,v,vo(Or(),a),d,g))}function vv(s,o,a,l,d,g){const v=null===o;let w;for(;d>0;){const D=s[d],S=Array.isArray(D),x=S?D[1]:D,P=null===x;let B=a[d+1];B===xt&&(B=P?ht:void 0);let W=P?sc(B,l):x===l?B:void 0;if(S&&!fu(W)&&(W=sc(D,l)),fu(W)&&(w=W,v))return w;const he=s[d+1];d=v?Po(he):Xa(he)}if(null!==o){let D=g?o.residualClasses:o.residualStyles;null!=D&&(w=sc(D,l))}return w}function fu(s){return void 0!==s}function op(s,o){return 0!=(s.flags&(o?16:32))}function ym(s,o=""){const a=De(),l=Bt(),d=s+20,g=l.firstCreatePass?nl(l,d,1,o,null):l.data[d],v=a[d]=function $d(s,o){return yn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);xg(l,a,v,g),ii(g,!1)}function uh(s,o,a){const l=De(),d=function rh(s,o,a,l){return ai(s,Ks(),a)?o+pe(a)+l:xt}(l,s,o,a);return d!==xt&&wa(l,Or(),d),uh}const Ts=void 0;var zw=["en",[["a","p"],["AM","PM"],Ts],[["AM","PM"],Ts,Ts],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ts,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ts,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ts,"{1} 'at' {0}",Ts],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qw(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let zc={};function cp(s){const o=function ml(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Jt(o);if(a)return a;const l=o.split("-")[0];if(a=Jt(l),a)return a;if("en"===l)return zw;throw new Error(`Missing locale data for the locale "${s}".`)}function hr(s){return cp(s)[Dt.PluralCase]}function Jt(s){return s in zc||(zc[s]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[s]),zc[s]}var Dt=(()=>((Dt=Dt||{})[Dt.LocaleId=0]="LocaleId",Dt[Dt.DayPeriodsFormat=1]="DayPeriodsFormat",Dt[Dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Dt[Dt.DaysFormat=3]="DaysFormat",Dt[Dt.DaysStandalone=4]="DaysStandalone",Dt[Dt.MonthsFormat=5]="MonthsFormat",Dt[Dt.MonthsStandalone=6]="MonthsStandalone",Dt[Dt.Eras=7]="Eras",Dt[Dt.FirstDayOfWeek=8]="FirstDayOfWeek",Dt[Dt.WeekendRange=9]="WeekendRange",Dt[Dt.DateFormat=10]="DateFormat",Dt[Dt.TimeFormat=11]="TimeFormat",Dt[Dt.DateTimeFormat=12]="DateTimeFormat",Dt[Dt.NumberSymbols=13]="NumberSymbols",Dt[Dt.NumberFormats=14]="NumberFormats",Dt[Dt.CurrencyCode=15]="CurrencyCode",Dt[Dt.CurrencySymbol=16]="CurrencySymbol",Dt[Dt.CurrencyName=17]="CurrencyName",Dt[Dt.Currencies=18]="Currencies",Dt[Dt.Directionality=19]="Directionality",Dt[Dt.PluralCase=20]="PluralCase",Dt[Dt.ExtraData=21]="ExtraData",Dt))();const Ir="en-US";let Ww=Ir;function Pv(s,o,a,l,d){if(s=J(s),Array.isArray(s))for(let g=0;g<s.length;g++)Pv(s[g],o,a,l,d);else{const g=Bt(),v=De();let w=Jd(s)?s:J(s.provide),D=Gf(s);const S=En(),x=1048575&S.providerIndexes,P=S.directiveStart,B=S.providerIndexes>>20;if(Jd(s)||!s.multi){const W=new ia(D,d,vt),he=Fv(w,o,d?x:x+B,P);-1===he?(Qs(zn(S,v),g,w),Kc(g,s,o.length),o.push(w),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(W),v.push(W)):(a[he]=W,v[he]=W)}else{const W=Fv(w,o,x+B,P),he=Fv(w,o,x,x+B),Pe=W>=0&&a[W],He=he>=0&&a[he];if(d&&!He||!d&&!Pe){Qs(zn(S,v),g,w);const Xe=function yb(s,o,a,l,d){const g=new ia(s,a,vt);return g.multi=[],g.index=o,g.componentProviders=0,vl(g,d,l&&!a),g}(d?mb:Zc,a.length,d,l,D);!d&&He&&(a[he].providerFactory=Xe),Kc(g,s,o.length,0),o.push(w),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(Xe),v.push(Xe)}else Kc(g,s,W>-1?W:he,vl(a[d?he:W],D,!d&&l));!d&&l&&He&&a[he].componentProviders++}}}function Kc(s,o,a,l){const d=Jd(o),g=function JC(s){return!!s.useClass}(o);if(d||g){const D=(g?J(o.useClass):o).prototype.ngOnDestroy;if(D){const S=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=S.indexOf(a);-1===x?S.push(a,[l,D]):S[x+1].push(l,D)}else S.push(a,D)}}}function vl(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Fv(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function Zc(s,o,a,l){return yp(this.multi,[])}function mb(s,o,a,l){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Ri(a,a[1],this.providerFactory.index,l);g=w.slice(0,v),yp(d,g);for(let D=v;D<w.length;D++)g.push(w[D])}else g=[],yp(d,g);return g}function yp(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function $r(s,o=[]){return a=>{a.providersResolver=(l,d)=>function jo(s,o,a){const l=Bt();if(l.firstCreatePass){const d=ti(s);Pv(a,l.data,l.blueprint,d,!0),Pv(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class xm{}class tT{resolveComponentFactory(o){throw function Vv(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let _p=(()=>{class s{}return s.NULL=new tT,s})();function Rm(){return lo(En(),De())}function lo(s,o){return new $o(Rr(s,o))}let $o=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Rm,s})();function _h(s){return s instanceof $o?s.nativeElement:s}class Bv{}let Uv=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function _b(){const s=De(),a=Nr(En().index,s);return function jv(s){return s[11]}(Si(a)?a:s)}(),s})(),nT=(()=>{class s{}return s.\u0275prov=sn({token:s,providedIn:"root",factory:()=>null}),s})();class $v{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Hv=new $v("13.3.1"),vp={};function El(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(un(g)),hi(g))for(let w=10;w<g.length;w++){const D=g[w],S=D[1].firstChild;null!==S&&El(D[1],D,S,l)}const v=a.type;if(8&v)El(s,o,a.child,l);else if(32&v){const w=tt(a,o);let D;for(;D=w();)l.push(D)}else if(16&v){const w=AE(o,a);if(Array.isArray(w))l.push(...w);else{const D=Rn(o[16]);El(D[1],D,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class Ma{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return El(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(hi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(o_(o,l),vs(a,l))}this._attachedToViewContainer=!1}a_(this._lView[1],this._lView)}onDestroy(o){Gg(this._lView[1],this._lView,null,o)}markForCheck(){Yg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Bf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function U_(s,o,a){Ws(!0);try{Bf(s,o,a)}finally{Ws(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ag(s,o){Rg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class rT extends Ma{constructor(o){super(o),this._view=o}detectChanges(){Qg(this._view)}checkNoChanges(){!function Jg(s){Ws(!0);try{Qg(s)}finally{Ws(!1)}}(this._view)}get context(){return null}}class Gv extends _p{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=zt(o);return new vh(a,this.ngModule)}}function vb(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class vh extends xm{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Ja(s){return s.map(kC).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return vb(this.componentDef.inputs)}get outputs(){return vb(this.componentDef.outputs)}create(o,a,l,d){const g=(d=d||this.ngModule)?function sT(s,o){return{get:(a,l,d)=>{const g=s.get(a,vp,d);return g!==vp||l===vp?g:o.get(a,l,d)}}}(o,d.injector):o,v=g.get(Bv,ea),w=g.get(nT,null),D=v.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",x=l?function Ff(s,o,a){if(yn(s))return s.selectRootElement(o,a===qt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(D,l,this.componentDef.encapsulation):Gd(v.createRenderer(null,this.componentDef),S,function iT(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(S)),P=this.componentDef.onPush?576:528,B=function Zf(s,o){return{components:[],scheduler:s||n_,clean:YC,playerHandler:o||null,flags:0}}(),W=Zd(0,null,null,1,0,null,null,null,null,null),he=Dc(null,W,B,P,null,null,v,D,w,g);let Pe,He;Eo(he);try{const Xe=function Kf(s,o,a,l,d,g){const v=a[1];a[20]=s;const D=nl(v,20,2,"#host",null),S=D.mergedAttrs=o.hostAttrs;null!==S&&(tm(D,S,!0),null!==s&&(gt(d,s,S),null!==D.classes&&m_(d,s,D.classes),null!==D.styles&&RE(d,s,D.styles)));const x=l.createRenderer(s,o),P=Dc(a,Hg(o),null,o.onPush?64:16,a[20],D,l,x,g||null,null);return v.firstCreatePass&&(Qs(zn(D,a),v,o.type),B_(v,D),WE(D,a.length,1)),Qd(a,P),a[20]=P}(x,this.componentDef,he,v,D);if(x)if(l)gt(D,x,["ng-version",Hv.full]);else{const{attrs:Ce,classes:mt}=function rt(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!ur(d))break;d=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ce&&gt(D,x,Ce),mt&&mt.length>0&&m_(D,x,mt.join(" "))}if(He=Ua(W,20),void 0!==a){const Ce=He.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Zt=a[mt];Ce.push(null!=Zt?Array.from(Zt):null)}}Pe=function eh(s,o,a,l,d){const g=a[1],v=function qg(s,o,a){const l=En();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Ic(s,l,o,Cc(s,o,1,null),a));const d=Ri(o,s,l.directiveStart,l);Yr(d,o);const g=Rr(l,o);return g&&Yr(g,o),d}(g,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(D=>D(v,o)),o.contentQueries){const D=En();o.contentQueries(1,v,D.directiveStart)}const w=En();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ys(w.index),zg(a[1],w,0,w.directiveStart,w.directiveEnd,o),V_(o,v)),v}(Xe,this.componentDef,he,B,[Q_]),Wd(W,he,null)}finally{bo()}return new Eb(this.componentType,Pe,lo(He,he),he,He)}}class Eb extends class Lv{}{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new rT(d),this.componentType=o}get injector(){return new Ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class wh{}class Om{}const yu=new Map;class ji extends wh{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Gv(this);const l=pn(o);this._bootstrapComponents=m(l.bootstrap),this._r3Injector=q_(o,a,[{provide:wh,useValue:this},{provide:_p,useValue:this.componentFactoryResolver}],fe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=oo.THROW_IF_NOT_FOUND,l=dt.Default){return o===oo||o===wh||o===Mc?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class km extends Om{constructor(o){super(),this.moduleType=o,null!==pn(o)&&function Ep(s){const o=new Set;!function a(l){const d=pn(l,!0),g=d.id;null!==g&&(function qv(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${fe(o)} vs ${fe(o.name)}`)}(g,yu.get(g),l),yu.set(g,l));const v=m(d.imports);for(const w of v)o.has(w)||(o.add(w),a(w))}(s)}(o)}create(o){return new ji(this.moduleType,o)}}function Fm(s,o,a,l){return Dl(De(),Er(),s,o,a,l)}function Dl(s,o,a,l,d,g){const v=o+a;return ai(s,v,d)?function ao(s,o,a){return s[o]=a}(s,v+1,g?l.call(g,d):l(d)):function co(s,o){const a=s[o];return a===xt?void 0:a}(s,v+1)}function Tb(s,o){const a=Bt();let l;const d=s+20;a.firstCreatePass?(l=function lT(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const g=l.factory||(l.factory=ni(l.type)),v=Zn(vt);try{const w=gi(!1),D=g();return gi(w),function hw(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,De(),d,D),D}finally{Zn(v)}}function bp(s,o,a){const l=s+20,d=De(),g=function Ai(s,o){return s[o]}(d,l);return function Ho(s,o){return s[1].data[o].pure}(d,l)?Dl(d,Er(),o,g.transform,a,g):g.transform(a)}function Vm(s){return o=>{setTimeout(s,void 0,o)}}const Go=class Dp extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,g,v;let w=o,D=a||(()=>null),S=l;if(o&&"object"==typeof o){const P=o;w=null===(d=P.next)||void 0===d?void 0:d.bind(P),D=null===(g=P.error)||void 0===g?void 0:g.bind(P),S=null===(v=P.complete)||void 0===v?void 0:v.bind(P)}this.__isAsync&&(D=Vm(D),w&&(w=Vm(w)),S&&(S=Vm(S)));const x=super.subscribe({next:w,error:D,complete:S});return o instanceof Y.w0&&o.add(x),x}};function hT(){return this._results[Nc()]()}class Bm{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Nc(),l=Bm.prototype;l[a]||(l[a]=hT)}get changes(){return this._changes||(this._changes=new Go)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Pr(o);(this._changesDetected=!function ec(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Qc=(()=>{class s{}return s.__NG_ELEMENT_ID__=Um,s})();const Kv=Qc,Cp=class extends Kv{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=Dc(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),Wd(a,l,o),new Ma(l)}};function Um(){return Ch(En(),De())}function Ch(s,o){return 4&s.type?new Cp(o,s,lo(s,o)):null}let jm=(()=>{class s{}return s.__NG_ELEMENT_ID__=Zv,s})();function Zv(){return Hm(En(),De())}const Mb=jm,xb=class extends Mb{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return lo(this._hostTNode,this._hostLView)}get injector(){return new Ni(this._hostTNode,this._hostLView)}get parentInjector(){const o=mi(this._hostTNode,this._hostLView);if(Dd(o)){const a=xi(o,this._hostLView),l=mn(o);return new Ni(a[1].data[l+8],a)}return new Ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Yv(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,g){const v=o&&!function ca(s){return"function"==typeof s}(o);let w;if(v)w=a;else{const P=a||{};w=P.index,l=P.injector,d=P.projectableNodes,g=P.ngModuleRef}const D=v?o:new vh(zt(o)),S=l||this.parentInjector;if(!g&&null==D.ngModule){const B=(v?S:this.parentInjector).get(wh,null);B&&(g=B)}const x=D.create(S,d,void 0,g);return this.insert(x.hostView,w),x}insert(o,a){const l=o._lView,d=l[1];if(function Nu(s){return hi(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const P=l[3],B=new xb(P,P[6],P[3]);B.detach(B.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function s_(s,o,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=o),l<g-10?(o[4]=a[d],tc(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function qd(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,v,g);const w=h_(g,v),D=l[11],S=_a(D,v[7]);return null!==S&&function Tf(s,o,a,l,d,g){l[0]=d,l[6]=o,Rg(s,l,a,1,d,g)}(d,v[6],D,l,S,w),o.attachToViewContainerRef(),tc($m(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Yv(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=o_(this._lContainer,a);l&&(vs($m(this._lContainer),a),a_(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=o_(this._lContainer,a);return l&&null!=vs($m(this._lContainer),a)?new Ma(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Yv(s){return s[8]}function $m(s){return s[8]||(s[8]=[])}function Hm(s,o){let a;const l=o[s.index];if(hi(l))a=l;else{let d;if(8&s.type)d=un(l);else{const g=o[11];d=g.createComment("");const v=Rr(s,o);ws(g,_a(g,v),d,function xC(s,o){return yn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=a=Yd(l,o,d,s),Qd(o,a)}return new xb(a,s,o)}class Gm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Gm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new Qv(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Ub(o,a).matches&&this.queries[a].setDirty()}}class Jc{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Cl{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new Cl(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ip{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Ip(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,qm(a,g)),this.matchTNodeWithReadOption(o,a,Io(a,o,g,!1,!1))}else l===Qc?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Io(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===$o||d===jm||d===Qc&&4&a.type)this.addMatch(a.index,-2);else{const g=Io(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function qm(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Ob(s,o,a,l){return-1===a?function Nb(s,o){return 11&s.type?lo(s,o):4&s.type?Ch(s,o):null}(o,s):-2===a?function kb(s,o,a){return a===$o?lo(o,s):a===Qc?Ch(o,s):a===jm?Hm(o,s):void 0}(s,o,l):Ri(s,s[1],a,o)}function Pb(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const g=s.data,v=a.matches,w=[];for(let D=0;D<v.length;D+=2){const S=v[D];w.push(S<0?null:Ob(o,g[S],v[D+1],a.metadata.read))}d.matches=w}return d.matches}function Tp(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const v=Pb(s,o,d,a);for(let w=0;w<g.length;w+=2){const D=g[w];if(D>0)l.push(v[w/2]);else{const S=g[w+1],x=o[-D];for(let P=10;P<x.length;P++){const B=x[P];B[17]===B[3]&&Tp(B[1],B,S,l)}if(null!==x[9]){const P=x[9];for(let B=0;B<P.length;B++){const W=P[B];Tp(W[1],W,S,l)}}}}}return l}function Fb(s){const o=De(),a=Bt(),l=$l();Hl(l+1);const d=Ub(a,l);if(s.dirty&&Gs(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Tp(a,o,l,[]):Pb(a,o,d,l);s.reset(g,_h),s.notifyOnChanges()}return!0}return!1}function Lb(s,o,a,l){const d=Bt();if(d.firstCreatePass){const g=En();(function Bb(s,o,a){null===s.queries&&(s.queries=new Cl),s.queries.track(new Ip(o,a))})(d,new Jc(o,a,l),g.index),function pT(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function Hr(s,o,a){const l=new Bm(4==(4&a));Gg(s,o,l,l.destroy),null===o[19]&&(o[19]=new Qv),o[19].queries.push(new Gm(l))}(d,De(),a)}function Vb(){return function Xv(s,o){return s[19].queries[o].queryList}(De(),$l())}function Ub(s,o){return s.queries.getByIndex(o)}function xp(...s){}const ny=new Mn("Application Initializer");let m0=(()=>{class s{constructor(a){this.appInits=a,this.resolve=xp,this.reject=xp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(cu(g))a.push(g);else if(cv(g)){const v=new Promise((w,D)=>{g.subscribe({complete:w,error:D})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Je(ny,8))},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ry=new Mn("AppId",{providedIn:"root",factory:function Wb(){return`${y0()}${y0()}${y0()}`}});function y0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iy=new Mn("Platform Initializer"),_0=new Mn("Platform ID"),sy=new Mn("appBootstrapListener");let oy=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})();const xa=new Mn("LocaleId",{providedIn:"root",factory:()=>Pt(xa,dt.Optional|dt.SkipSelf)||function Mh(){return"undefined"!=typeof $localize&&$localize.locale||Ir}()}),v0=new Mn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class xh{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let DT=(()=>{class s{compileModuleSync(a){return new km(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=m(pn(a).declarations).reduce((v,w)=>{const D=zt(w);return D&&v.push(new vh(D)),v},[]);return new xh(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const E0=(()=>Promise.resolve(0))();function Op(s){"undefined"==typeof Zone?E0.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class qo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Go(!1),this.onMicrotaskEmpty=new Go(!1),this.onStable=new Go(!1),this.onError=new Go(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function w0(){let s=$t.requestAnimationFrame,o=$t.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function TT(s){const o=()=>{!function b0(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call($t,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ay(s),s.isCheckStableRunning=!0,kp(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ay(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,v,w)=>{try{return Qb(s),a.invokeTask(d,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),D0(s)}},onInvoke:(a,l,d,g,v,w,D)=>{try{return Qb(s),a.invoke(d,g,v,w,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),D0(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,ay(s),kp(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(qo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,IT,xp,xp);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const IT={};function kp(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ay(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Qb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function D0(s){s._nesting--,kp(s)}class Jb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Go,this.onMicrotaskEmpty=new Go,this.onStable=new Go,this.onError=new Go}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let C0=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qo.assertNotInAngularZone(),Op(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Op(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Je(qo))},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})(),I0=(()=>{class s{constructor(){this._applications=new Map,T0.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return T0.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})();class ST{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function AT(s){T0=s}let zo,T0=new ST;const eD=new Mn("AllowMultipleToken");class M0{constructor(o,a){this.name=o,this.token=a}}function uy(s,o,a=[]){const l=`Platform: ${o}`,d=new Mn(l);return(g=[])=>{let v=x0();if(!v||v.injector.get(eD,!1))if(s)s(a.concat(g).concat({provide:d,useValue:!0}));else{const w=a.concat(g).concat({provide:d,useValue:!0},{provide:$f,useValue:"platform"});!function MT(s){if(zo&&!zo.destroyed&&!zo.injector.get(eD,!1))throw new Oe(400,"");zo=s.get(rD);const o=s.get(iy,null);o&&o.forEach(a=>a())}(oo.create({providers:w,name:l}))}return function tD(s){const o=x0();if(!o)throw new Oe(401,"");return o}()}}function x0(){return zo&&!zo.destroyed?zo:null}let rD=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function R0(s,o){let a;return a="noop"===s?new Jb:("zone.js"===s?void 0:s)||new qo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),D=[{provide:qo,useValue:w}];return w.run(()=>{const S=oo.create({providers:D,parent:this.injector,name:a.moduleType.name}),x=a.create(S),P=x.injector.get(Lr,null);if(!P)throw new Oe(402,"");return w.runOutsideAngular(()=>{const B=w.onError.subscribe({next:W=>{P.handleError(W)}});x.onDestroy(()=>{Pp(this._modules,x),B.unsubscribe()})}),function xT(s,o,a){try{const l=a();return cu(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(P,w,()=>{const B=x.injector.get(m0);return B.runInitializers(),B.donePromise.then(()=>(function Iv(s){lt(s,"Expected localeId to be defined"),"string"==typeof s&&(Ww=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(xa,Ir)||Ir),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=ly({},l);return function S0(s,o,a){const l=new km(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(N0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Je(oo))},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})();function ly(s,o){return Array.isArray(o)?o.reduce(ly,s):Object.assign(Object.assign({},s),o)}let N0=(()=>{class s{constructor(a,l,d,g,v){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new k.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),D=new k.y(S=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{qo.assertNotInAngularZone(),Op(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{qo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{x.unsubscribe(),P.unsubscribe()}});this.isStable=(0,ue.T)(w,D.pipe((0,X.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Oe(405,"");let d;d=a instanceof xm?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const g=function A0(s){return s.isBoundToModule}(d)?void 0:this._injector.get(wh),w=d.create(oo.NULL,[],l||d.selector,g),D=w.location.nativeElement,S=w.injector.get(C0,null),x=S&&w.injector.get(I0);return S&&x&&x.registerApplication(D,S),w.onDestroy(()=>{this.detachView(w.hostView),Pp(this.components,w),x&&x.unregisterApplication(D)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Pp(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(sy,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Je(qo),Je(oo),Je(Lr),Je(_p),Je(m0))},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Pp(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let cy=!0,dy=!1;function Rh(){return dy=!0,cy}function sD(){if(dy)throw new Error("Cannot enable prod mode after platform setup.");cy=!1}let vu=(()=>{class s{}return s.__NG_ELEMENT_ID__=k0,s})();function k0(s){return function RT(s,o,a){if(Bs(s)&&!a){const l=Nr(s.index,o);return new Ma(l,l)}return 47&s.type?new Ma(o[16],o):null}(En(),De(),16==(16&s))}class B0{constructor(){}supports(o){return nh(o)}create(o){return new U0(o)}}const PT=(s,o)=>o;class U0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||PT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<fD(l,d,g)?a:l,w=fD(v,d,g),D=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const S=w-d,x=D-d;if(S!=x){for(let B=0;B<S;B++){const W=B<g.length?g[B]:g[B]=0,he=W+B;x<=he&&he<S&&(g[B]=W+1)}g[v.previousIndex]=x-S}}w!==D&&o(v,w,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!nh(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,w),l=!0),a=a._next}else d=0,function dw(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Nc()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{v=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,w,v,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new dD(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new hD),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class dD{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yy{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class hD{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new yy,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fD(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class pD{constructor(){}supports(o){return o instanceof Map||J_(o)}create(){return new FT}}class FT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||J_(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new gD(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class gD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function _y(){return new vy([new B0])}let vy=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||_y()),deps:[[s,new xo,new Ei]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Oe(901,"")}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:_y}),s})();function Ey(){return new Lp([new pD])}let Lp=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Ey()),deps:[[s,new xo,new Ei]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new Oe(901,"")}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:Ey}),s})();const $0=uy(null,"core",[{provide:_0,useValue:"unknown"},{provide:rD,deps:[oo]},{provide:I0,deps:[]},{provide:oy,deps:[]}]);let Oh=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Je(N0))},s.\u0275mod=Q({type:s}),s.\u0275inj=tn({}),s})()},3942:(ut,Se,O)=>{O.d(Se,{Z:()=>Oe});var h=O(2090),Y=O(4859),k=O(9681),ue=O(1877);class X{constructor(pe,be){this._delegate=pe,this.firebase=be,(0,k._addComponent)(pe,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(pe,be=k._DEFAULT_ENTRY_NAME){var nt;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(pe);return!Ye.isInitialized()&&"EXPLICIT"===(null===(nt=Ye.getComponent())||void 0===nt?void 0:nt.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:be})}_removeServiceInstance(pe,be=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(be)}_addComponent(pe){(0,k._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,k._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ce(){const Ve=function fe(Ve){const pe={},be={__esModule:!0,initializeApp:function Ie($e,te={}){const K=k.initializeApp($e,te);if((0,h.r3)(pe,K.name))return pe[K.name];const ie=new Ve(K,be);return pe[K.name]=ie,ie},app:Ye,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ee($e){const te=$e.name,K=te.replace("-compat","");if(k._registerComponent($e)&&"PUBLIC"===$e.type){const ie=(ye=Ye())=>{if("function"!=typeof ye[K])throw re.create("invalid-app-argument",{appName:te});return ye[K]()};void 0!==$e.serviceProps&&(0,h.ZB)(ie,$e.serviceProps),be[K]=ie,Ve.prototype[K]=function(...ye){return this._getService.bind(this,te).apply(this,$e.multipleInstances?ye:[])}}return"PUBLIC"===$e.type?be[K]:null},removeApp:function nt($e){delete pe[$e]},useAsService:function Ge($e,te){return"serverAuth"===te?null:te},modularAPIs:k}};function Ye($e){if(!(0,h.r3)(pe,$e=$e||k._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:$e});return pe[$e]}return be.default=be,Object.defineProperty(be,"apps",{get:function _e(){return Object.keys(pe).map($e=>pe[$e])}}),Ye.App=Ve,be}(X);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function pe(be){(0,h.ZB)(Ve,be)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Ve}(),H=new ue.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=$;!function Ae(Ve){(0,k.registerVersion)("@firebase/app-compat","0.1.21",Ve)}()},9681:(ut,Se,O)=>{O.r(Se),O.d(Se,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Gr,_DEFAULT_ENTRY_NAME:()=>kn,_addComponent:()=>dn,_addOrOverwriteComponent:()=>Ti,_apps:()=>Et,_clearComponents:()=>Gt,_components:()=>cn,_getProvider:()=>ss,_registerComponent:()=>sn,_removeServiceInstance:()=>tn,deleteApp:()=>as,getApp:()=>qr,getApps:()=>os,initializeApp:()=>Hi,onLog:()=>ir,registerVersion:()=>ei,setLogLevel:()=>Zn});var h=O(5861),Y=O(4859),k=O(1877),ue=O(2090);class X{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function me(Qe){const Te=Qe.getComponent();return"VERSION"===(null==Te?void 0:Te.type)}(et)){const ft=et.getImmediate();return`${ft.library}/${ft.version}`}return null}).filter(et=>et).join(" ")}}const re="@firebase/app",ce=new k.Yd("@firebase/app"),kn="[DEFAULT]",lt={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Et=new Map,cn=new Map;function dn(Qe,Te){try{Qe.container.addComponent(Te)}catch(et){ce.debug(`Component ${Te.name} failed to register with FirebaseApp ${Qe.name}`,et)}}function Ti(Qe,Te){Qe.container.addOrOverwriteComponent(Te)}function sn(Qe){const Te=Qe.name;if(cn.has(Te))return ce.debug(`There were multiple attempts to register component ${Te}.`),!1;cn.set(Te,Qe);for(const et of Et.values())dn(et,Qe);return!0}function ss(Qe,Te){const et=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),Qe.container.getProvider(Te)}function tn(Qe,Te,et=kn){ss(Qe,Te).clearInstance(et)}function Gt(){cn.clear()}const li=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ks{constructor(Te,et,ft){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=ft,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}const Gr="9.6.10";function Hi(Qe,Te={}){"object"!=typeof Te&&(Te={name:Te});const et=Object.assign({name:kn,automaticDataCollectionEnabled:!1},Te),ft=et.name;if("string"!=typeof ft||!ft)throw li.create("bad-app-name",{appName:String(ft)});const jt=Et.get(ft);if(jt){if((0,ue.vZ)(Qe,jt.options)&&(0,ue.vZ)(et,jt.config))return jt;throw li.create("duplicate-app",{appName:ft})}const Vt=new Y.H0(ft);for(const V of cn.values())Vt.addComponent(V);const j=new ks(Qe,et,Vt);return Et.set(ft,j),j}function qr(Qe=kn){const Te=Et.get(Qe);if(!Te)throw li.create("no-app",{appName:Qe});return Te}function os(){return Array.from(Et.values())}function as(Qe){return dt.apply(this,arguments)}function dt(){return(dt=(0,h.Z)(function*(Qe){const Te=Qe.name;Et.has(Te)&&(Et.delete(Te),yield Promise.all(Qe.container.getProviders().map(et=>et.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function ei(Qe,Te,et){var ft;let jt=null!==(ft=lt[Qe])&&void 0!==ft?ft:Qe;et&&(jt+=`-${et}`);const Vt=jt.match(/\s|\//),j=Te.match(/\s|\//);if(Vt||j){const V=[`Unable to register library "${jt}" with version "${Te}":`];return Vt&&V.push(`library name "${jt}" contains illegal characters (whitespace or "/")`),Vt&&j&&V.push("and"),j&&V.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void ce.warn(V.join(" "))}sn(new Y.wA(`${jt}-version`,()=>({library:jt,version:Te}),"VERSION"))}function ir(Qe,Te){if(null!==Qe&&"function"!=typeof Qe)throw li.create("invalid-log-argument");(0,k.Am)(Qe,Te)}function Zn(Qe){(0,k.Ub)(Qe)}const vn="firebase-heartbeat-store";let sr=null;function Ps(){return sr||(sr=(0,ue.X3)("firebase-heartbeat-database",1,(Qe,Te)=>{0===Te&&Qe.createObjectStore(vn)}).catch(Qe=>{throw li.create("storage-open",{originalErrorMessage:Qe.message})})),sr}function qt(){return(qt=(0,h.Z)(function*(Qe){try{return(yield Ps()).transaction(vn).objectStore(vn).get(mr(Qe))}catch(Te){throw li.create("storage-get",{originalErrorMessage:Te.message})}})).apply(this,arguments)}function ot(Qe,Te){return It.apply(this,arguments)}function It(){return(It=(0,h.Z)(function*(Qe,Te){try{const ft=(yield Ps()).transaction(vn,"readwrite");return yield ft.objectStore(vn).put(Te,mr(Qe)),ft.complete}catch(et){throw li.create("storage-set",{originalErrorMessage:et.message})}})).apply(this,arguments)}function mr(Qe){return`${Qe.name}!${Qe.options.appId}`}class po{constructor(Te){this.container=Te,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new ht(et),this._heartbeatsCachePromise=this._storage.read().then(ft=>(this._heartbeatsCache=ft,ft))}triggerHeartbeat(){var Te=this;return(0,h.Z)(function*(){const ft=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jt=Tr();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==jt&&!Te._heartbeatsCache.heartbeats.some(Vt=>Vt.date===jt))return Te._heartbeatsCache.heartbeats.push({date:jt,agent:ft}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Vt=>{const j=new Date(Vt.date).valueOf();return Date.now()-j<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,h.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const et=Tr(),{heartbeatsToSend:ft,unsentEntries:jt}=function yr(Qe,Te=1024){const et=[];let ft=Qe.slice();for(const jt of Qe){const Vt=et.find(j=>j.agent===jt.agent);if(Vt){if(Vt.dates.push(jt.date),Sr(et)>Te){Vt.dates.pop();break}}else if(et.push({agent:jt.agent,dates:[jt.date]}),Sr(et)>Te){et.pop();break}ft=ft.slice(1)}return{heartbeatsToSend:et,unsentEntries:ft}}(Te._heartbeatsCache.heartbeats),Vt=(0,ue.L)(JSON.stringify({version:2,heartbeats:ft}));return Te._heartbeatsCache.lastSentHeartbeatDate=et,jt.length>0?(Te._heartbeatsCache.heartbeats=jt,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Vt})()}}function Tr(){return(new Date).toISOString().substring(0,10)}class ht{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,h.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function ka(Qe){return qt.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var et=this;return(0,h.Z)(function*(){var ft;if(yield et._canUseIndexedDBPromise){const Vt=yield et.read();return ot(et.app,{lastSentHeartbeatDate:null!==(ft=Te.lastSentHeartbeatDate)&&void 0!==ft?ft:Vt.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var et=this;return(0,h.Z)(function*(){var ft;if(yield et._canUseIndexedDBPromise){const Vt=yield et.read();return ot(et.app,{lastSentHeartbeatDate:null!==(ft=Te.lastSentHeartbeatDate)&&void 0!==ft?ft:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...Te.heartbeats]})}})()}}function Sr(Qe){return(0,ue.L)(JSON.stringify({version:2,heartbeats:Qe})).length}!function Ut(Qe){sn(new Y.wA("platform-logger",Te=>new X(Te),"PRIVATE")),sn(new Y.wA("heartbeat",Te=>new po(Te),"PRIVATE")),ei(re,"0.7.20",Qe),ei(re,"0.7.20","esm2017"),ei("fire-js","")}("")},4859:(ut,Se,O)=>{O.d(Se,{H0:()=>fe,wA:()=>k});var h=O(5861),Y=O(2090);class k{constructor($,H,J){this.name=$,this.instanceFactory=H,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ue="[DEFAULT]";class X{constructor($,H){this.name=$,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const H=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(H)){const J=new Y.BH;if(this.instancesDeferred.set(H,J),this.isInitialized(H)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:H});We&&J.resolve(We)}catch(We){}}return this.instancesDeferred.get(H).promise}getImmediate($){var H;const J=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),We=null!==(H=null==$?void 0:$.optional)&&void 0!==H&&H;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Ae){if(We)return null;throw Ae}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function re(ce){return"EAGER"===ce.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(H){}for(const[H,J]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(H);try{const Ae=this.getOrInitializeService({instanceIdentifier:We});J.resolve(Ae)}catch(Ae){}}}}clearInstance($=ue){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,h.Z)(function*(){const H=Array.from($.instances.values());yield Promise.all([...H.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...H.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ue){return this.instances.has($)}getOptions($=ue){return this.instancesOptions.get($)||{}}initialize($={}){const{options:H={}}=$,J=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:J,options:H});for(const[Ae,Oe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Ae)&&Oe.resolve(We);return We}onInit($,H){var J;const We=this.normalizeInstanceIdentifier(H),Ae=null!==(J=this.onInitCallbacks.get(We))&&void 0!==J?J:new Set;Ae.add($),this.onInitCallbacks.set(We,Ae);const Oe=this.instances.get(We);return Oe&&$(Oe,We),()=>{Ae.delete($)}}invokeOnInitCallbacks($,H){const J=this.onInitCallbacks.get(H);if(J)for(const We of J)try{We($,H)}catch(Ae){}}getOrInitializeService({instanceIdentifier:$,options:H={}}){let J=this.instances.get($);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=$,ce===ue?void 0:ce),options:H}),this.instances.set($,J),this.instancesOptions.set($,H),this.invokeOnInitCallbacks(J,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,J)}catch(We){}var ce;return J||null}normalizeInstanceIdentifier($=ue){return this.component?this.component.multipleInstances?$:ue:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor($){this.name=$,this.providers=new Map}addComponent($){const H=this.getProvider($.name);if(H.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);H.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const H=new X($,this);return this.providers.set($,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Se,O)=>{O.d(Se,{Am:()=>ce,Ub:()=>fe,Yd:()=>re,in:()=>Y});const h=[];var Y=(()=>{return($=Y||(Y={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Y;var $})();const k={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ue=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},me=($,H,...J)=>{if(H<$.logLevel)return;const We=(new Date).toISOString(),Ae=X[H];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Ae](`[${We}]  ${$.name}:`,...J)};class re{constructor(H){this.name=H,this._logLevel=ue,this._logHandler=me,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Y))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?k[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...H),this._logHandler(this,Y.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...H),this._logHandler(this,Y.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...H),this._logHandler(this,Y.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...H),this._logHandler(this,Y.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...H),this._logHandler(this,Y.ERROR,...H)}}function fe($){h.forEach(H=>{H.setLogLevel($)})}function ce($,H){for(const J of h){let We=null;H&&H.level&&(We=k[H.level]),J.userLogHandler=null===$?null:(Ae,Oe,...Ve)=>{const pe=Ve.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(nt){return null}}).filter(be=>be).join(" ");Oe>=(null!=We?We:Ae.logLevel)&&$({level:Y[Oe].toLowerCase(),message:pe,args:Ve,type:Ae.name})}}}},5861:(ut,Se,O)=>{function h(k,ue,X,me,re,fe,ce){try{var $=k[fe](ce),H=$.value}catch(J){return void X(J)}$.done?ue(H):Promise.resolve(H).then(me,re)}function Y(k){return function(){var ue=this,X=arguments;return new Promise(function(me,re){var fe=k.apply(ue,X);function ce(H){h(fe,me,re,ce,$,"next",H)}function $(H){h(fe,me,re,ce,$,"throw",H)}ce(void 0)})}}O.d(Se,{Z:()=>Y})}},ut=>{ut(ut.s=9072)}]);